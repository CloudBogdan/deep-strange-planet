{"version":3,"sources":["ts/managers/assets.ts","ts/config.ts","ts/engine/utils/noise.ts","ts/engine/utils/math.ts","ts/engine/Asset.ts","ts/engine/Physics.ts","ts/engine/components/Point.ts","ts/engine/components/Sprite.ts","ts/engine/components/Container.ts","ts/engine/events/Gamepad.ts","ts/engine/Renderer.ts","ts/engine/Generator.ts","ts/messages.ts","ts/engine/components/Sound.ts","ts/engine/Game.ts","ts/engine/components/Text.ts","ts/engine/components/Group.ts","ts/engine/index.ts","ts/engine/components/Particles.ts","ts/objects/entities/Entity.ts","ts/engine/components/UI.ts","ts/objects/item/ItemParent.ts","ts/objects/item/Item.ts","ts/objects/item/RobotItem.ts","ts/objects/entities/Robot.ts","ts/objects/entities/Player.ts","ts/managers/level.ts","ts/objects/Block.ts","ts/objects/ores/Ore.ts","ts/objects/ores/Stone.ts","ts/objects/ores/FallingORe.ts","ts/objects/ores/CrackedStone.ts","ts/objects/ores/DeepStone.ts","ts/objects/raws/Raw.ts","ts/objects/raws/RawCidium.ts","ts/objects/ores/Cidium.ts","ts/names.ts","ts/objects/gear/Gear.ts","ts/objects/gear/OxygenGenerator.ts","ts/objects/food/Food.ts","ts/objects/food/Fetus.ts","ts/objects/item/Battery.ts","ts/objects/item/Drill.ts","ts/objects/raws/RawAntin.ts","ts/objects/raws/RawGradeCidium.ts","ts/objects/raws/RawNerius.ts","ts/objects/raws/RawOsmy.ts","ts/objects/raws/DangerRaw.ts","ts/objects/raws/RawRady.ts","ts/objects/ready/Ready.ts","ts/objects/ready/ReadyCidium.ts","ts/objects.ts","ts/objects/gear/recipes.ts","ts/objects/gear/Recycler.ts","ts/objects/gear/Storage.ts","ts/managers/dome.ts","ts/objects/ores/Osmy.ts","ts/objects/ores/Basalt.ts","ts/objects/ores/Antin.ts","ts/objects/ores/DangerOre.ts","ts/objects/ores/Rady.ts","ts/objects/ores/BurntBasalt.ts","ts/objects/ores/Nerius.ts","ts/objects/ores/StonyGround.ts","ts/objects/ores/Destrony.ts","ts/objects/raws/RawManty.ts","ts/objects/ores/Manty.ts","ts/objects/ores/FetusStone.ts","ts/objects/ores/MushroomStone.ts","ts/main.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;;AACA;;AAGA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AAGA;;AACA;;AAGA;;AACA;;AAGA;;AAGA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AApGA;AACA;AAC4D;AACA;AAE5D;AACyD;AAEzD;AACqD;AACc;AACZ;AACQ;AACI;AACR;AACN;AACY;AACM;AACF;AAErE;AACuD;AACJ;AACE;AACF;AACI;AAEvD;AAC8D;AACY;AAChB;AACE;AACF;AACI;AACF;AAE5D;AACoE;AAEpE;AAC0D;AACJ;AAEtD;AACgE;AACJ;AAE5D;AAC+D;AAE/D;AAC8D;AACJ;AACc;AACN;AAElE;AACuE;AACE;AACgB;AACF;AACE;AACgB;AAEzG;AACyD;AACN;AACF;AACE;AACE;AACF;AACE;AACA;AACI;AACI;AACE;AACM;AACU;AAE/E;AACsD;AACmB;AACA;AACA;AACO;AACf;AACJ;AACV;AACP;AAEI;AACA;AACA;AAEO;AACJ;AACG;AACH;AAEC;AACY;AAE1D,SAAU,UAAV,CAAqB,IAArB,EAA+B;A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","file":"main.06f47f04.js","sourceRoot":"..\\src","sourcesContent":["import { Game } from \"../engine\"; // @ts-ignore\r\n// I can't setup declare module :(\r\n// > Player\r\nimport player_stay_img from \"../../images/player/stay.png\"; // @ts-ignore\r\nimport player_walk_img from \"../../images/player/walk.png\"; // @ts-ignore\r\n\r\n// > Entities\r\nimport robot_img from \"../../images/entities/robot.png\"; // @ts-ignore\r\n\r\n// > Stones\r\nimport stone_img from \"../../images/ores/stone.png\"; // @ts-ignore\r\nimport stony_ground_img from \"../../images/ores/stony-ground.png\"; // @ts-ignore\r\nimport basalt_img from \"../../images/ores/basalt.png\"; // @ts-ignore\r\nimport deep_stone_img from \"../../images/ores/deep-stone.png\"; // @ts-ignore\r\nimport burnt_basalt_img from \"../../images/ores/burnt-basalt.png\"; // @ts-ignore\r\nimport destrony_img from \"../../images/ores/destrony.png\"; // @ts-ignore\r\nimport manty_img from \"../../images/ores/manty.png\"; // @ts-ignore\r\nimport fetus_stone_img from \"../../images/ores/fetus-stone.png\"; // @ts-ignore\r\nimport mushroom_stone_img from \"../../images/ores/mushroom-stone.png\"; // @ts-ignore\r\nimport cracked_stone_img from \"../../images/ores/cracked-stone.png\"; // @ts-ignore\r\n\r\n// > Ores\r\nimport cidium_img from \"../../images/ores/cidium.png\"; // @ts-ignore\r\nimport osmy_img from \"../../images/ores/osmy.png\"; // @ts-ignore\r\nimport antin_img from \"../../images/ores/antin.png\"; // @ts-ignore\r\nimport rady_img from \"../../images/ores/rady.png\"; // @ts-ignore\r\nimport nerius_img from \"../../images/ores/nerius.png\"; // @ts-ignore\r\n\r\n// > Raw\r\nimport raw_cidium_img from \"../../images/raw/raw-cidium.png\"; // @ts-ignore\r\nimport raw_grade_cidium_img from \"../../images/raw/raw-grade-cidium.png\"; // @ts-ignore\r\nimport raw_osmy_img from \"../../images/raw/raw-osmy.png\"; // @ts-ignore\r\nimport raw_antin_img from \"../../images/raw/raw-antin.png\"; // @ts-ignore\r\nimport raw_rady_img from \"../../images/raw/raw-rady.png\"; // @ts-ignore\r\nimport raw_nerius_img from \"../../images/raw/raw-nerius.png\"; // @ts-ignore\r\nimport raw_manty_img from \"../../images/raw/raw-manty.png\"; // @ts-ignore\r\n\r\n// > Ready\r\nimport ready_cidium_img from \"../../images/ready/ready-cidium.png\"; // @ts-ignore\r\n\r\n// > Items\r\nimport battery_img from \"../../images/items/battery.png\"; // @ts-ignore\r\nimport drill_img from \"../../images/items/drill.png\"; // @ts-ignore\r\n\r\n// > Plants\r\nimport fetus_vine_img from \"../../images/flora/fetus-vine.png\"; // @ts-ignore\r\nimport mushroom_img from \"../../images/flora/mushroom.png\"; // @ts-ignore\r\n\r\n// > Food\r\nimport food_fetus_img from \"../../images/food/food-fetus.png\"; // @ts-ignore\r\n\r\n// > Environment\r\nimport ground_img from \"../../images/environment/ground.png\"; // @ts-ignore\r\nimport dome_img from \"../../images/environment/dome.png\"; // @ts-ignore\r\nimport under_stone_img from \"../../images/environment/under-stone.png\"; // @ts-ignore\r\nimport disputes_img from \"../../images/environment/disputes.png\"; // @ts-ignore\r\n\r\n// > Gear\r\nimport gear_storage_1_img from \"../../images/gear/gear-storage-1.png\"; // @ts-ignore\r\nimport gear_recycler_1_img from \"../../images/gear/gear-recycler-1.png\"; // @ts-ignore\r\nimport gear_oxygen_generator_1_img from \"../../images/gear/gear-oxygen-generator-1.png\"; // @ts-ignore\r\nimport gear_storage_1_outline_img from \"../../images/gear/gear-storage-1-outline.png\"; // @ts-ignore\r\nimport gear_recycler_1_outline_img from \"../../images/gear/gear-recycler-1-outline.png\"; // @ts-ignore\r\nimport gear_oxygen_generator_1_outline_img from \"../../images/gear/gear-oxygen-generator-1-outline.png\"; // @ts-ignore\r\n\r\n// > UI\r\nimport interact_img from \"../../images/ui/interact.png\"; // @ts-ignore\r\nimport close_img from \"../../images/ui/close.png\"; // @ts-ignore\r\nimport drop_img from \"../../images/ui/drop.png\"; // @ts-ignore\r\nimport craft_img from \"../../images/ui/craft.png\"; // @ts-ignore\r\nimport button_img from \"../../images/ui/button.png\"; // @ts-ignore\r\nimport tools_img from \"../../images/ui/tools.png\"; // @ts-ignore\r\nimport bottle_img from \"../../images/ui/bottle.png\"; // @ts-ignore\r\nimport damage_img from \"../../images/ui/damage.png\"; // @ts-ignore\r\nimport level_up_img from \"../../images/ui/level-up.png\"; // @ts-ignore\r\nimport storage_ui_img from \"../../images/ui/storage-ui.png\"; // @ts-ignore\r\nimport recycler_ui_img from \"../../images/ui/recycler-ui.png\"; // @ts-ignore\r\nimport description_ui_img from \"../../images/ui/description-ui.png\"; // @ts-ignore\r\nimport oxygen_generator_ui_img from \"../../images/ui/oxygen-generator-ui.png\"; // @ts-ignore\r\n\r\n// > Audio\r\nimport stone_hit_mp from \"../../audio/stone-hit.mp3\"; // @ts-ignore\r\nimport stone_break1_mp from \"../../audio/stone-break/stone-break-1.mp3\"; // @ts-ignore\r\nimport stone_break2_mp from \"../../audio/stone-break/stone-break-2.mp3\"; // @ts-ignore\r\nimport stone_break3_mp from \"../../audio/stone-break/stone-break-3.mp3\"; // @ts-ignore\r\nimport fall_stone_break_mp from \"../../audio/stone-break/fall-stone-break.mp3\"; // @ts-ignore\r\nimport plant_break_mp from \"../../audio/plants/plant-break.mp3\"; // @ts-ignore\r\nimport plant_hit_mp from \"../../audio/plants/plant-hit.mp3\"; // @ts-ignore\r\nimport wave_mp from \"../../audio/plants/wave.mp3\"; // @ts-ignore\r\nimport bonk_mp from \"../../audio/bonk.mp3\"; // @ts-ignore\r\n\r\nimport step1_mp from \"../../audio/steps/1.mp3\"; // @ts-ignore\r\nimport step2_mp from \"../../audio/steps/2.mp3\"; // @ts-ignore\r\nimport step3_mp from \"../../audio/steps/3.mp3\"; // @ts-ignore\r\n\r\nimport storage_mp from \"../../audio/gear/storage.mp3\"; // @ts-ignore\r\nimport store_mp from \"../../audio/gear/store.mp3\"; // @ts-ignore\r\nimport crafting_mp from \"../../audio/gear/craft.mp3\"; // @ts-ignore\r\nimport error_mp from \"../../audio/gear/error.mp3\"; // @ts-ignore\r\n\r\nimport motor_mp from \"../../audio/robot/motor.mp3\"; // @ts-ignore\r\nimport motor_start_mp from \"../../audio/robot/motor-start.mp3\"; // @ts-ignore\r\n\r\nexport function initAssets(game: Game) {\r\n    \r\n    // > Player\r\n    game.loadAsset(\"player-stay\", [player_stay_img]);\r\n    game.loadAsset(\"player-walk\", [player_walk_img]);\r\n    // game.loadAsset(\"player-walk\", [\r\n    //     player_walk_0_img,\r\n    //     player_walk_1_img,\r\n    //     player_walk_2_img,\r\n    //     player_stay_img,\r\n    // ]);\r\n\r\n    // > Entities\r\n    game.loadAsset(\"robot\", [robot_img]);\r\n\r\n    // > Stones\r\n    game.loadAsset(\"stone\", [stone_img]);\r\n    game.loadAsset(\"stony-ground\", [stony_ground_img]);\r\n    game.loadAsset(\"basalt\", [basalt_img]);\r\n    game.loadAsset(\"deep-stone\", [deep_stone_img]);\r\n    game.loadAsset(\"burnt-basalt\", [burnt_basalt_img]);\r\n    game.loadAsset(\"destrony\", [destrony_img]);\r\n    game.loadAsset(\"manty\", [manty_img]);\r\n    game.loadAsset(\"fetus-stone\", [fetus_stone_img]);\r\n    game.loadAsset(\"mushroom-stone\", [mushroom_stone_img]);\r\n    game.loadAsset(\"cracked-stone\", [cracked_stone_img]);\r\n\r\n    // > Ores\r\n    game.loadAsset(\"cidium\", [cidium_img]);\r\n    game.loadAsset(\"osmy\", [osmy_img]);\r\n    game.loadAsset(\"antin\", [antin_img]);\r\n    game.loadAsset(\"rady\", [rady_img]);\r\n    game.loadAsset(\"nerius\", [nerius_img]);\r\n\r\n    // > Raws\r\n    game.loadAsset(\"raw-cidium\", [raw_cidium_img]);\r\n    game.loadAsset(\"raw-grade-cidium\", [raw_grade_cidium_img]);\r\n    game.loadAsset(\"raw-osmy\", [raw_osmy_img]);\r\n    game.loadAsset(\"raw-antin\", [raw_antin_img]);\r\n    game.loadAsset(\"raw-rady\", [raw_rady_img]);\r\n    game.loadAsset(\"raw-nerius\", [raw_nerius_img]);\r\n    game.loadAsset(\"raw-manty\", [raw_manty_img]);\r\n\r\n    // > Ready\r\n    game.loadAsset(\"ready-cidium\", [ready_cidium_img]);\r\n\r\n    // > Items\r\n    game.loadAsset(\"battery\", [battery_img]);\r\n    game.loadAsset(\"drill\", [drill_img]);\r\n\r\n    // > Plants\r\n    game.loadAsset(\"fetus-vine\", [fetus_vine_img]);\r\n    game.loadAsset(\"mushroom\", [mushroom_img]);\r\n\r\n    // > Food\r\n    game.loadAsset(\"food-fetus\", [food_fetus_img]);\r\n    \r\n    // > Environment\r\n    game.loadAsset(\"ground\", [ground_img])\r\n    game.loadAsset(\"dome\", [dome_img])\r\n    game.loadAsset(\"under-stone\", [under_stone_img]);\r\n    game.loadAsset(\"disputes\", [disputes_img])\r\n\r\n    // > Gear\r\n    game.loadAsset(\"gear-storage-1\", [gear_storage_1_img])\r\n    game.loadAsset(\"gear-recycler-1\", [gear_recycler_1_img])\r\n    game.loadAsset(\"gear-oxygen-generator-1\", [gear_oxygen_generator_1_img])\r\n    game.loadAsset(\"gear-storage-1-outline\", [gear_storage_1_outline_img])\r\n    game.loadAsset(\"gear-recycler-1-outline\", [gear_recycler_1_outline_img])\r\n    game.loadAsset(\"gear-oxygen-generator-1-outline\", [gear_oxygen_generator_1_outline_img])\r\n\r\n    // > UI\r\n    game.loadAsset(\"interact\", [interact_img])\r\n    game.loadAsset(\"close\", [close_img])\r\n    game.loadAsset(\"drop\", [drop_img])\r\n    game.loadAsset(\"craft\", [craft_img])\r\n    game.loadAsset(\"button\", [button_img])\r\n    game.loadAsset(\"tools\", [tools_img])\r\n    game.loadAsset(\"bottle\", [bottle_img])\r\n    game.loadAsset(\"damage\", [damage_img])\r\n    game.loadAsset(\"storage-ui\", [storage_ui_img])\r\n    game.loadAsset(\"level-up\", [level_up_img])\r\n    game.loadAsset(\"recycler-ui\", [recycler_ui_img])\r\n    game.loadAsset(\"description-ui\", [description_ui_img])\r\n    game.loadAsset(\"oxygen-generator-ui\", [oxygen_generator_ui_img])\r\n\r\n    // > Audio\r\n    game.loadAsset(\"stone-hit\", stone_hit_mp, \"audio\")\r\n    game.loadAsset(\"stone-break-1\", stone_break1_mp, \"audio\")\r\n    game.loadAsset(\"stone-break-2\", stone_break2_mp, \"audio\")\r\n    game.loadAsset(\"stone-break-3\", stone_break3_mp, \"audio\")\r\n    game.loadAsset(\"fall-stone-break\", fall_stone_break_mp, \"audio\")\r\n    game.loadAsset(\"plant-break\", plant_break_mp, \"audio\")\r\n    game.loadAsset(\"plant-hit\", plant_hit_mp, \"audio\")\r\n    game.loadAsset(\"wave\", wave_mp, \"audio\")\r\n    game.loadAsset(\"bonk\", bonk_mp, \"audio\")\r\n\r\n    game.loadAsset(\"step-1\", step1_mp, \"audio\")\r\n    game.loadAsset(\"step-2\", step2_mp, \"audio\")\r\n    game.loadAsset(\"step-3\", step3_mp, \"audio\")\r\n    game.loadAsset(\"storage\", storage_mp, \"audio\")\r\n    game.loadAsset(\"error\", error_mp, \"audio\")\r\n    \r\n    game.loadAsset(\"store\", store_mp, \"audio\")\r\n    game.loadAsset(\"crafting\", crafting_mp, \"audio\")\r\n\r\n    game.loadAsset(\"motor\", motor_mp, \"audio\")\r\n    game.loadAsset(\"motor-start\", motor_start_mp, \"audio\")\r\n\r\n}","import { ToolLevel } from \"./objects/entities/Player\";\r\nimport { GearLevel } from \"./objects/gear/Gear\";\r\n\r\nexport enum Config {\r\n    // World size and chunks size in blocks\r\n    WORLD_WIDTH = 82,\r\n    WORLD_HEIGHT = 225,\r\n    CHUNK_SIZE = 4,\r\n    \r\n    SPRITE_SCALE = 5,\r\n    SPRITE_PIXEL_SIZE = 16,\r\n    SPRITE_SIZE = SPRITE_PIXEL_SIZE * SPRITE_SCALE,\r\n    PARTICLES_GRAVITY = .4,\r\n    WORLD_X_CENTER = WORLD_WIDTH * SPRITE_SIZE / 2, // In pixels\r\n\r\n    VINE_GROW_TICK = 60,\r\n    VINE_GROW_CHANCE = 50,\r\n    VINE_MIN_LENGTH = 4,\r\n    VINE_MAX_LENGTH = 8,\r\n    \r\n    ROBOT_PICKUP_DISTANCE = SPRITE_SIZE,\r\n    ROBOT_DAMAGE = 4,\r\n    ROBOT_HIT_SPEED = 10,\r\n    ROBOT_ALLOW_PICKUP_DELAY = 20,\r\n\r\n    PICKUP_DISTANCE = 50,\r\n    WIRE_LENGTH = 60,\r\n    GEAR_INTERACT_DISTANCE = 85,\r\n    DOME_DIAMETER = SPRITE_SIZE * 6,\r\n    GROUND_HEIGHT = SPRITE_SIZE * 2,\r\n    OXYGEN_HUNGRY_TIME = 3550,\r\n    \r\n    ALLOW_DARK = 1,\r\n    ITEMS_LIVE_TIME = 800,\r\n    ORE_FALL_DELAY = 30,\r\n    DEFAULT_ANIMATION_SPEED = 8,\r\n}\r\nexport enum GeneratorConfig {\r\n    LAYERS_BLEND_HEIGHT = 10,\r\n    BASALT_LAYER_HEIGHT = 150,\r\n    BURNT_BASALT_LAYER_HEIGHT = Config.WORLD_HEIGHT - 5,\r\n}\r\nexport enum Color {\r\n    STONE_LAYER_COLOR = \"#090d23\",\r\n    BASALT_LAYER_COLOR = \"#1b1d27\",\r\n    BURNT_BASALT_LAYER_COLOR = \"#040508\",\r\n\r\n    WHITE = \"#fff\",\r\n    BLACK = \"#0f1531\",\r\n    GREY = \"#2c2f3d\",\r\n    DARK_GREY = \"#13151e\",\r\n    YELLOW = \"#fbc67e\",\r\n    ORANGE = \"#ff935c\",\r\n    BLUE = \"#b9c5ff\",\r\n    RED = \"#fb7e88\",\r\n    GREEN = \"#6aff81\",\r\n    YELLOW_LIGHT = \"#fde3bf\",\r\n    BLUE_LIGHT = \"#e0e6ff\",\r\n    RED_LIGHT = \"#f9cace\",\r\n    GREEN_LIGHT = \"#d4ffdb\",\r\n}\r\nexport const OreSettings: { [key: string]: { hp: number, tool?: ToolLevel } } = {\r\n    \"stone\": { hp: 10 },\r\n    \"stony-ground\": { hp: 8 },\r\n    \"antin\": { hp: 52, tool: 3 },\r\n    \"basalt\": { hp: 40, tool: 3 },\r\n    \"burnt-basalt\": { hp: 80, tool: 4 },\r\n    \"manty\": { hp: 108, tool: 4 },\r\n    \"cidium\": { hp: 20 },\r\n    \"cracked-stone\": { hp: 6 },\r\n    \"deep-stone\": { hp: 26, tool: 2 },\r\n    \"osmy\": { hp: 36, tool: 2 },\r\n    \"nerius\": { hp: 32, tool: 2 },\r\n    \"rady\": { hp: 58, tool: 4 },\r\n    \"root-stone\": { hp: 14 },\r\n    \"mushroom-stone\": { hp: 32, tool: 3 },\r\n}\r\nexport const ItemSettings: { [key: string]: { lineColor: Color, storage: GearLevel } } = {\r\n    \"raw-cidium\": {\r\n        lineColor: Color.YELLOW_LIGHT,\r\n        storage: 1\r\n    },\r\n    \"raw-grade-cidium\": {\r\n        lineColor: Color.YELLOW_LIGHT,\r\n        storage: 1\r\n    },\r\n    \"raw-osmy\": {\r\n        lineColor: Color.BLUE_LIGHT,\r\n        storage: 1\r\n    },\r\n    \"raw-antin\": {\r\n        lineColor: Color.RED_LIGHT,\r\n        storage: 3\r\n    },\r\n    \"raw-rady\": {\r\n        lineColor: Color.GREEN_LIGHT,\r\n        storage: 3\r\n    },\r\n    \"raw-nerius\": {\r\n        lineColor: Color.WHITE,\r\n        storage: 2\r\n    },\r\n    \"raw-manty\": {\r\n        lineColor: Color.RED_LIGHT,\r\n        storage: 3\r\n    },\r\n}","/*\r\n * >> Adaptive to typescript by Bogdanov :D\r\n * >> https://github.com/CloudBogdan\r\n *\r\n * A speed-improved perlin and simplex noise algorithms for 2D.\r\n *\r\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\r\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\r\n * Better rank ordering method by Stefan Gustavson in 2012.\r\n * Converted to Javascript by Joseph Gentle.\r\n *\r\n * Version 2012-03-09\r\n *\r\n * This code was placed in the public domain by its original author,\r\n * Stefan Gustavson. You may use it as you see fit, but\r\n * attribution is appreciated.\r\n *\r\n */\r\nclass Grad {\r\n    x: number\r\n    y: number\r\n    z: number\r\n    \r\n    constructor(x: number, y: number, z: number) {\r\n        this.x = x; this.y = y; this.z = z;\r\n    }\r\n\r\n    dot2(x: number, y: number) {\r\n        return this.x * x + this.y * y;\r\n    }\r\n    dot3(x: number, y: number, z: number) {\r\n        return this.x * x + this.y * y + this.z * z;\r\n    }\r\n}\r\n// function Grad(x: number, y: number, z: number) {\r\n//     this.x = x; this.y = y; this.z = z;\r\n// }\r\n\r\n// Grad.prototype.dot2 = function (x: number, y: number) {\r\n//     return this.x * x + this.y * y;\r\n// };\r\n\r\n// Grad.prototype.dot3 = function (x: number, y: number, z: number) {\r\n//     return this.x * x + this.y * y + this.z * z;\r\n// };\r\n\r\nvar grad3 = [new Grad(1, 1, 0), new Grad(-1, 1, 0), new Grad(1, -1, 0), new Grad(-1, -1, 0),\r\nnew Grad(1, 0, 1), new Grad(-1, 0, 1), new Grad(1, 0, -1), new Grad(-1, 0, -1),\r\nnew Grad(0, 1, 1), new Grad(0, -1, 1), new Grad(0, 1, -1), new Grad(0, -1, -1)];\r\n\r\nvar p = [151, 160, 137, 91, 90, 15,\r\n    131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,\r\n    190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,\r\n    88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,\r\n    77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,\r\n    102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,\r\n    135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,\r\n    5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,\r\n    223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,\r\n    129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,\r\n    251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,\r\n    49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,\r\n    138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\r\n// To remove the need for index wrapping, double the permutation table length\r\nvar perm = new Array(512);\r\nvar gradP = new Array(512);\r\n\r\n// This isn't a very good seeding function, but it works ok. It supports 2^16\r\n// different seed values. Write something better if you need more seeds.\r\nexport function seed(seed: number) {\r\n    if (seed > 0 && seed < 1) {\r\n        // Scale the seed out\r\n        seed *= 65536;\r\n    }\r\n\r\n    seed = Math.floor(seed);\r\n    if (seed < 256) {\r\n        seed |= seed << 8;\r\n    }\r\n\r\n    for (var i = 0; i < 256; i++) {\r\n        var v: number;\r\n        if (i & 1) {\r\n            v = p[i] ^ (seed & 255);\r\n        } else {\r\n            v = p[i] ^ ((seed >> 8) & 255);\r\n        }\r\n\r\n        perm[i] = perm[i + 256] = v;\r\n        gradP[i] = gradP[i + 256] = grad3[v % 12];\r\n    }\r\n};\r\n\r\nseed(0);\r\n\r\n/*\r\nfor(var i=0; i<256; i++) {\r\n  perm[i] = perm[i + 256] = p[i];\r\n  gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\r\n}*/\r\n\r\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\r\nvar F2 = 0.5 * (Math.sqrt(3) - 1);\r\nvar G2 = (3 - Math.sqrt(3)) / 6;\r\n\r\nvar F3 = 1 / 3;\r\nvar G3 = 1 / 6;\r\n\r\n// 2D simplex noise\r\nexport function simplex2(xin: number, yin: number) {\r\n    var n0: number, n1: number, n2: number; // Noise contributions from the three corners\r\n    // Skew the input space to determine which simplex cell we're in\r\n    var s = (xin + yin) * F2; // Hairy factor for 2D\r\n    var i = Math.floor(xin + s);\r\n    var j = Math.floor(yin + s);\r\n    var t = (i + j) * G2;\r\n    var x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.\r\n    var y0 = yin - j + t;\r\n    // For the 2D case, the simplex shape is an equilateral triangle.\r\n    // Determine which simplex we are in.\r\n    var i1: number, j1: number; // Offsets for second (middle) corner of simplex in (i,j) coords\r\n    if (x0 > y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\r\n        i1 = 1; j1 = 0;\r\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\r\n        i1 = 0; j1 = 1;\r\n    }\r\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\r\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\r\n    // c = (3-sqrt(3))/6\r\n    var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\r\n    var y1 = y0 - j1 + G2;\r\n    var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\r\n    var y2 = y0 - 1 + 2 * G2;\r\n    // Work out the hashed gradient indices of the three simplex corners\r\n    i &= 255;\r\n    j &= 255;\r\n    var gi0 = gradP[i + perm[j]];\r\n    var gi1 = gradP[i + i1 + perm[j + j1]];\r\n    var gi2 = gradP[i + 1 + perm[j + 1]];\r\n    // Calculate the contribution from the three corners\r\n    var t0 = 0.5 - x0 * x0 - y0 * y0;\r\n    if (t0 < 0) {\r\n        n0 = 0;\r\n    } else {\r\n        t0 *= t0;\r\n        n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\r\n    }\r\n    var t1 = 0.5 - x1 * x1 - y1 * y1;\r\n    if (t1 < 0) {\r\n        n1 = 0;\r\n    } else {\r\n        t1 *= t1;\r\n        n1 = t1 * t1 * gi1.dot2(x1, y1);\r\n    }\r\n    var t2 = 0.5 - x2 * x2 - y2 * y2;\r\n    if (t2 < 0) {\r\n        n2 = 0;\r\n    } else {\r\n        t2 *= t2;\r\n        n2 = t2 * t2 * gi2.dot2(x2, y2);\r\n    }\r\n    // Add contributions from each corner to get the final noise value.\r\n    // The result is scaled to return values in the interval [-1,1].\r\n    return 70 * (n0 + n1 + n2);\r\n};\r\n\r\n// 3D simplex noise\r\nexport function simplex3(xin: number, yin: number, zin: number) {\r\n    var n0: number, n1: number, n2: number, n3: number; // Noise contributions from the four corners\r\n\r\n    // Skew the input space to determine which simplex cell we're in\r\n    var s = (xin + yin + zin) * F3; // Hairy factor for 2D\r\n    var i = Math.floor(xin + s);\r\n    var j = Math.floor(yin + s);\r\n    var k = Math.floor(zin + s);\r\n\r\n    var t = (i + j + k) * G3;\r\n    var x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.\r\n    var y0 = yin - j + t;\r\n    var z0 = zin - k + t;\r\n\r\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\r\n    // Determine which simplex we are in.\r\n    var i1: number, j1: number, k1: number; // Offsets for second corner of simplex in (i,j,k) coords\r\n    var i2: number, j2: number, k2: number; // Offsets for third corner of simplex in (i,j,k) coords\r\n    if (x0 >= y0) {\r\n        if (y0 >= z0) { i1 = 1; j1 = 0; k1 = 0; i2 = 1; j2 = 1; k2 = 0; }\r\n        else if (x0 >= z0) { i1 = 1; j1 = 0; k1 = 0; i2 = 1; j2 = 0; k2 = 1; }\r\n        else { i1 = 0; j1 = 0; k1 = 1; i2 = 1; j2 = 0; k2 = 1; }\r\n    } else {\r\n        if (y0 < z0) { i1 = 0; j1 = 0; k1 = 1; i2 = 0; j2 = 1; k2 = 1; }\r\n        else if (x0 < z0) { i1 = 0; j1 = 1; k1 = 0; i2 = 0; j2 = 1; k2 = 1; }\r\n        else { i1 = 0; j1 = 1; k1 = 0; i2 = 1; j2 = 1; k2 = 0; }\r\n    }\r\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\r\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\r\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\r\n    // c = 1/6.\r\n    var x1 = x0 - i1 + G3; // Offsets for second corner\r\n    var y1 = y0 - j1 + G3;\r\n    var z1 = z0 - k1 + G3;\r\n\r\n    var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\r\n    var y2 = y0 - j2 + 2 * G3;\r\n    var z2 = z0 - k2 + 2 * G3;\r\n\r\n    var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\r\n    var y3 = y0 - 1 + 3 * G3;\r\n    var z3 = z0 - 1 + 3 * G3;\r\n\r\n    // Work out the hashed gradient indices of the four simplex corners\r\n    i &= 255;\r\n    j &= 255;\r\n    k &= 255;\r\n    var gi0 = gradP[i + perm[j + perm[k]]];\r\n    var gi1 = gradP[i + i1 + perm[j + j1 + perm[k + k1]]];\r\n    var gi2 = gradP[i + i2 + perm[j + j2 + perm[k + k2]]];\r\n    var gi3 = gradP[i + 1 + perm[j + 1 + perm[k + 1]]];\r\n\r\n    // Calculate the contribution from the four corners\r\n    var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\r\n    if (t0 < 0) {\r\n        n0 = 0;\r\n    } else {\r\n        t0 *= t0;\r\n        n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\r\n    }\r\n    var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\r\n    if (t1 < 0) {\r\n        n1 = 0;\r\n    } else {\r\n        t1 *= t1;\r\n        n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\r\n    }\r\n    var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\r\n    if (t2 < 0) {\r\n        n2 = 0;\r\n    } else {\r\n        t2 *= t2;\r\n        n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\r\n    }\r\n    var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\r\n    if (t3 < 0) {\r\n        n3 = 0;\r\n    } else {\r\n        t3 *= t3;\r\n        n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\r\n    }\r\n    // Add contributions from each corner to get the final noise value.\r\n    // The result is scaled to return values in the interval [-1,1].\r\n    return 32 * (n0 + n1 + n2 + n3);\r\n\r\n};\r\n\r\n// ##### Perlin noise stuff\r\n\r\nfunction fade(t: number) {\r\n    return t * t * t * (t * (t * 6 - 15) + 10);\r\n}\r\n\r\nfunction lerp(a: number, b: number, t: number) {\r\n    return (1 - t) * a + t * b;\r\n}\r\n\r\n// 2D Perlin Noise\r\nexport function perlin2(x: number, y: number) {\r\n    // Find unit grid cell containing point\r\n    var X = Math.floor(x), Y = Math.floor(y);\r\n    // Get relative xy coordinates of point within that cell\r\n    x = x - X; y = y - Y;\r\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\r\n    X = X & 255; Y = Y & 255;\r\n\r\n    // Calculate noise contributions from each of the four corners\r\n    var n00 = gradP[X + perm[Y]].dot2(x, y);\r\n    var n01 = gradP[X + perm[Y + 1]].dot2(x, y - 1);\r\n    var n10 = gradP[X + 1 + perm[Y]].dot2(x - 1, y);\r\n    var n11 = gradP[X + 1 + perm[Y + 1]].dot2(x - 1, y - 1);\r\n\r\n    // Compute the fade curve value for x\r\n    var u = fade(x);\r\n\r\n    // Interpolate the four results\r\n    return lerp(\r\n        lerp(n00, n10, u),\r\n        lerp(n01, n11, u),\r\n        fade(y));\r\n};\r\n\r\n// 3D Perlin Noise\r\nexport function perlin3(x: number, y: number, z: number) {\r\n    // Find unit grid cell containing point\r\n    var X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\r\n    // Get relative xyz coordinates of point within that cell\r\n    x = x - X; y = y - Y; z = z - Z;\r\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\r\n    X = X & 255; Y = Y & 255; Z = Z & 255;\r\n\r\n    // Calculate noise contributions from each of the eight corners\r\n    var n000 = gradP[X + perm[Y + perm[Z]]].dot3(x, y, z);\r\n    var n001 = gradP[X + perm[Y + perm[Z + 1]]].dot3(x, y, z - 1);\r\n    var n010 = gradP[X + perm[Y + 1 + perm[Z]]].dot3(x, y - 1, z);\r\n    var n011 = gradP[X + perm[Y + 1 + perm[Z + 1]]].dot3(x, y - 1, z - 1);\r\n    var n100 = gradP[X + 1 + perm[Y + perm[Z]]].dot3(x - 1, y, z);\r\n    var n101 = gradP[X + 1 + perm[Y + perm[Z + 1]]].dot3(x - 1, y, z - 1);\r\n    var n110 = gradP[X + 1 + perm[Y + 1 + perm[Z]]].dot3(x - 1, y - 1, z);\r\n    var n111 = gradP[X + 1 + perm[Y + 1 + perm[Z + 1]]].dot3(x - 1, y - 1, z - 1);\r\n\r\n    // Compute the fade curve value for x, y, z\r\n    var u = fade(x);\r\n    var v = fade(y);\r\n    var w = fade(z);\r\n\r\n    // Interpolate\r\n    return lerp(\r\n        lerp(\r\n            lerp(n000, n100, u),\r\n            lerp(n001, n101, u), w),\r\n        lerp(\r\n            lerp(n010, n110, u),\r\n            lerp(n011, n111, u), w),\r\n        v);\r\n};","import { Config } from \"../../config\";\r\nimport { Storage } from \"../../objects/gear/Storage\";\r\nimport { Axes, Direction } from \"../../types\";\r\nimport { Asset, AssetType } from \"../Asset\";\r\nimport { simplex2 } from \"./noise\";\r\n\r\nexport class Vector2 {\r\n    x: number\r\n    y: number\r\n    \r\n    constructor(x?: number, y?: number) {\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n    }\r\n\r\n    set(x?: number, y?: number): Vector2 {\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        \r\n        return this;\r\n    }\r\n    copy(vec: Vector2): Vector2 {\r\n        this.x = vec.x;\r\n        this.y = vec.y;\r\n        return this;\r\n    }\r\n    normalize(): Vector2 {\r\n        const v = new Vector2(this.x, this.y);\r\n\r\n        const a = Math.sqrt(v.x ** 2 + v.y ** 2);\r\n        v.x /= a || 1;\r\n        v.y /= a || 1;\r\n\r\n        return v;\r\n    }\r\n    distance(vec: Vector2): number {\r\n        return Math.sqrt((this.x - vec.x) ** 2 + (this.y - vec.y) ** 2);\r\n    }\r\n    expand(): Vector2 {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n\r\n    apply(func: (v: number)=> number) {\r\n        return new Vector2(func(this.x), func(this.y));\r\n    }\r\n\r\n    add(vec: Vector2): Vector2 {\r\n        return new Vector2(this.x + vec.x, this.y + vec.y);\r\n    }\r\n    sub(vec: Vector2): Vector2 {\r\n        return new Vector2(this.x - vec.x, this.y - vec.y);\r\n    }\r\n    mul(value: number): Vector2 {\r\n        return new Vector2(this.x * value, this.y * value);\r\n    }\r\n    div(value: number): Vector2 {\r\n        return new Vector2(this.x / value, this.y / value);\r\n    }\r\n\r\n    lerp(to: Vector2, time: number): Vector2 {\r\n        this.x = this.x + (to.x - this.x) * time;\r\n        this.y = this.y + (to.y - this.y) * time;\r\n        \r\n        return this;\r\n    }\r\n\r\n    static add(vec1: Vector2, vec2: Vector2): Vector2 {\r\n        return new Vector2(vec1.x + vec2.x, vec1.y + vec2.y);\r\n    }\r\n    static sub(vec1: Vector2, vec2: Vector2): Vector2 {\r\n        return new Vector2(vec1.x - vec2.x, vec1.y - vec2.y);\r\n    }\r\n    \r\n    static zero(): Vector2 {\r\n        return new Vector2();\r\n    }\r\n    static all(value?: number): Vector2 {\r\n        return new Vector2(value || 1, value || 1);\r\n    }\r\n    static compare(vec1: Vector2, vec2: Vector2): boolean {\r\n        return vec1.x == vec2.x && vec1.y == vec2.y;\r\n    }\r\n}\r\n\r\nexport function assetIsValid(asset: Asset | undefined | null, type: AssetType): boolean {\r\n    return asset != null && asset.type != null && asset.type == type;\r\n}\r\nexport function safeValue<T>(value: T | undefined | null, safe: T): T {\r\n    return (value === undefined || value === null) ? safe : value;\r\n}\r\nexport function safeSlot(slot: Storage[\"contains\"][\"slots\"][0] | undefined): Storage[\"contains\"][\"slots\"][0] {\r\n    return safeValue(slot, { count: 0 });\r\n}\r\nexport function asImage(asset: Asset | undefined | null): HTMLImageElement | undefined {\r\n    if (!asset) return;\r\n\r\n    if (assetIsValid(asset as any, \"image\"))\r\n        return ((asset as Asset).element as HTMLImageElement[])[0];\r\n}\r\nexport function asAudio(asset: Asset | undefined | null): HTMLAudioElement | undefined {\r\n    if (!asset) return;\r\n\r\n    if (assetIsValid(asset as any, \"audio\"))\r\n        return (asset as Asset).element as HTMLAudioElement;\r\n}\r\n\r\nexport function standardName(name: string): string {\r\n    return name.trim().split(\" \").join(\"-\").toLocaleLowerCase();\r\n}\r\nexport function compareNames(name1: string, name2: string): boolean {\r\n    return standardName(name1) == standardName(name2);\r\n}\r\nexport function buildName(...args: string[]) {\r\n    return [...args].join(\" \");\r\n}\r\nexport function wrapText(text: string, maxLength: number): { text: string, wrapCount: number } {\r\n    let result: string = \"\";\r\n    let wrapCount = 0;\r\n\r\n    for (let i = 0; i < text.length; i ++) {\r\n\r\n        let letter = text[i];\r\n        \r\n        if ((i-1) > 0 && (i-1) % maxLength == 0) {\r\n            if (text[i] != \" \")\r\n                result += `-\\n`;\r\n            else\r\n                result += `\\n`;\r\n\r\n            wrapCount ++;\r\n            letter = text[i].trim();\r\n        }\r\n        result += letter;\r\n        \r\n    }\r\n        \r\n    return {\r\n        text: result,\r\n        wrapCount\r\n    };\r\n}\r\nexport function inChunkIdToPosition(inChunkId: string): Vector2 {\r\n    const size = Config.SPRITE_SIZE;\r\n    const inChunkPos = inChunkId.split(\"-\").map(p=> +p);\r\n\r\n    return new Vector2(\r\n        (inChunkPos[0] + inChunkPos[2] * Config.CHUNK_SIZE) * size,\r\n        (inChunkPos[1] + inChunkPos[3] * Config.CHUNK_SIZE) * size,\r\n    );\r\n}\r\n\r\nexport function lerp(from: number, to: number, time: number): number {\r\n    return from + (to - from) * time;\r\n}\r\nexport function random(from: number, to: number): number {\r\n    return Math.random() * (to - from) + from;\r\n}\r\nexport function randomInt(from: number, to: number): number {\r\n    return Math.floor(Math.random() * ((to + 1) - from) + from);\r\n}\r\nexport function randomNoise(depends: number, from: number, to: number): number {\r\n    return ((simplex2(depends/4, depends/4) + 1) / 2) * (to - from) + from;\r\n}\r\nexport function chance(percent: number): boolean {\r\n    return randomInt(0, 100) <= percent;\r\n}\r\nexport function clamp(value: number, min: number, max: number) {\r\n    if (value < min)\r\n        return min;\r\n    else if (value > max)\r\n        return max;\r\n    else\r\n        return value;\r\n}\r\nexport function inRange(value: number, from: number, to: number): boolean {\r\n    return value >= from && value <= to;\r\n}","import { standardName } from \"./utils/math\";\r\n\r\nexport type AssetType = \"image\" | \"audio\"; \r\n\r\nexport class Asset {\r\n    name: string\r\n    src: string | string[]\r\n    type: AssetType\r\n    element: HTMLAudioElement | HTMLImageElement[]\r\n    // element: PIXI.Texture | HTMLAudioElement | PIXI.Texture[]\r\n    \r\n    constructor(name: string, src: string | string[], type?: AssetType) {\r\n        this.name = standardName(name);\r\n        this.src = src;\r\n        this.type = type || \"image\";\r\n        this.element = [];\r\n\r\n        if (this.type == \"image\") {\r\n            this.element = (this.src as string[]).map(s=> {\r\n                const i = new Image();\r\n                i.src = s;\r\n                return i;\r\n            });\r\n        }\r\n        else if (type == \"audio\") {\r\n            this.element = new Audio(this.src as string);\r\n        }\r\n    }\r\n}","import { Config } from \"../config\";\r\nimport { Point } from \"./components/Point\";\r\nimport { Game } from \"./Game\";\r\nimport { Vector2 } from \"./utils/math\";\r\n\r\nexport type Collide = {\r\n    id: Point[\"id\"] | null\r\n    right: boolean\r\n    left: boolean\r\n    top: boolean\r\n    bottom: boolean\r\n    any: boolean\r\n}\r\nexport type CollideRect = {\r\n    id: string\r\n    width: number\r\n    height: number\r\n    position: Vector2\r\n}\r\nexport type ColliderType = \"solid\" | \"dynamic\" | \"none\";\r\nexport class Collider {\r\n    type: ColliderType\r\n    \r\n    width: number\r\n    height: number\r\n    offset: Vector2\r\n\r\n    collidable: boolean\r\n    collidesWith: Collide | null\r\n    parent: Point\r\n\r\n    constructor(parent: Point) {\r\n        this.type = \"dynamic\";\r\n\r\n        this.width = Config.SPRITE_PIXEL_SIZE * Config.SPRITE_SCALE;\r\n        this.height = Config.SPRITE_PIXEL_SIZE * Config.SPRITE_SCALE;\r\n        this.offset = new Vector2();\r\n\r\n        this.collidable = true;\r\n        this.collidesWith = null;\r\n        this.parent = parent;\r\n\r\n    }\r\n}\r\n\r\nexport class Physics {\r\n    game: Game\r\n    \r\n    constructor(game: Game) {\r\n        this.game = game;\r\n    }\r\n\r\n    collideWithRect(rect1: CollideRect, rect2: CollideRect): Collide {\r\n\r\n        const\r\n            pos1 = rect1.position,\r\n            pos2 = rect2.position;\r\n        const\r\n            w1 = rect1.width / 2,\r\n            w2 = rect2.width / 2;\r\n        const\r\n            h1 = rect1.height / 2,\r\n            h2 = rect2.height / 2;\r\n        const valid = rect1.id != rect2.id;\r\n        const horizontal = (\r\n            ((pos1.x + w1) > (pos2.x - w2)) && // Right\r\n            ((pos1.x - w1) < (pos2.x + w2)) // Left\r\n        )\r\n        const vertical = (\r\n            ((pos1.y + h1) > (pos2.y - h2)) && // Bottom\r\n            ((pos1.y - h2) < (pos2.y + h2)) // Top\r\n        ) && valid;\r\n\r\n        const locationX = Math.abs(Math.sqrt((pos1.x - pos2.x) ** 2));\r\n        const locationY = Math.abs(Math.sqrt((pos1.y - pos2.y) ** 2));\r\n\r\n        // Right\r\n        let right = (\r\n            ((pos1.x + w1) > (pos2.x - w2)) && pos2.x > pos1.x\r\n        ) && vertical && (locationX > locationY);\r\n        // Left\r\n        let left = (\r\n            ((pos1.x - w1) < (pos2.x + w2)) && pos1.x > pos2.x\r\n        ) && vertical && (locationX > locationY);\r\n        \r\n        // Top\r\n        let top = (\r\n            ((pos1.y - h1) < (pos2.y + h2)) && pos1.y > pos2.y\r\n        ) && horizontal && (locationY > locationX);\r\n        // Bottom\r\n        let bottom = (\r\n            ((pos1.y + h1) > (pos2.y - h2)) && pos2.y > pos1.y\r\n        ) && horizontal && (locationY > locationX);\r\n\r\n        let any = right || left || top || bottom;\r\n        \r\n        return {\r\n            id: rect2?.id || null, any,\r\n            right, left,\r\n            top, bottom\r\n        };\r\n\r\n    }\r\n    collide(point1: Point, point2: Point): Collide {\r\n\r\n        // if (this.game.camera.distance(point1.position) < 300 && this.game.camera.distance(point2.position) < 300)\r\n        //     return {\r\n        //         id: null, any: false,\r\n        //         right: false, left: false,\r\n        //         top: false, bottom: false\r\n        //     }\r\n        \r\n        const\r\n            pos1 = Vector2.add(point1.position, point1.collider.offset).add(point1.velocity),\r\n            pos2 = Vector2.add(point2.position, point2.collider.offset).add(point2.velocity);\r\n        const\r\n            w1 = point1.collider.width,\r\n            w2 = point2.collider.width;\r\n        const\r\n            h1 = point1.collider.height,\r\n            h2 = point2.collider.height;\r\n\r\n        return this.collideWithRect({\r\n            id: point1.id,\r\n            position: pos1,\r\n            width: w1,\r\n            height: h1\r\n        }, {\r\n            id: point2.id,\r\n            position: pos2,\r\n            width: w2,\r\n            height: h2\r\n        });\r\n        // const\r\n        //     pos1 = Vector2.add(point1.position, point1.collider.offset).add(point1.velocity),\r\n        //     pos2 = Vector2.add(point2.position, point2.collider.offset).add(point2.velocity);\r\n        // const\r\n        //     w1 = point1.collider.width / 2,\r\n        //     w2 = point2.collider.width / 2;\r\n        // const\r\n        //     h1 = point1.collider.height / 2,\r\n        //     h2 = point2.collider.height / 2;\r\n        // const valid = point1.id != point2.id;\r\n        // const horizontal = (\r\n        //     ((pos1.x + w1) > (pos2.x - w2)) && // Right\r\n        //     ((pos1.x - w1) < (pos2.x + w2)) // Left\r\n        // )\r\n        // const vertical = (\r\n        //     ((pos1.y + h1) > (pos2.y - h2)) && // Bottom\r\n        //     ((pos1.y - h2) < (pos2.y + h2)) // Top\r\n        // ) && valid;\r\n\r\n        // const locationX = Math.abs(Math.sqrt((pos1.x - pos2.x) ** 2));\r\n        // const locationY = Math.abs(Math.sqrt((pos1.y - pos2.y) ** 2));\r\n\r\n        // // Right\r\n        // let right = (\r\n        //     ((pos1.x + w1) > (pos2.x - w2)) && pos2.x > pos1.x\r\n        // ) && vertical && (locationX > locationY);\r\n        // // Left\r\n        // let left = (\r\n        //     ((pos1.x - w1) < (pos2.x + w2)) && pos1.x > pos2.x\r\n        // ) && vertical && (locationX > locationY);\r\n        \r\n        // // Top\r\n        // let top = (\r\n        //     ((pos1.y - h1) < (pos2.y + h2)) && pos1.y > pos2.y\r\n        // ) && horizontal && (locationY > locationX);\r\n        // // Bottom\r\n        // let bottom = (\r\n        //     ((pos1.y + h1) > (pos2.y - h2)) && pos2.y > pos1.y\r\n        // ) && horizontal && (locationY > locationX);\r\n\r\n        // let any = right || left || top || bottom;\r\n        \r\n        // return {\r\n        //     id: point2?.id || null, any,\r\n        //     right, left,\r\n        //     top, bottom\r\n        // };\r\n    }\r\n    \r\n    update() {\r\n        const children = this.game.children.filter(child=> (child.collider.type != \"none\" && child.collider.collidable));\r\n        \r\n        // for (let i = 0; i < children.length; i ++) {\r\n        //     for (let j = 0; j < children.length; j ++) {                \r\n        //         this.collideWith(children[i], children[j]);\r\n        //     }\r\n        // }\r\n        children.filter(child=> child.collider.type == \"solid\").map(solidChild=> {\r\n            children.filter(child=> child.collider.type == \"dynamic\").map(dynamicChild=> {\r\n                this.collideWith(dynamicChild, solidChild);\r\n            });\r\n        })\r\n    }\r\n\r\n    collideWith(dynamicCollider: Point, solidCollider: Point) {\r\n        \r\n        // let allowCollide = true \r\n        \r\n        // if (!collider2.collider.collidable && collider1.collider.type == \"dynamic\")\r\n        //     allowCollide = false;\r\n\r\n        if (!dynamicCollider.collider.collidable) return;\r\n            // if (collider1.collider.type == \"dynamic\" && collider2.collider.type == \"solid\") {\r\n\r\n                const collide = this.collide(dynamicCollider, solidCollider);\r\n                \r\n                const col1 = dynamicCollider.collider;\r\n                const col2 = solidCollider.collider;\r\n                \r\n                // Right\r\n                if (collide.right && dynamicCollider.velocity.x > 0) {\r\n                    dynamicCollider.position.x = solidCollider.position.x - col2.width / 2 - col1.width / 2 + 1 - col1.offset.x;\r\n                    dynamicCollider.velocity.x = 0;\r\n                }\r\n                // Left\r\n                if (collide.left && dynamicCollider.velocity.x < 0) {\r\n                    dynamicCollider.position.x = solidCollider.position.x + col2.width / 2 + col1.width / 2 - 1 - col1.offset.x;\r\n                    dynamicCollider.velocity.x = 0;\r\n                }\r\n\r\n                // Top\r\n                if (collide.top && dynamicCollider.velocity.y < 0) {\r\n                    dynamicCollider.position.y = solidCollider.position.y + col2.height / 2 + col1.height / 2 - 1;\r\n                    dynamicCollider.velocity.y = 0;\r\n                } \r\n                // Bottom\r\n                if (collide.bottom && dynamicCollider.velocity.y > 0) {\r\n                    dynamicCollider.position.y = solidCollider.position.y - col2.height / 2 - col1.height / 2 + 1;\r\n                    dynamicCollider.velocity.y = 0;\r\n                }\r\n\r\n                // console.log(collider2.id);\r\n                if (collide.any) {\r\n                    // if ((collider1.velocity.x != 0 || collider1.velocity.y != 0))\r\n                        dynamicCollider.collider.collidesWith = {...collide};\r\n                        // collider1.collider.otherColliders = [collider2];\r\n                }\r\n                // else\r\n                //     collider1.collider.collidesWith = null;\r\n                    // collider1.collider.otherColliders = [];\r\n\r\n            // }\r\n    }\r\n}","import { ComponentType } from \"../../types\";\r\nimport { Game } from \"../Game\";\r\nimport { Collider, ColliderType } from \"../Physics\";\r\nimport { Renderer } from \"../Renderer\";\r\nimport { standardName as standardName, Vector2 } from \"../utils/math\";\r\n\r\nlet __id = 0;\r\n\r\nexport type IPointProps = {\r\n    position?: Vector2\r\n    rotation?: number\r\n    scale?: Vector2\r\n    layer?: string\r\n\r\n    colliderType?: ColliderType\r\n\r\n    group?: string | null\r\n}\r\n\r\nexport class Point {\r\n    game!: Game\r\n    id: string\r\n    type: ComponentType\r\n    name: string\r\n    group: string | null\r\n    inited: boolean\r\n    layer: string\r\n    \r\n    velocity: Vector2\r\n    acceleration: Vector2\r\n    position: Vector2\r\n    rotation: number\r\n    scale: Vector2\r\n\r\n    collider: Collider\r\n    \r\n    constructor(name: string, props?: IPointProps) {\r\n        this.id = `${ name }-${ __id ++ }`;\r\n        this.type = \"point\";\r\n        this.name = standardName(name);\r\n        this.group = props?.group ? standardName(props.group) : null;\r\n        this.inited = false;\r\n        this.layer = props?.layer || \"game\";\r\n\r\n        this.position = props?.position || Vector2.zero();\r\n        this.velocity = Vector2.zero();\r\n        this.acceleration = Vector2.all();\r\n        this.rotation = props?.rotation || 0;\r\n        this.scale = props?.scale || Vector2.all();\r\n\r\n        this.collider = new Collider(this);\r\n        this.collider.type = props?.colliderType || \"dynamic\";\r\n    }\r\n    \r\n    init() {\r\n        this.inited = true;\r\n    }\r\n    update() {\r\n        this.velocity.x *= this.acceleration.x;\r\n        this.velocity.y *= this.acceleration.y;\r\n        this.position.x += this.velocity.x;\r\n        this.position.y += this.velocity.y;\r\n    }\r\n    render() {\r\n    }\r\n    destroy() {\r\n    }\r\n}","import { IPointProps, Point } from \"./Point\";\r\nimport { asImage, assetIsValid, Vector2 } from \"../utils/math\";\r\nimport messages from \"../../messages\";\r\nimport { Config } from \"../../config\";\r\n\r\nexport type ISpriteProps = {\r\n    width?: number\r\n    height?: number\r\n\r\n    flip?: { x: boolean, y: boolean }\r\n    repeat?: Vector2\r\n    frame?: Vector2\r\n} & IPointProps;\r\n\r\nexport class Sprite extends Point {\r\n    width: number\r\n    height: number\r\n\r\n    offset: Vector2\r\n    flip: { x: boolean, y: boolean }\r\n    repeat: Vector2\r\n    frame: Vector2\r\n\r\n    assetName: string\r\n    texture: HTMLImageElement | null | undefined;\r\n    visible: boolean\r\n    opacity: number\r\n    \r\n    constructor(name: string, assetName: string, props?: ISpriteProps) {\r\n        super(name, props);\r\n        this.type = \"sprite\";\r\n\r\n        this.width = props?.width || 1;\r\n        this.height = props?.height || 1;\r\n\r\n        this.offset = Vector2.zero();\r\n        this.flip = props?.flip || { x: false, y: false };\r\n        this.repeat = props?.repeat || Vector2.all();\r\n        this.opacity = 1;\r\n        this.frame = props?.frame || Vector2.zero();\r\n\r\n        this.assetName = assetName;\r\n        this.texture = null;\r\n        this.visible = true;\r\n    }\r\n    \r\n    init() {\r\n        super.init();\r\n        \r\n        this.updateAsset();\r\n    }\r\n    \r\n    updateAsset() {\r\n        this.texture = asImage(this.game.getAssetByName(this.assetName));\r\n    }\r\n    update() {\r\n        super.update();\r\n    }\r\n    render() {\r\n        super.render();\r\n\r\n        if (!this.texture || !this.visible) return;\r\n\r\n        this.game.renderer.drawSprite({\r\n            ...this,\r\n            texture: this.texture\r\n        });\r\n    }\r\n\r\n    blink() {\r\n        if (this.game.tick(5))\r\n            this.visible = !this.visible;\r\n    }\r\n\r\n    playAnimation(assetName: string, framesCount: number, speed?: number) {\r\n        this.texture = asImage(this.game.getAssetByName(assetName));\r\n        \r\n        if (framesCount <= 1) {\r\n            this.frame.x = 0;\r\n            return;\r\n        }\r\n\r\n        if (this.game.tick(speed || Config.DEFAULT_ANIMATION_SPEED)) {\r\n            this.frame.x ++;\r\n            if (this.frame.x >= framesCount)\r\n                this.frame.x = 0;\r\n        }\r\n    }\r\n}","import { Sprite, ISpriteProps } from \"./Sprite\";\r\nimport { Game } from \"../Game\";\r\nimport { Point, IPointProps } from \"./Point\";\r\nimport { compareNames } from \"../utils/math\";\r\nimport { Group } from \"./Group\";\r\n\r\nexport class Container {\r\n    children: Point[]\r\n\r\n    constructor() {\r\n        this.children = [];\r\n    }\r\n\r\n    createPoint(name: Point[\"name\"], props?: IPointProps): Point {\r\n        return this.add(new Point(name, props));\r\n    }\r\n    createSprite(name: Sprite[\"name\"], assetName: Sprite[\"assetName\"], props?: ISpriteProps): Sprite {\r\n        return this.add(new Sprite(name, assetName, props)) as Sprite;\r\n    }\r\n\r\n    getChildrenByName<T>(name: Point[\"name\"]): T[] {\r\n        return (this.children.filter(child=> child.name.indexOf(name) >= 0) as any[]) as T[];\r\n    }\r\n    getChildById<T>(id: Point[\"id\"] | null, expandAll?: boolean): T | undefined {\r\n        if (id)\r\n            return this.children.find(child=> child.id.indexOf(id) >= 0) as T | undefined;\r\n    }\r\n    removeChildById(id: Point[\"id\"]) {\r\n        this.children = this.children.filter(child=> {\r\n            if (!compareNames(child.id, id))\r\n                return true;\r\n            else {\r\n                child.destroy();\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n    removeChildrenByGroupName(group: string) {\r\n        this.children.map(child=> {\r\n            if (child.group && compareNames(child.group, group)) {\r\n                this.removeChildById(child.id);\r\n            }\r\n        });\r\n    }\r\n    \r\n    add<T>(child: Point | Group): T {\r\n        this.children.push(child as any);\r\n        return child as any;\r\n    }\r\n\r\n    initChildren(game: Game) {\r\n        this.children.filter(child=> !child.inited).map(child=> {\r\n            child.game = game;\r\n            child.init()\r\n        });\r\n    }\r\n    callChildren(method: string) {\r\n        this.children.map(child=> (child as any)[method]());\r\n    }\r\n}","export class Gamepad {\r\n    eventKeys: {\r\n        [name: string]: string[]\r\n    }\r\n    \r\n    keys: {\r\n        right: boolean\r\n        left: boolean\r\n        up: boolean\r\n        down: boolean\r\n        enter: boolean\r\n    }\r\n\r\n    pressed: boolean\r\n\r\n    onKeyDownListeners: ({ id: string, name: string, callback: ()=> void})[]\r\n    onAnyKeyDownListeners: ({ id: string, callback: (name: string)=> void })[]\r\n    \r\n    constructor() {\r\n        this.eventKeys = {\r\n            \"right\": [\"ArrowRight\", \"KeyD\"],\r\n            \"left\": [\"ArrowLeft\", \"KeyA\"],\r\n            \"up\": [\"ArrowUp\", \"KeyW\"],\r\n            \"down\": [\"ArrowDown\", \"KeyS\"],\r\n            \"enter\": [\"Enter\"],\r\n        };\r\n\r\n        this.keys = {\r\n            right: false,\r\n            left: false,\r\n            up: false,\r\n            down: false,\r\n            enter: false,\r\n        }\r\n\r\n        this.pressed = false;\r\n    \r\n        this.onKeyDownListeners = [];\r\n        this.onAnyKeyDownListeners = [];\r\n        \r\n        window.addEventListener(\"keydown\", e=> {\r\n            this.updateKey(e.code, true)\r\n\r\n            if (this.pressed) return;\r\n            this.onKeyDownListeners.map(listener=> {\r\n                this.eventKeys[listener.name].map(key=> {\r\n                    \r\n                    if (e.code == key) {\r\n                        listener.callback();\r\n                        this.pressed = true;\r\n                    }\r\n                    \r\n                });\r\n            });\r\n            this.onAnyKeyDownListeners.map(listener=> {\r\n                Object.keys(this.eventKeys).map(ekey=> {\r\n                \r\n                    this.eventKeys[ekey].map(key=> {\r\n    \r\n                        if (key == e.code) {\r\n                            listener.callback(ekey);\r\n                            this.pressed = true;\r\n                        }\r\n    \r\n                    })\r\n                    \r\n                });\r\n            });\r\n            \r\n        });\r\n        window.addEventListener(\"keyup\", e=> {\r\n            this.updateKey(e.code, false);\r\n            this.pressed = false;\r\n        });\r\n    }\r\n\r\n    onKeyDown(id: string, name: string, callback: ()=> void) {\r\n\r\n        this.onKeyDownListeners.push({\r\n            id, name, callback\r\n        });\r\n        \r\n    }\r\n    onAnyKeyDown(id: string, callback: (name: string)=> void) {\r\n        \r\n        this.onAnyKeyDownListeners.push({\r\n            id, callback\r\n        });\r\n\r\n    }\r\n\r\n    removeListenerById(id: string) {\r\n        this.onKeyDownListeners = this.onKeyDownListeners.filter(l=> l.id != id);\r\n        this.onAnyKeyDownListeners = this.onAnyKeyDownListeners.filter(l=> l.id != id);\r\n    }\r\n\r\n    updateKey(code: string, enabled: boolean) {\r\n        this.mapKeys((ekey, key)=> {\r\n            if (code == key)\r\n                this.keys[ekey as keyof typeof this.keys] = enabled;\r\n        });\r\n    }\r\n    mapKeys(func: (ekey: string, key: string)=> void) {\r\n        Object.keys(this.eventKeys).map(ekey=> {\r\n            this.eventKeys[ekey].map(key=> func(ekey, key))\r\n        })\r\n    }\r\n}","import { Color, Config, GeneratorConfig } from \"../config\";\r\nimport { Particle } from \"./components/Particles\";\r\nimport { Game } from \"./Game\";\r\nimport { safeValue, Vector2 } from \"./utils/math\";\r\n\r\ntype RendererLayer = {\r\n    canvas: HTMLCanvasElement\r\n    context: CanvasRenderingContext2D\r\n    update: boolean\r\n    cameraFactor: number\r\n}\r\nexport type StrokeSettings = { width: number, color: string }\r\nexport type DrawRectProps = {\r\n    color?: string\r\n    width?: number\r\n    height?: number\r\n    position?: Vector2\r\n    rotation?: number\r\n    opacity?: number\r\n    stroke?: StrokeSettings\r\n    layer?: string\r\n};\r\nexport type DrawLineProps = {\r\n    color?: string\r\n    width: number\r\n    points: [Vector2, Vector2]\r\n    opacity?: number\r\n    layer?: string\r\n};\r\nexport type DrawTextProps = {\r\n    text?: string\r\n    color?: string\r\n    font?: string\r\n    align?: CanvasTextAlign\r\n    position?: Vector2\r\n    rotation?: number\r\n    scale?: Vector2\r\n    opacity?: number\r\n    layer?: string\r\n};\r\n\r\nexport class Renderer {\r\n    game: Game\r\n    particles: Particle[]\r\n    layers:{ [name: string]: RendererLayer }\r\n    \r\n    constructor(game: Game) {\r\n        this.game = game;\r\n\r\n        this.particles = [];\r\n\r\n        this.layers = {\r\n            \"bg\": this.createLayer(\"bg\"),\r\n            \"game\": this.createLayer(\"game\"),\r\n            \"particles\": this.createLayer(\"particles\"),\r\n            \"ui\": this.createLayer(\"ui\", true, 0),\r\n            \"debug\": this.createLayer(\"debug\", false),\r\n        };\r\n        console.log(this.layers);\r\n        \r\n        document.body.style.background = Color.STONE_LAYER_COLOR;\r\n    }\r\n    \r\n    // Create new layer\r\n    createLayer(name: string, update?: boolean, cameraFactor?: number): RendererLayer {\r\n        const canvas = document.createElement(\"canvas\");\r\n\r\n        canvas.setAttribute(\"id\", name);\r\n        canvas.width = window.innerWidth;\r\n        canvas.height = window.innerHeight;\r\n        document.body.appendChild(canvas);\r\n\r\n        const context = canvas.getContext(\"2d\")!;\r\n        context.imageSmoothingEnabled = false;\r\n\r\n        return { canvas, context, update: safeValue(update, true), cameraFactor: safeValue(cameraFactor, 1) };\r\n    }\r\n\r\n    render() {\r\n        // > Clear layers\r\n        Object.keys(this.layers).map(key=> {\r\n            if (this.layers[key].update)\r\n                this.layers[key].context.clearRect(0, 0, window.innerWidth, window.innerHeight)\r\n        });\r\n\r\n        this.changeBGColor();\r\n    }\r\n    // > Change bg color\r\n    changeBGColor() {\r\n        const spriteSize = Config.SPRITE_SIZE;\r\n        const layerBlendHeight = GeneratorConfig.LAYERS_BLEND_HEIGHT;\r\n        \r\n        // Basalt layer color\r\n        if (this.game.camera.position.y > (GeneratorConfig.BASALT_LAYER_HEIGHT - layerBlendHeight) * spriteSize)\r\n            document.body.style.background = Color.BASALT_LAYER_COLOR;\r\n        // Burnt basalt layer color\r\n        if (this.game.camera.position.y > (GeneratorConfig.BURNT_BASALT_LAYER_HEIGHT - layerBlendHeight) * spriteSize)\r\n            document.body.style.background = Color.BURNT_BASALT_LAYER_COLOR;\r\n        // Stone layer color\r\n        else if (this.game.camera.position.y < (GeneratorConfig.BASALT_LAYER_HEIGHT - layerBlendHeight) * spriteSize)\r\n            document.body.style.background = Color.STONE_LAYER_COLOR;\r\n    }\r\n    // > Render particles\r\n    renderParticles() {\r\n        this.particles.map(part=> {\r\n            \r\n            part.update(this.game);\r\n\r\n            part.render(this, part);\r\n        });\r\n        this.particles.map((part, index)=> {\r\n\r\n            if (part.size <= 0 || part.opacity <= 0) \r\n                this.particles.splice(index, 1);\r\n        });\r\n    }\r\n    inCameraViewport(pos: Vector2, width?: number, height?: number): boolean {\r\n        const cam = this.game.camera.position;\r\n        const \r\n            w = innerWidth + 150,\r\n            h = innerHeight + 150;\r\n        width = safeValue(width, Config.SPRITE_SIZE);\r\n        height = safeValue(height, Config.SPRITE_SIZE);\r\n        return (\r\n            pos.x + width / 2 > cam.x - w / 2 &&\r\n            pos.y + height / 2 > cam.y - h / 2 &&\r\n            pos.x - width / 2 < cam.x + w / 2 &&\r\n            pos.y - height / 2 < cam.y + h / 2\r\n        );\r\n    }\r\n    getCameraPosition(layer?: string): Vector2 {\r\n        const factor = this.layers[layer || \"game\"];\r\n        \r\n        return this.game.camera.position.add(this.game.camera.offset).mul(factor.cameraFactor);\r\n    }\r\n\r\n    // Get layer context\r\n    getContext(layer?: string): Renderer[\"layers\"][0][\"context\"] {\r\n        return this.layers[layer || \"game\"].context;\r\n    }\r\n    startTransform(layer?: string, pos?: Vector2, rotation?: number, scale?: Vector2, opacity?: number) {\r\n        const l = this.layers[layer || \"game\"];\r\n\r\n        const p = pos || Vector2.zero();\r\n        \r\n        l.context.save();\r\n\r\n        l.context.translate(innerWidth / 2 * l.cameraFactor, innerHeight / 2 * l.cameraFactor)\r\n        l.context.rotate(this.game.camera.rotation * l.cameraFactor);\r\n\r\n        l.context.transform(\r\n            scale?.x || 1, 0, 0, scale?.y || 1,\r\n            p.x - this.getCameraPosition(layer).x,\r\n            p.y - this.getCameraPosition(layer).y\r\n        );\r\n        l.context.rotate(rotation || 0);\r\n\r\n        const op = safeValue(opacity, 1);\r\n        l.context.globalAlpha = op > 0 ? op : 0;\r\n    }\r\n    endTransform(layer?: string) {\r\n        this.layers[layer || \"game\"].context.restore();\r\n    }\r\n    \r\n    // Draw primitives\r\n    drawRect(props: DrawRectProps) {\r\n        const w = Math.floor(safeValue(props.width, 1) * Config.SPRITE_SIZE);\r\n        const h = Math.floor(safeValue(props.height, 1) * Config.SPRITE_SIZE);\r\n\r\n        if (!this.inCameraViewport(safeValue(props.position, Vector2.zero()), w, h) && this.layers[props.layer || \"game\"].cameraFactor == 1) return;\r\n\r\n        this.startTransform(props.layer, props.position, props.rotation, Vector2.all(), props.opacity);\r\n\r\n        const context = this.getContext(props.layer);\r\n\r\n        context.fillStyle = props.color || \"#fff\";\r\n        context.fillRect(-w / 2, -h / 2, w, h);\r\n        if (props.stroke) {\r\n            context.lineWidth = props.stroke.width;\r\n            context.strokeStyle = props.stroke.color;\r\n            context.strokeRect(-w / 2, -h / 2, w, h);\r\n        }\r\n\r\n        this.endTransform(props.layer);\r\n    }\r\n    drawLine(props: DrawLineProps) { \r\n        const context = this.getContext(props.layer);\r\n        context.save();\r\n\r\n        context.globalAlpha = safeValue(props.opacity, 1);\r\n        \r\n        context.lineWidth = props.width;\r\n        context.strokeStyle = props.color || \"#fff\";\r\n\r\n        const w = window.innerWidth / 2;\r\n        const h = window.innerHeight / 2;\r\n        \r\n        context.moveTo(props.points[0].x - this.getCameraPosition(props.layer).x + w, props.points[0].y - this.getCameraPosition(props.layer).y + h);\r\n        context.lineTo(props.points[1].x - this.getCameraPosition(props.layer).x + w, props.points[1].y - this.getCameraPosition(props.layer).y + h);\r\n        \r\n        context.stroke();\r\n        context.beginPath();\r\n        context.restore();\r\n    }\r\n    drawText(props: DrawTextProps) { \r\n        const context = this.getContext(props.layer);\r\n        \r\n        this.startTransform(props.layer, props.position, props.rotation, props.scale, props.opacity);\r\n\r\n        function renderText(text: string, pos: Vector2) {\r\n            context.strokeText(text, pos.x, pos.y);\r\n            context.fillText(text, pos.x, pos.y);\r\n        }\r\n        \r\n        context.strokeStyle = Color.STONE_LAYER_COLOR;\r\n        context.lineWidth = 8;\r\n        context.miterLimit = 8;\r\n        context.lineJoin = \"round\";\r\n        \r\n        context.fillStyle = props.color || \"#fff\";\r\n        context.font = props.font || \"18px Pixel\";\r\n        context.textAlign = props.align || \"center\";\r\n        context.textBaseline = \"middle\"\r\n\r\n        if ((props as any).centered != undefined) {\r\n            console.warn(\"Text centered!\");\r\n        }\r\n\r\n        const text = props.text || \"\";\r\n        if (text.indexOf(\"\\n\") >= 0) {\r\n            for (let i = 0; i < text.split(\"\\n\").length; i ++)\r\n                renderText(text.split(\"\\n\")[i], new Vector2(0, i * (parseInt(context.font.split(\" \")[0]))));\r\n        } else\r\n            renderText(text, Vector2.zero());\r\n\r\n        // context.s();\r\n        \r\n        this.endTransform(props.layer);\r\n    }\r\n    \r\n    drawSprite(props: {\r\n        texture: HTMLImageElement | undefined,\r\n        width?: number, height?: number,\r\n        position?: Vector2, rotation?: number, offset?: Vector2,\r\n        layer?: string,\r\n        scale?: Vector2, flip?: { x: boolean, y: boolean },\r\n        opacity?: number, repeat?: Vector2, frame?: Vector2, framed?: boolean\r\n    }) {\r\n        try {\r\n            if (!props.texture) return;\r\n\r\n            const size = Config.SPRITE_SIZE;\r\n\r\n            const w = safeValue(props.width, 1) * size;\r\n            const h = safeValue(props.height, 1) * size;\r\n            const frameW = safeValue(props.width, 1) * Config.SPRITE_PIXEL_SIZE;\r\n            const frameH = safeValue(props.height, 1) * Config.SPRITE_PIXEL_SIZE;\r\n            const framePos = safeValue(props.frame, Vector2.zero());\r\n            \r\n            const p = safeValue(props.position, Vector2.zero());\r\n            const o = safeValue(props.offset, Vector2.zero());\r\n            \r\n            if ((!this.inCameraViewport(p, w*safeValue(props.repeat?.x, 1), h*safeValue(props.repeat?.y, 1))) && this.layers[props.layer || \"game\"].cameraFactor == 1) return;\r\n            \r\n            const f = safeValue(props.flip, { x: false, y: false });\r\n            const s = safeValue(props.scale, Vector2.all());\r\n            const context = this.getContext(props.layer);\r\n            \r\n            this.startTransform(\r\n                props.layer,\r\n                p.add(o),\r\n                props.rotation,\r\n                new Vector2(s.x * (f.x ? -1 : 1), s.y * (f.y ? -1 : 1)),\r\n                props.opacity\r\n            );\r\n            \r\n            // Draw sprite without repeat\r\n            if (!props.repeat || Vector2.compare(props.repeat || Vector2.all(), Vector2.all())) {\r\n\r\n                if (safeValue(props.framed, true))\r\n                    context.drawImage(\r\n                        props.texture,\r\n                        // Clip rect\r\n                        framePos.x * frameW, framePos.y * frameH,\r\n                        frameW, frameH,\r\n                        \r\n                        // Transform\r\n                        -w / 2, -h / 2,\r\n                        w, h\r\n                    );\r\n                else\r\n                    context.drawImage(\r\n                        props.texture,\r\n                        // Transform\r\n                        -w / 2, -h / 2,\r\n                        w, h\r\n                    );\r\n                \r\n            }\r\n            else if (props.repeat)\r\n                // And... With repeat?\r\n                for (let repeatY = 0; repeatY < props.repeat.y; repeatY ++)\r\n                    for (let repeatX = 0; repeatX < props.repeat.x; repeatX ++)\r\n                        context.drawImage(\r\n                            props.texture,\r\n                            -w / 2 + repeatX * w,\r\n                            -h / 2 + repeatY * h,\r\n                            w, h\r\n                        );\r\n\r\n            this.endTransform(props.layer);\r\n        } catch(err) {}\r\n    }\r\n\r\n    updateAspect() {\r\n        Object.keys(this.layers).map(key=> {\r\n\r\n            this.layers[key].canvas.width = window.innerWidth;\r\n            this.layers[key].canvas.height = window.innerHeight;\r\n            this.layers[key].context.imageSmoothingEnabled = false;\r\n\r\n        })\r\n    }\r\n}","import { Game } from \"./Game\"\r\nimport { Ore } from \"../objects/ores/Ore\"\r\nimport { clamp, inChunkIdToPosition, inRange, Vector2 } from \"./utils/math\"\r\nimport { Point } from \"./components/Point\";\r\nimport { Config } from \"../config\";\r\nimport { perlin2, seed } from \"./utils/noise\";\r\nimport { Block } from \"../objects/Block\";\r\nimport messages from \"../messages\";\r\n\r\nlet __chunkId = 0;\r\n\r\nexport type Chunk = {\r\n    group: string\r\n    pos: Vector2\r\n}\r\ntype GeneratorSettings = {\r\n    value: [number, number]\r\n    height: [number, number]\r\n    block: typeof Block | any | null\r\n    divider?: number\r\n    rules?: (noiseX: number, noiseY: number, getValue: (x: number, y: number, div?: number)=> number)=> boolean\r\n}\r\n\r\nexport class Generator {\r\n    game: Game\r\n\r\n    seed: number\r\n    \r\n    chunks: Chunk[]\r\n    destroyedOres: string[]\r\n    modifiedOres: {\r\n        [inChunkId: string]: { [dataKey: string]: any }\r\n    }\r\n    settings: GeneratorSettings[]\r\n    range: Vector2[]\r\n\r\n    onWorldChangeListeners: { id: string, pos: Vector2 | null, callback: ()=> void, listenChunks?: boolean }[]\r\n    \r\n    constructor(game: Game) {\r\n        this.game = game;\r\n\r\n        // this.seed = Date.now();\r\n        this.seed = 1636721068016;\r\n        console.log(this.seed);\r\n        seed(this.seed);\r\n\r\n        this.onWorldChangeListeners = [];\r\n\r\n        this.chunks = [];\r\n        this.destroyedOres = [];\r\n        this.modifiedOres = {};\r\n        this.settings = [];\r\n        this.range = [\r\n            new Vector2(1, 0), new Vector2(-1, 0),\r\n            new Vector2(0, 1), new Vector2(0, -1),\r\n            new Vector2(1, 1), new Vector2(-1, -1),\r\n            new Vector2(-1, 1), new Vector2(1, -1),\r\n            new Vector2(1, -1), new Vector2(-1, 1),\r\n            new Vector2(0, 0)\r\n        ];\r\n        \r\n    }\r\n\r\n    generateChunksAt(position: Vector2) {\r\n        const mul = 1;\r\n        const pos = this.game.camera.position.div(Config.SPRITE_SIZE * (Config.CHUNK_SIZE * mul)).apply(Math.floor);\r\n        const checkPos = pos.add(new Vector2(.5, .5)).mul(Config.SPRITE_SIZE * Config.CHUNK_SIZE * mul);\r\n        \r\n        // Create chunks\r\n        if (checkPos.distance(this.game.camera.position) > 100) {\r\n\r\n            this.range.map(p=> {\r\n\r\n                if (!this.chunks.find(c=> Vector2.compare(c.pos, pos.mul(mul).add(p)))) {\r\n                    const chunk = this.createChunk(pos.mul(mul).add(p));\r\n                    if (chunk)\r\n                        this.chunks.push(chunk);\r\n                }\r\n                \r\n            });\r\n\r\n            this.onWorldChangeListeners.filter(listener=> listener.listenChunks).map(listener=> {\r\n                listener.callback();\r\n            });\r\n            \r\n        }\r\n\r\n        // Remove chunks\r\n        this.chunks.map((chunk, index)=> {\r\n\r\n            if (this.game.camera.position.distance(chunk.pos.mul(Config.SPRITE_SIZE * Config.CHUNK_SIZE)) > 800) {\r\n                this.game.removeChildrenByGroupName(chunk.group);\r\n                this.chunks.splice(index, 1);\r\n            }\r\n        \r\n        });\r\n        \r\n    }\r\n    \r\n    createChunk(pos: Vector2): Chunk | undefined {\r\n\r\n        // if (pos.x < 0 || pos.x > Config.WORLD_WIDTH / Config.CHUNK_SIZE || pos.y < 0 || pos.y > Config.WORLD_HEIGHT / Config.CHUNK_SIZE)\r\n        if (pos.y < 0 || pos.y > Config.WORLD_HEIGHT / Config.CHUNK_SIZE)\r\n            return;\r\n        \r\n        const ores: (typeof Ore | null)[][] = [[null]];\r\n        __chunkId ++;\r\n    \r\n        for (let y = 0; y < Config.CHUNK_SIZE; y ++) {\r\n            ores.push([]);\r\n            for (let x = 0; x < Config.CHUNK_SIZE; x ++) {\r\n                ores[y].push(null);\r\n                const _y = y + pos.y * Config.CHUNK_SIZE;\r\n                const _x = x + pos.x * Config.CHUNK_SIZE;\r\n                \r\n                for (let i = 0; i < this.settings.length; i ++) {\r\n                    const gen = this.settings[i];\r\n    \r\n                    const noiseX = (x + pos.x * Config.CHUNK_SIZE)\r\n                    const noiseY = (y + pos.y * Config.CHUNK_SIZE)\r\n                    const getValue = (x: number, y: number, div?: number)=> (+perlin2(x / (div || 10), y / (div || 10)) + 1) / 1.5;\r\n                    const value = getValue(noiseX, noiseY, gen.divider);\r\n    \r\n                    const rules = gen.rules ? gen.rules(noiseX, noiseY, getValue) : true;\r\n                    \r\n                    if (inRange(value, gen.value[0], gen.value[1]) && inRange(_y, gen.height[0], gen.height[1]) && rules)\r\n                        ores[y][x] = gen.block;\r\n                }\r\n                \r\n                const inChunkId = [x, y, pos.x, pos.y].join(\"-\");\r\n                if (ores[y][x] && this.destroyedOres.indexOf(inChunkId) < 0) {\r\n\r\n                    const ore = new (ores[y][x] as any)(new Vector2(_x, _y), this.modifiedOres[inChunkId]);\r\n                    ore.inChunkId = inChunkId;\r\n                    ore.group = `${ __chunkId }`;\r\n\r\n                    this.game.add(ore);\r\n\r\n                }\r\n    \r\n                \r\n            }\r\n        }\r\n    \r\n        this.game.initChildren();\r\n    \r\n        return { group: `${ __chunkId }`, pos };\r\n\r\n    }\r\n\r\n    checkIsInLoadedChunk(checkPosition: Vector2): boolean {\r\n        return this.chunks.findIndex(chunk=> Vector2.compare(chunk.pos, checkPosition.add(Vector2.all(Config.SPRITE_SIZE / 2)).div(Config.SPRITE_SIZE * Config.CHUNK_SIZE).apply(Math.floor))) >= 0;\r\n    }\r\n    destroyOre(inChunkId: Point[\"id\"]) {\r\n\r\n        delete this.modifiedOres[inChunkId];\r\n        this.destroyedOres.push(inChunkId);\r\n\r\n        this.onWorldChangeListeners.map(listener=> {\r\n            if ((listener.pos != null && listener.pos.distance(inChunkIdToPosition(inChunkId)) < 200) || !listener.pos)\r\n                listener.callback()\r\n        });\r\n        \r\n    }\r\n    modifyOre(inChunkId: Point[\"id\"], data: Generator[\"modifiedOres\"][0][\"data\"]) {\r\n        this.modifiedOres[inChunkId] = data;\r\n    }\r\n    onWorldChange(id: string, pos: Vector2 | null, callback: Generator[\"onWorldChangeListeners\"][0][\"callback\"], listenChunks?: boolean) {\r\n        this.onWorldChangeListeners.push({ id, pos, callback, listenChunks });\r\n    }\r\n    removeListenerById(id: string) {\r\n        this.onWorldChangeListeners = this.onWorldChangeListeners.filter(listener=> listener.id != id);\r\n    }\r\n}","export default {\r\n    err: {\r\n        assetLoadError: (name: string)=> `Failed to load asset with name \"${ name }\"`,\r\n        audioPlayError: (name: string)=> `Failed to play audio asset \"${ name }\"`,\r\n        cantFindBlockByInChunkId: (id: string)=> `Can't find block by inChunkId \"${ id }\"`,\r\n    }\r\n}","import { Game } from \"..\";\r\nimport messages from \"../../messages\";\r\nimport { Asset } from \"../Asset\"\r\nimport { asAudio, clamp, safeValue, Vector2 } from \"../utils/math\";\r\n\r\nexport class Sound {\r\n    assetName: string | null\r\n    audio: HTMLAudioElement | null | undefined\r\n    volume: number\r\n    \r\n    constructor() {\r\n        this.assetName = null;\r\n        this.audio = null;\r\n        this.volume = 1;\r\n    }\r\n\r\n    play(game: Game, assetName: string, volume?: number, loop?: boolean, toStart?: boolean) {\r\n        this.assetName = assetName;\r\n\r\n        this.audio = asAudio(game.getAssetByName(assetName));\r\n\r\n        if (!this.audio) {\r\n            console.error(messages.err.audioPlayError(assetName));\r\n            return;\r\n        }\r\n        \r\n        if (safeValue(toStart, true))\r\n            this.audio.currentTime = 0;\r\n            this.volume = safeValue(volume, 1)\r\n        this.audio.volume = this.volume;\r\n        this.audio.play();\r\n\r\n        if (loop)\r\n            this.audio.ontimeupdate = ()=> {\r\n                if (!this.audio) return;\r\n\r\n                if (this.audio.currentTime >= this.audio.duration-.3) {\r\n                    this.audio.currentTime = 0;\r\n                    this.audio.play();\r\n                }\r\n            }\r\n    }\r\n    stop() {\r\n        if (!this.audio) return;\r\n        if (this.audio.paused) return;\r\n        \r\n        this.audio.pause();\r\n        this.audio.currentTime = 0;\r\n    }\r\n\r\n    update3D(game: Game, emitterPosition: Vector2, maxDistance?: number) {\r\n        if (!this.audio) return;\r\n\r\n        const distance = safeValue(maxDistance, innerHeight / 2 + 300);\r\n        this.audio.volume = clamp(this.volume * clamp((1 - (game.camera.position.distance(emitterPosition) / distance)) * 1.8, 0, 1), 0, 1);\r\n        \r\n    }\r\n}","import { Point } from \"./components/Point\";\r\nimport { Asset, AssetType } from \"./Asset\";\r\nimport { Container } from \"./components/Container\";\r\nimport { Gamepad } from \"./events/Gamepad\";\r\nimport { Physics } from \"./Physics\";\r\nimport { Renderer } from \"./Renderer\";\r\nimport { random, Vector2 } from \"./utils/math\";\r\nimport { Generator } from \"./Generator\";\r\nimport { Sound } from \"./components/Sound\";\r\nimport messages from \"../messages\";\r\n\r\nexport type Clock = {\r\n    elapsed: number\r\n};\r\ntype Camera = {\r\n    position: Vector2\r\n    rotation: number\r\n    offset: Vector2\r\n    startShakeElapsed: number\r\n    shaking: boolean\r\n    shakeAmplitude: number\r\n    follow: (pos: Vector2, lerp?: number)=> void\r\n    shake: (amplitude?: number)=> void\r\n}\r\n\r\nexport class Game extends Container {\r\n    gamepad: Gamepad\r\n    camera: Camera\r\n    \r\n    assets: Asset[]\r\n    sounds: Sound[]\r\n\r\n    clock: Clock\r\n    initListeners: (()=> void)[]\r\n    updateListeners: ((clock: Clock)=> void)[]\r\n    renderListeners: ((renderer: Renderer)=> void)[]\r\n    \r\n    renderer: Renderer\r\n    physics: Physics\r\n    generator: Generator\r\n    \r\n    constructor() {\r\n        super();\r\n\r\n        this.gamepad = new Gamepad();\r\n        this.camera = {\r\n            position: Vector2.zero(),\r\n            rotation: 0,\r\n            offset: Vector2.zero(),\r\n            startShakeElapsed: 0,\r\n            shaking: false,\r\n            shakeAmplitude: 2,\r\n            follow(pos: Vector2, lerp?: number) {\r\n                if (lerp)\r\n                    this.position.lerp(pos, lerp);\r\n                else\r\n                    this.position.copy(pos);\r\n            },\r\n            shake(amplitude?: number) {\r\n                this.shakeAmplitude = amplitude || 2;\r\n                if (!this.shaking) {\r\n                    this.shaking = true;\r\n                }\r\n            }\r\n        };\r\n        \r\n        this.assets = [];\r\n        this.sounds = [];\r\n        \r\n        this.clock = {\r\n            elapsed: 0\r\n        };\r\n        this.initListeners = [];\r\n        this.updateListeners = [];\r\n        this.renderListeners = [];\r\n        \r\n        this.renderer = new Renderer(this);\r\n        this.physics = new Physics(this);\r\n        this.generator = new Generator(this);\r\n\r\n    }\r\n\r\n    loadAsset(name: string, src: Asset[\"src\"], type?: AssetType) {\r\n        this.assets.push(new Asset(name, src, type));\r\n    }\r\n    getAssetByName(name: string): Asset | null | undefined {\r\n        const asset = this.assets.find(asset=> asset.name == name);\r\n        \r\n        if (asset)\r\n            return asset;\r\n        else\r\n            console.error(messages.err.assetLoadError(name));\r\n    }\r\n    \r\n    removeChildById(id: Point[\"id\"], listenerId?: string) {\r\n        this.gamepad.removeListenerById(listenerId || id);\r\n        this.generator.removeListenerById(listenerId || id);\r\n        super.removeChildById(id);\r\n    }\r\n\r\n    initChildren() {\r\n        super.initChildren(this);\r\n    }\r\n    \r\n    addInit(listener: Game[\"initListeners\"][0]) {\r\n        this.initListeners.push(listener);\r\n    }\r\n    addUpdate(listener: Game[\"updateListeners\"][0]) {\r\n        this.updateListeners.push(listener);\r\n    }\r\n    addRender(listener: Game[\"renderListeners\"][0]) {\r\n        this.renderListeners.push(listener);\r\n    }\r\n\r\n    tick(tick: number): boolean {\r\n        return this.clock.elapsed % tick == 0;\r\n    }\r\n    playSoundAt(position: Vector2, assetName: string, volume?: number) {\r\n        const sound = new Sound();\r\n\r\n        sound.play(this, assetName, volume);\r\n        \r\n        this.sounds.push(sound);\r\n    }\r\n\r\n    init() {\r\n\r\n        // Init\r\n        this.initListeners.map(listener=> listener());\r\n        this.initChildren();\r\n        \r\n        const loop = ()=> {\r\n            requestAnimationFrame(loop);\r\n            this.renderer.render();\r\n            this.clock.elapsed ++;\r\n\r\n            // Camera shake\r\n            if (!this.camera.shaking) {\r\n                this.camera.startShakeElapsed = this.clock.elapsed;\r\n                this.camera.offset.lerp(Vector2.zero(), .2);\r\n            } else {\r\n                if ((this.clock.elapsed - this.camera.startShakeElapsed) % 10 == 0)\r\n                    this.camera.shaking = false;\r\n                this.camera.offset.copy(this.camera.offset.add(new Vector2(random(-this.camera.shakeAmplitude, this.camera.shakeAmplitude), random(-this.camera.shakeAmplitude, this.camera.shakeAmplitude))));\r\n            }\r\n            \r\n            // Update\r\n            this.physics.update();\r\n            this.callChildren(\"update\");\r\n            this.updateListeners.map(listener=> listener(this.clock));\r\n            \r\n            this.callChildren(\"render\");\r\n            this.renderListeners.map(listener=> listener(this.renderer));\r\n\r\n            this.renderer.renderParticles();\r\n            \r\n        }\r\n        loop();\r\n\r\n        // Canvas update\r\n        window.addEventListener(\"resize\", ()=> {\r\n            this.renderer.updateAspect();\r\n        });\r\n        \r\n    }\r\n}","import { Game } from \"../Game\";\r\nimport { Renderer } from \"../Renderer\";\r\nimport { Point, IPointProps } from \"./Point\";\r\n\r\nexport type ITextProps = {\r\n    font?: string\r\n    color?: string\r\n} & IPointProps;\r\n\r\nexport class Text extends Point {\r\n    font: string\r\n    color: string\r\n    text: string\r\n    \r\n    constructor(name: string, text: string, props?: ITextProps) {\r\n        super(name, props);\r\n\r\n        this.text = text;\r\n        this.font = props?.font || \"18px Pixel\";\r\n        this.color = props?.color || \"#fff\";\r\n    }\r\n\r\n    render() {\r\n        super.render();\r\n\r\n        this.game.renderer.drawText({ ...this });\r\n    }\r\n}","import { Game } from \"..\";\r\nimport { ComponentType } from \"../../types\";\r\nimport { standardName, Vector2 } from \"../utils/math\";\r\nimport { Container } from \"./Container\";\r\n\r\nlet __id = 0;\r\n\r\nexport class Group extends Container {\r\n    game!: Game\r\n    id: string\r\n    type: ComponentType\r\n    name: string\r\n    \r\n    position: Vector2\r\n    visible: boolean\r\n    allowUpdateChildren: boolean\r\n    \r\n    constructor(name: string, position?: Vector2) {\r\n        super();\r\n        this.id = `${ name }-${ __id ++ }`;\r\n        this.type = \"group\";\r\n        this.name = standardName(name);\r\n\r\n        this.position = position || Vector2.zero();\r\n        this.visible = true;\r\n        this.allowUpdateChildren = true;\r\n    }\r\n\r\n    init() {\r\n        this.initChildren(this.game);\r\n    }\r\n    update() {\r\n        if (this.allowUpdateChildren)\r\n            this.callChildren(\"update\");\r\n    }\r\n    render() {\r\n        if (this.visible)\r\n            this.callChildren(\"render\");\r\n    }\r\n}","export * from \"./Game\";\r\n\r\nexport * from \"./components/Point\";\r\nexport * from \"./components/Sprite\";\r\nexport * from \"./components/Text\";\r\nexport * from \"./components/Group\";","import { Game } from \"../Game\";\r\nimport { asImage, random, safeValue, Vector2 } from \"../utils/math\";\r\nimport { Color, Config } from \"../../config\";\r\nimport { Point } from \"./Point\";\r\nimport { Renderer } from \"../Renderer\";\r\n\r\ntype ParticlesSettings = {\r\n    colors?: any[]\r\n    downSize?: number\r\n    downOpacity?: number\r\n    size?: [number, number]\r\n    opacity?: number\r\n\r\n    gravity?: number\r\n    box?: ()=> Vector2\r\n\r\n    velocity?: ()=> Vector2\r\n    rotationVelocity?: ()=> number\r\n\r\n    render?: (renderer: Renderer, part: Particle)=> void\r\n}\r\n\r\nexport class Particle {\r\n    position: Vector2\r\n    rotation: number\r\n\r\n    velocity: Vector2\r\n    rotationVelocity: number\r\n\r\n    color: string\r\n    opacity: number\r\n    gravity: number\r\n    size: number\r\n    downSize: number\r\n    downOpacity: number\r\n    \r\n    render: (renderer: Renderer, part: Particle)=> void\r\n    \r\n    constructor(position: Vector2, settings?: ParticlesSettings) {\r\n        const c = settings?.colors;\r\n        this.color = c ? c[Math.floor(random(0, c.length))] : Color.BLACK;\r\n        this.opacity = safeValue(settings?.opacity, 1);\r\n        this.downOpacity = safeValue(settings?.downOpacity, 0);\r\n        \r\n        this.position = new Vector2(position.x, position.y);\r\n        this.rotation = random(0, Math.PI * 4);\r\n\r\n        const v = settings?.velocity;\r\n        const rv = settings?.rotationVelocity;\r\n        this.velocity = v ? v() : new Vector2(random(-5, 5), random(-10, 5));\r\n        this.rotationVelocity = rv ? rv() : random(-.1, .1)\r\n\r\n        const s = settings?.size;\r\n        this.size = (s ? s : [.5, 1.2])[Math.floor(random(0, 2))];\r\n        this.gravity = safeValue(settings?.gravity, Config.PARTICLES_GRAVITY);\r\n        this.downSize = safeValue(settings?.downSize, .01);\r\n\r\n        this.render = settings?.render ? settings?.render : (renderer, part)=> {\r\n            renderer.drawRect({\r\n                color: this.color,\r\n                width: this.size * .2,\r\n                height: this.size * .2,\r\n                position: this.position, rotation: this.rotation,\r\n                layer: \"particles\",\r\n                opacity: this.opacity\r\n            });\r\n        }\r\n    }\r\n\r\n    update(game: Game) {\r\n        this.velocity.y += this.gravity;\r\n\r\n        this.rotation += this.rotationVelocity;\r\n        this.size -= this.downSize;\r\n        this.opacity -= this.downOpacity;\r\n        \r\n        this.velocity.x *= .99;\r\n        this.velocity.y *= .99;\r\n        this.position.x += this.velocity.x;\r\n        this.position.y += this.velocity.y;\r\n    }\r\n}\r\n\r\nexport function SpawnParticles(game: Game, position: Vector2, settings?: ParticlesSettings & { count?: number }) {\r\n\r\n    const box = settings?.box;\r\n    \r\n    for (let i = settings?.count || 10; i --;)\r\n        game.renderer.particles.push(new Particle(position.expand().add(box ? box() : Vector2.zero()), settings));\r\n\r\n}\r\n\r\nexport function SpawnDisputesParticles(game: Game, position: Vector2, intensity?: number) {\r\n    SpawnParticles(game, position, {\r\n        render: (renderer, part)=> {\r\n            renderer.drawSprite({\r\n                texture: asImage(game.getAssetByName(\"disputes\")),\r\n                position: part.position,\r\n                rotation: part.rotation,\r\n                opacity: part.opacity,\r\n                scale: Vector2.all(part.size)\r\n            })  \r\n        },\r\n        count: 6,\r\n        gravity: -.01,\r\n        size: [1.4 * safeValue(intensity, 1), 1.4 * safeValue(intensity, 1)],\r\n        rotationVelocity: ()=> random(-.01, -.01),\r\n        velocity: ()=> new Vector2(random(-1, 1), random(-1, 1)).mul(2 * safeValue(intensity, 1)),\r\n        opacity: 3 * safeValue(intensity, 1),\r\n        downSize: .002,\r\n        downOpacity: .01\r\n    });\r\n}","import { Color, Config } from \"../../config\";\r\nimport { Game, ISpriteProps, Sprite } from \"../../engine\"\r\nimport { Sound } from \"../../engine/components/Sound\";\r\nimport { SpawnParticles } from \"../../engine/components/Particles\";\r\nimport { random, safeValue, Vector2 } from \"../../engine/utils/math\"\r\nimport { Direction } from \"../../types\";\r\nimport { Ore } from \"../ores/Ore\";\r\nimport { ToolLevel } from \"./Player\";\r\n\r\nexport type IEntityProps = {\r\n    hp?: number\r\n    moveSpeed?: number\r\n} & ISpriteProps;\r\n\r\nexport class Entity extends Sprite {\r\n    sound: Sound\r\n    hp: number\r\n    initialMoveSpeed: number\r\n    moveSpeed: number\r\n    damaged: boolean\r\n    damagedElapsed: number\r\n    stayAnimation: string\r\n    walkAnimation: string\r\n    moveSpeedDown: number\r\n\r\n    movement: Vector2\r\n    allowMove: boolean\r\n    allowAnimate: boolean\r\n\r\n    digOffsetFactor: number\r\n    \r\n    constructor(name: string, assetName: string, props?: IEntityProps) {\r\n        super(name, assetName, props);\r\n        \r\n        this.sound = new Sound();\r\n        this.hp = props?.hp || 10;\r\n        this.initialMoveSpeed = props?.moveSpeed || 5;\r\n        this.moveSpeed = props?.moveSpeed || 5;\r\n        this.damaged = false;\r\n        this.damagedElapsed = 0;\r\n        this.stayAnimation = `${ name }-stay`;\r\n        this.walkAnimation = `${ name }-walk`;\r\n        this.moveSpeedDown = 0;\r\n        \r\n        this.movement = new Vector2();\r\n        this.allowMove = true;\r\n        this.allowAnimate = true;\r\n\r\n        this.digOffsetFactor = .2;\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n\r\n        this.collider.type = \"dynamic\";\r\n    }\r\n\r\n    update() {\r\n        super.update();\r\n        if (!this.allowMove) {\r\n            this.movement.set();\r\n            this.velocity.set();\r\n        }\r\n\r\n        if (!this.damaged) {\r\n            this.damagedElapsed = this.game.clock.elapsed;\r\n            this.visible = true;\r\n        } else {\r\n            if ((this.game.clock.elapsed - this.damagedElapsed) % 50 == 0)\r\n                this.damaged = false;\r\n\r\n            this.blink();\r\n        }\r\n\r\n        this.offset.lerp(Vector2.zero(), this.digOffsetFactor);\r\n        this.animate();\r\n    }\r\n    dig(damage: number, speed: number, level: ToolLevel, direction: Direction): boolean {\r\n\r\n        let successOreHit = false;\r\n        \r\n        if (this.collider.collidesWith != null && this.collider.collidesWith.any) {\r\n            const ore = this.game.getChildById<Ore>(this.collider.collidesWith.id, true);\r\n            // const tool = tools[this.toolLevel.toString()];\r\n\r\n            if (ore == undefined) return false;\r\n\r\n            if (this.collider.collidesWith[direction] && this.position.distance(ore.position) < Config.SPRITE_SIZE * 2 && this.game.clock.elapsed % speed == 0) {\r\n                ore.hit(damage, level);\r\n\r\n                successOreHit = level >= ore.needToolLevel;\r\n\r\n                if (direction == \"right\")\r\n                    this.offset = new Vector2(10, 0);\r\n                else if (direction == \"left\")\r\n                    this.offset = new Vector2(-10, 0);\r\n                else if (direction == \"top\")\r\n                    this.offset = new Vector2(0, -10);\r\n                else if (direction == \"bottom\")\r\n                    this.offset = new Vector2(0, 10);\r\n            }\r\n\r\n        }\r\n        this.collider.collidesWith = null;\r\n\r\n        return successOreHit;\r\n\r\n    }\r\n\r\n    move() {\r\n        if (this.movement.x != 0)\r\n            this.flip.x = this.movement.x < 0;\r\n        \r\n        this.velocity.x = this.movement.normalize().x * (this.moveSpeed - this.moveSpeedDown);\r\n        this.velocity.y = this.movement.normalize().y * (this.moveSpeed - this.moveSpeedDown);\r\n    }\r\n    animate() {\r\n        if (!this.allowAnimate) return;\r\n        \r\n        if (this.velocity.x != 0 || this.velocity.y != 0)\r\n            this.playAnimation(this.walkAnimation, 4);\r\n        else\r\n            this.playAnimation(this.stayAnimation, 1);\r\n    }\r\n\r\n    hit(damage: number) {\r\n        if (this.damaged) return;\r\n\r\n        this.hp -= damage;\r\n        this.damaged = true;\r\n\r\n        this.spawnText(`-${ damage }`, undefined, Color.RED);\r\n    }\r\n\r\n    spawnText(text: string, offset?: Vector2, color?: string) {\r\n        SpawnParticles(this.game, this.position.add(safeValue(offset, new Vector2(0, -30))), {\r\n            render(renderer, part) {\r\n                renderer.drawText({\r\n                    text,\r\n                    font: \"22px Pixel\",\r\n                    color: color,\r\n                    position: part.position,\r\n                    opacity: part.opacity, \r\n                    rotation: part.velocity.y / 20,\r\n                    layer: \"particles\"\r\n                });\r\n            },\r\n            opacity: 5,\r\n            count: 1,\r\n            gravity: .04,\r\n            velocity: ()=> new Vector2(0, -2),\r\n            downOpacity: .08,\r\n            downSize: 0,\r\n            box: ()=> new Vector2(random(-10, 10), random(-10, 10))\r\n        });\r\n    }\r\n}","import { Color, Config } from \"../../config\";\r\nimport { Game } from \"../Game\";\r\nimport { Renderer, StrokeSettings } from \"../Renderer\";\r\nimport { asImage, assetIsValid, clamp, lerp, random, safeValue, Vector2, wrapText } from \"../utils/math\";\r\nimport { SpawnParticles } from \"./Particles\";\r\n\r\ntype IProgressBarProps = {\r\n    progress: number\r\n    color?: string\r\n    strokeColor?: string\r\n    width: number\r\n    height: number\r\n    position: Vector2\r\n    layer?: string\r\n}\r\n\r\nexport class Button {\r\n    width: number\r\n    height: number\r\n    \r\n    position: Vector2\r\n    assetName: string\r\n    layer: string\r\n\r\n    animatedPosY: number\r\n    allowScale: boolean\r\n    \r\n    constructor(width?: number, height?: number, layer?: string, assetName?: string, allowScale?: boolean) {\r\n        this.width = safeValue(width, 1);\r\n        this.height = safeValue(height, 1);\r\n        \r\n        this.position = Vector2.zero(); \r\n        this.assetName = assetName || \"interact\";\r\n        this.layer = layer || \"game\";\r\n\r\n        this.animatedPosY = 0;\r\n        this.allowScale = safeValue(allowScale, true);\r\n    }\r\n    \r\n    render(game: Game) {\r\n        this.animatedPosY = lerp(this.animatedPosY, 0, .2);\r\n        \r\n        game.renderer.drawSprite({\r\n            texture: asImage(game.getAssetByName(this.assetName)),\r\n            width: this.width,\r\n            height: this.height,\r\n            position: this.position.add(new Vector2(0, this.animatedPosY)),\r\n            scale: Vector2.all(this.allowScale ? .7 : 1),\r\n            layer: this.layer\r\n        });\r\n    }\r\n    \r\n    click() {\r\n        this.animatedPosY = 10;\r\n    }\r\n}\r\n\r\nexport class UI {\r\n    game: Game | null\r\n    enabled: boolean\r\n    \r\n    allowSelectSlots: boolean\r\n    focused: {\r\n        row: number\r\n        slot: number\r\n    }\r\n    ghostFocused: UI[\"focused\"]\r\n    // Length - is rows\r\n    // [num, num, ...] - is slots\r\n    template: number[]\r\n    \r\n    constructor() {\r\n        this.game = null;\r\n        this.enabled = true;\r\n\r\n        this.allowSelectSlots = true;\r\n        this.focused = { row: 0, slot: 0 };\r\n        this.ghostFocused = { row: 0, slot: 0 };\r\n        this.template = [1];\r\n    }\r\n\r\n    init(game: Game) {\r\n        this.game = game;\r\n\r\n        game.gamepad.onAnyKeyDown(\"ui-listener\", name=> {\r\n            if (this.allowSelectSlots && this.enabled)\r\n\r\n            switch (name) {\r\n                case \"right\":\r\n                    this.focused.slot ++;\r\n                    this.bounds();\r\n                    break;\r\n                case \"left\":\r\n                    this.focused.slot --;\r\n                    this.bounds();\r\n                    break;\r\n                case \"up\":\r\n                    if (this.ghostFocused.row == Math.abs((this.focused.row % this.template.length) - 1))\r\n                        this.focused.slot = this.ghostFocused.slot;\r\n                    this.focused.row --;\r\n                    this.bounds();\r\n                    break;\r\n                case \"down\":\r\n                    if (this.ghostFocused.row == (this.focused.row % this.template.length) + 1)\r\n                        this.focused.slot = this.ghostFocused.slot;\r\n                    this.focused.row ++;\r\n                    this.bounds();\r\n                    break;\r\n            }\r\n\r\n        });\r\n\r\n        \r\n    }\r\n    bounds() {\r\n        if (this.focused.row < 0)\r\n            this.focused.row = this.template.length-1;\r\n        else if (this.focused.row > this.template.length-1)\r\n            this.focused.row = 0;\r\n        \r\n        this.focused.row = clamp(this.focused.row, 0, this.template.length-1);\r\n        if (this.focused.slot > this.template[this.focused.row]-1)\r\n            this.focused.slot = 0;\r\n        else if (this.focused.slot < 0)\r\n            this.focused.slot = this.template[this.focused.row]-1;\r\n\r\n        this.focused.slot = clamp(this.focused.slot, 0, this.template[this.focused.row]-1);\r\n    }\r\n    render() {\r\n        if (!this.game || !this.enabled) return;\r\n    }\r\n    updateTemplate(template: UI[\"template\"]) {\r\n        this.template = template.filter(t=> t > 0)\r\n    }\r\n\r\n    renderSlot(pos: Vector2, row: number, slot: number, render: ()=> void, width?: number, height?: number, ghost?: boolean) {\r\n        if (!this.game || !this.enabled) return;\r\n\r\n        \r\n        const isFocused = this.focused.row == row && this.focused.slot == slot;\r\n        const isGhostFocused = this.ghostFocused.row == row && this.ghostFocused.slot == slot;\r\n        \r\n        if (ghost && isFocused)\r\n            this.ghostFocused = { row, slot };\r\n        render();\r\n        \r\n        if (isFocused || (isGhostFocused && ghost)) {\r\n            this.game.renderer.drawRect({\r\n                color: \"rgba(0, 0, 0, 0)\",\r\n                width: safeValue(width, 1),\r\n                height: safeValue(height, 1),\r\n                position: pos.apply(Math.floor),\r\n                stroke: { width: 4, color: Color.ORANGE },\r\n                opacity: (isGhostFocused && !isFocused) ? .2 : 1,\r\n                layer: \"ui\"\r\n            });\r\n        }\r\n\r\n    }\r\n    renderDescriptionUI(props: {\r\n        title: string,\r\n        titleColor?: string,\r\n        specials: string[],\r\n        description: string,\r\n        renderIcon: (pos: Vector2)=> void\r\n    }) {\r\n        if (!this.game) return;\r\n\r\n        const size = Config.SPRITE_SIZE;\r\n        const windowCenter = new Vector2(innerWidth / 2, innerHeight / 2).apply(Math.floor);\r\n        const margin = 6;\r\n        const lineHeight = 22;\r\n\r\n        // Container\r\n        this.game.renderer.drawSprite({\r\n            texture: asImage(this.game.getAssetByName(\"description-ui\")),\r\n            position: new Vector2(0, size * 3).add(windowCenter),\r\n            width: 7,\r\n            height: 5,\r\n            layer: \"ui\"\r\n        });\r\n        \r\n        // Icon\r\n        props.renderIcon(new Vector2(-2.5 * size + size / 2, size + 70).add(windowCenter));\r\n\r\n        // Texts\r\n        const title = wrapText(props.title, 26);\r\n        \r\n        // Title\r\n        this.game.renderer.drawText({\r\n            text: title.text,\r\n            font: \"20px Pixel\",\r\n            position: new Vector2(-size * 1.3, size + 70 - size / 2 + 15).add(windowCenter),\r\n            align: \"left\",\r\n            color: props.titleColor || \"#fff\",\r\n            layer: \"ui\"\r\n        });\r\n        // Specials\r\n        this.game.renderer.drawText({\r\n            text: props.specials.join(\"\\n\"),\r\n            color: Color.ORANGE,\r\n            position: new Vector2(-size * 1.3, size + 70 + margin + (title.wrapCount >= 1 ? lineHeight : 0)).add(windowCenter),\r\n            align: \"left\",\r\n            layer: \"ui\"\r\n        });\r\n        // Description\r\n        this.game.renderer.drawText({\r\n            text: wrapText(props.description, 31).text,\r\n            position: new Vector2(-size * 1.3, size + 70 + lineHeight + margin * 2 + lineHeight * title.wrapCount + lineHeight * (props.specials.length - 1)).add(windowCenter),\r\n            align: \"left\",\r\n            layer: \"ui\"\r\n        });\r\n\r\n    }\r\n    renderProgressBar(props: IProgressBarProps) {\r\n        if (!this.game) return;\r\n\r\n        const width = props.width;\r\n        const height = props.height;\r\n        const progress = height * props.progress;\r\n        const pos = props.position.apply(Math.floor);\r\n\r\n        this.game.renderer.drawRect({\r\n            width: (width + 10) / Config.SPRITE_SIZE,\r\n            height: (height + 10) / Config.SPRITE_SIZE,\r\n            position: pos.add(Vector2.all(.5)),\r\n            color: Color.STONE_LAYER_COLOR,\r\n            stroke: {\r\n                color: props.strokeColor || Color.ORANGE,\r\n                width: 4\r\n            },\r\n            layer: props.layer || \"ui\"\r\n        })\r\n        this.game.renderer.drawRect({\r\n            width: width / Config.SPRITE_SIZE,\r\n            height: progress / Config.SPRITE_SIZE,\r\n            position: pos.add(new Vector2(0, (height - height * props.progress) / 2)).add(Vector2.all(.5)),\r\n            color: props.color || Color.YELLOW,\r\n            layer: props.layer || \"ui\"\r\n        })\r\n        \r\n    }\r\n\r\n    spawnMessageText(text: string) {\r\n        if (!this.game) return;\r\n        \r\n        SpawnParticles(this.game, new Vector2(20, innerHeight - 40), {\r\n            // custom: new Text(\"store-text\", text, { font: \"22px Pixel\" }),\r\n            render(renderer, part) {\r\n                renderer.drawText({\r\n                    text,\r\n                    font: \"22px Pixel\",\r\n                    position: part.position,\r\n                    opacity: part.size, \r\n                    layer: \"ui\",\r\n                    align: \"left\"\r\n                });\r\n            },\r\n            size: [5, 5],\r\n            count: 1,\r\n            gravity: 0,\r\n            rotationVelocity: ()=> random(-.02, .02),\r\n            velocity: ()=> new Vector2(0, -1.5),\r\n            downSize: .08,\r\n        });\r\n    }\r\n}","import { Config, ItemSettings } from \"../../config\"\r\nimport { Game, ISpriteProps, Sprite } from \"../../engine\"\r\nimport { compareNames, random, Vector2 } from \"../../engine/utils/math\"\r\nimport { Player } from \"../entities/Player\"\r\n\r\nexport class ItemParent extends Sprite {\r\n    radius: number\r\n    picked: boolean\r\n    allowPickup: boolean\r\n    liveStartElapsed: number\r\n    nearOnInit: boolean\r\n    foldToPosition: Vector2\r\n    \r\n    constructor(name: string, assetName: string, position: Vector2, props?: ISpriteProps) {\r\n        super(name, assetName, {\r\n            ...props,\r\n            colliderType: \"dynamic\",\r\n            position: position.expand()\r\n        });\r\n\r\n        this.radius = 4;\r\n        this.group = \"items\";\r\n        this.allowPickup = true;\r\n        this.picked = false;\r\n        this.liveStartElapsed = 0;\r\n        this.nearOnInit = false;\r\n        this.foldToPosition = Vector2.zero();\r\n\r\n        this.collider.width = 6 * Config.SPRITE_SCALE;\r\n        this.collider.height = 6 * Config.SPRITE_SCALE;\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n        \r\n        this.liveStartElapsed = this.game.clock.elapsed;\r\n        this.layer = \"particles\";\r\n        this.velocity.set(random(-8, 8), random(-8, 8));\r\n        this.acceleration.copy(Vector2.all(.8));\r\n\r\n        if (this.checkDistanceToPlayer(this.game.getChildById(\"player\"), Config.PICKUP_DISTANCE * 2))\r\n            this.nearOnInit = true;\r\n    }\r\n    update() {\r\n        super.update();\r\n\r\n        if (!this.game.renderer.inCameraViewport(this.position)) {\r\n            if (this.game.clock.elapsed - this.liveStartElapsed >= Config.ITEMS_LIVE_TIME)\r\n                this.game.removeChildById(this.id);\r\n        } else {\r\n            this.liveStartElapsed = this.game.clock.elapsed;\r\n        }\r\n        \r\n        if (this.allowPickup) {\r\n            this.followPlayer(this.game.getChildById<Player>(\"player\"));\r\n            this.collideWidthOtherItems((this.game.children as ItemParent[]).filter(child=> child.group == \"items\" && child.allowPickup && child.picked));\r\n        } else {\r\n            this.moveTo(this.foldToPosition);\r\n            if (this.foldToPosition.distance(this.position) < 30)\r\n                this.game.removeChildById(this.id);\r\n        }\r\n    }\r\n\r\n    pickup(player: Player, count: number) {\r\n        player.pickup(this, this.name, count);\r\n    }\r\n\r\n    followPlayer(player: Player | undefined) {\r\n        if (!player) return;\r\n\r\n        if (!this.checkDistanceToPlayer(player))\r\n            this.nearOnInit = false;\r\n\r\n        if (this.nearOnInit) return;\r\n            \r\n        if (!this.picked && this.checkDistanceToPlayer(player)) {\r\n            this.pickup(player, 1);\r\n            this.picked = true;\r\n        }\r\n        else if (this.picked && player.wire.distance(this.position) > Config.PICKUP_DISTANCE) {\r\n            this.pickup(player, -1);\r\n            this.picked = false;\r\n        }\r\n        \r\n        if (!this.picked) return;\r\n\r\n        this.moveTo(player.wire);\r\n        this.game.renderer.drawLine({\r\n            color: ItemSettings[this.name] ? ItemSettings[this.name].lineColor : \"#fff\",\r\n            width: 2,\r\n            points: [this.position, player.position],\r\n            layer: \"bg\"\r\n        });\r\n\r\n    }\r\n    checkDistanceToPlayer(player: Player | undefined, distance?: number): boolean | undefined {\r\n        if (player)\r\n            return player.position.distance(this.position) < (distance || Config.PICKUP_DISTANCE);\r\n    }\r\n\r\n    collideWidthOtherItems(items: ItemParent[]) {\r\n        if (!this.picked) return;\r\n        \r\n        items.map((item, index)=> {\r\n        \r\n            if (item.position.distance(this.position) < (this.radius + item.radius) * Config.SPRITE_SCALE) {\r\n                item.position.copy(item.position.add(item.position.sub(this.position).normalize()));\r\n            }\r\n\r\n        });\r\n    }\r\n    moveTo(position: Vector2) {\r\n        this.velocity.copy(this.velocity.add(position.sub(this.position).mul(.04)));\r\n    }\r\n}","import { ISpriteProps } from \"../../engine\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { ItemParent } from \"./ItemParent\";\r\n\r\nexport type ItemType = \r\n    \"item-robot\" | \"battery\" | \"drill\";\r\n\r\nexport class Item extends ItemParent {\r\n    itemType: ItemType\r\n    \r\n    constructor(type: ItemType, position: Vector2, props?: ISpriteProps) {\r\n        super(type, type.replace(\"item-\", \"\"), position, props);\r\n\r\n        this.itemType = type;\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Item } from \"./Item\";\r\n\r\nexport class RobotItem extends Item {\r\n    constructor(position: Vector2) {\r\n        super(\"item-robot\", position, {\r\n            scale: new Vector2(.9, .8)\r\n        });\r\n    }\r\n}","import { Config } from \"../../config\";\r\nimport { SpawnParticles } from \"../../engine/components/Particles\";\r\nimport { Button } from \"../../engine/components/UI\";\r\nimport { random, Vector2 } from \"../../engine/utils/math\";\r\nimport { RobotItem } from \"../item/RobotItem\";\r\nimport { Ore } from \"../ores/Ore\";\r\nimport { Entity } from \"./Entity\";\r\nimport { Player } from \"./Player\";\r\n\r\nexport class Robot extends Entity {\r\n    pickupButton: Button\r\n    playerIsNear: boolean\r\n    \r\n    breaked: boolean\r\n\r\n    initElapsed: number\r\n    allowPickup: boolean\r\n    \r\n    constructor(position: Vector2) {\r\n        super(\"robot\", \"robot\", {\r\n            position: position.expand(),\r\n            scale: Vector2.zero()\r\n        });\r\n\r\n        this.pickupButton = new Button();\r\n        this.playerIsNear = false;\r\n        \r\n        this.movement = new Vector2(0, 1);\r\n        this.allowAnimate = false;\r\n        this.acceleration.set(.95, .95);\r\n        this.stayAnimation = \"robot\";\r\n\r\n        this.breaked = false;\r\n\r\n        this.initElapsed = 0;\r\n        this.allowPickup = false;\r\n\r\n        this.digOffsetFactor = .1;\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n\r\n        this.scale.set();\r\n\r\n        this.initElapsed = this.game.clock.elapsed;\r\n        this.game.gamepad.onKeyDown(this.id, \"enter\", ()=> {\r\n            if (!this.playerIsNear || !this.allowPickup) return;\r\n\r\n            // Pickup robot\r\n            this.pickupButton.click();\r\n            this.pickup();\r\n            console.log(true);\r\n        });\r\n\r\n        // Play motor start sound\r\n        this.sound.play(this.game, \"motor-start\", .5);\r\n        // Play motor sound\r\n        this.sound.play(this.game, \"motor\", 1, true);\r\n    }\r\n    update() {\r\n        super.update();\r\n\r\n        // Audio\r\n        this.sound.update3D(this.game, this.position);\r\n\r\n        // Allow pickup\r\n        if (this.scale.mul(10).apply(Math.round).x >= 10 && !this.allowPickup)\r\n            this.allowPickup = true;\r\n        \r\n        // If not in loaded chunk\r\n        if (!this.game.generator.checkIsInLoadedChunk(this.position)) {\r\n            this.velocity.set();\r\n            return;\r\n        }\r\n\r\n        this.checkPlayerDistance();\r\n        \r\n        if (!this.breaked)\r\n            this._move();\r\n\r\n        if (!this.collider.collidesWith) return;\r\n        const ore = this.game.getChildById<Ore>(this.collider.collidesWith.id);\r\n        if (!ore) return;\r\n        \r\n        // If robot cant destroy ore\r\n        if (ore.needToolLevel > 2 && !this.breaked) {\r\n            this.breaked = true;\r\n        }\r\n        \r\n        this.dig(Config.ROBOT_DAMAGE, Config.ROBOT_HIT_SPEED, 2, \"bottom\");\r\n        \r\n    }\r\n    render() {\r\n        super.render();\r\n\r\n        this.scale.lerp(Vector2.all(), .1);\r\n\r\n        // Pickup button\r\n        if (this.playerIsNear) {\r\n            this.pickupButton.position = new Vector2(0, -90).add(this.position)\r\n            this.pickupButton.render(this.game);\r\n            this.game.renderer.drawText({\r\n                text: \"Подобрать\",\r\n                position: new Vector2(0, -50).add(this.position),\r\n            });\r\n        }\r\n        \r\n        // Smoke\r\n        if (this.breaked)\r\n            this.smoke();\r\n\r\n    }\r\n    destroy() {\r\n        super.destroy();\r\n\r\n        this.sound.stop();\r\n    }\r\n\r\n    _move() {\r\n        this.velocity.copy(this.velocity.add(this.movement.mul(.2)));\r\n    }\r\n\r\n    smoke() {\r\n\r\n        if (this.game.clock.elapsed % 20 == 0) {\r\n            SpawnParticles(this.game, this.position, {\r\n                render: (renderer, part)=> {\r\n\r\n                    renderer.drawRect({\r\n                        color: part.color,\r\n                        position: part.position,\r\n                        rotation: part.rotation,\r\n                        width: part.size / 5,\r\n                        height: part.size / 5,\r\n                        opacity: part.opacity\r\n                    });\r\n\r\n                },\r\n                colors: [\"rgba(50, 50, 50, .8)\"],\r\n                count: 1,\r\n                size: [1, 1.5],\r\n                velocity: ()=> new Vector2(random(-1, 1), random(-1, -3)),\r\n                box: ()=> new Vector2(random(-10, 10), random(-10, 10)),\r\n                rotationVelocity: ()=> random(-1, 1) * .01,\r\n                downSize: -.025,\r\n                downOpacity: .008,\r\n                gravity: .01,\r\n            });\r\n        }\r\n\r\n    }\r\n    checkPlayerDistance() {\r\n\r\n        const player = this.game.getChildById<Player>(\"player\");\r\n        if (!player) return;\r\n        \r\n        this.playerIsNear = player.position.distance(this.position) < Config.ROBOT_PICKUP_DISTANCE\r\n    }\r\n    pickup() {\r\n        this.game.add(new RobotItem(this.position));\r\n        this.game.initChildren();\r\n        this.game.removeChildById(this.id);\r\n        this.playerIsNear = false;\r\n    }\r\n}","import { Color, Config } from \"../../config\";\r\nimport { Game } from \"../../engine\";\r\nimport { asAudio, asImage, assetIsValid, clamp, compareNames, lerp, random, safeValue, Vector2 } from \"../../engine/utils/math\";\r\nimport { Direction } from \"../../types\";\r\nimport { Entity } from \"./Entity\";\r\nimport { Ore } from \"../ores/Ore\";\r\nimport { Raw, RawType } from \"../raws/Raw\";\r\nimport { Renderer } from \"../../engine/Renderer\";\r\nimport { ItemParent } from \"../item/ItemParent\";\r\nimport { Robot } from \"./Robot\";\r\nimport { Sound } from \"../../engine/components/Sound\";\r\nimport { Food } from \"../food/Food\";\r\nimport { FetusStone } from \"../ores/FetusStone\";\r\n\r\n// > 5 is \"god tool\"\r\nexport type ToolLevel = 1 | 2 | 3 | 4 | 5 | 6;\r\nexport const MaxToolLevel = 4;\r\nexport type Tool = {\r\n    speed: number,\r\n    damage: number\r\n}\r\n\r\nconst tools: { [key: string]: Tool }  = {\r\n    \"1\": {\r\n        speed: 16,\r\n        damage: 2\r\n    },\r\n    \"2\": {\r\n        speed: 16,\r\n        damage: 4\r\n    },\r\n    \"3\": {\r\n        speed: 10,\r\n        damage: 3\r\n    },\r\n    \"4\": {\r\n        speed: 14,\r\n        damage: 8\r\n    },\r\n    \"5\": {\r\n        speed: 5,\r\n        damage: 20\r\n    },\r\n    \"6\": {\r\n        speed: 16,\r\n        damage: 2\r\n    },\r\n}\r\n\r\nexport class Player extends Entity {\r\n    // ambientSound: Sound | null\r\n    // ambientIsPlaying: boolean\r\n    \r\n    oxygenHungry: boolean\r\n    oxygenHungryStartElapsed: number\r\n    \r\n    wire: Vector2\r\n    inventory: {\r\n        totalCount: number\r\n        slots: {\r\n            [key: string]: {\r\n                count: number\r\n                instances: ItemParent[]\r\n            }\r\n        }\r\n    }\r\n    toolLevel: ToolLevel\r\n    hasBottle: boolean\r\n    allowPlaceRobot: boolean\r\n    allowUseFood: boolean\r\n    tipText: string\r\n    actionType: \"grab\" | \"place\" | \"\"\r\n    nearFetusStone: FetusStone | undefined;\r\n\r\n    damageAnimatedOpacity: number\r\n    animatedCameraRotation: number\r\n    \r\n    constructor() {\r\n        super(\"player\", \"player-stay\", {\r\n            position: new Vector2(Config.WORLD_WIDTH * Config.SPRITE_SIZE / 2, -Config.SPRITE_SIZE)\r\n        });\r\n        \r\n        // this.ambientSound = null;\r\n        // this.ambientIsPlaying = false;\r\n        this.oxygenHungry = false;\r\n        this.oxygenHungryStartElapsed = 0;\r\n\r\n        this.wire = this.position.expand();\r\n        this.inventory = {\r\n            totalCount: 0,\r\n            slots: {}\r\n        };\r\n        this.hasBottle = false;\r\n        this.toolLevel = 5;\r\n        this.allowPlaceRobot = false;\r\n        this.allowUseFood = false;\r\n        this.actionType = \"grab\";\r\n        this.tipText = \"\"\r\n        this.nearFetusStone = undefined;\r\n\r\n        this.damageAnimatedOpacity = 0;\r\n        this.animatedCameraRotation = 0;\r\n\r\n        window.addEventListener(\"keydown\", e=> {\r\n            if (e.code == \"KeyT\") {\r\n                this.initialMoveSpeed = this.initialMoveSpeed == 5 ? 90 : 5;\r\n                // this.moveSpeed = this.moveSpeed == 5 ? 90 : 5;\r\n                this.collider.collidable = !this.collider.collidable;\r\n            }\r\n        })\r\n    }\r\n    \r\n    init() {\r\n        super.init();\r\n        \r\n        this.collider.width = 10 * Config.SPRITE_SCALE;\r\n        this.collider.height = 10 * Config.SPRITE_SCALE;\r\n        this.collider.offset = new Vector2(3, 0);\r\n\r\n        // Set robot\r\n        this.game.gamepad.onKeyDown(this.id, \"enter\", ()=> {\r\n            if (this.checkItemInInventory(\"item-robot\") && this.allowPlaceRobot)\r\n                this.placeRobot();\r\n\r\n            this.useFood();\r\n            if (!this.nearFetusStone) return;\r\n\r\n            this.nearFetusStone.grab();\r\n            \r\n        });\r\n    }\r\n\r\n    update() {\r\n        super.update();\r\n        if (!this.allowMove) return;\r\n\r\n        this.movement.set(\r\n            (+this.game.gamepad.keys.right - +this.game.gamepad.keys.left),\r\n            (+this.game.gamepad.keys.down - +this.game.gamepad.keys.up)\r\n        );\r\n        this.move();\r\n        this.pullWire();\r\n\r\n        this.nearFetusStone = this.game.getChildrenByName<FetusStone>(\"fetus-stone\").find(ore=> {\r\n\r\n            const vineHeight = (ore.length || 0) * Config.SPRITE_SIZE;\r\n            \r\n            return (this.game.physics.collideWithRect({\r\n                id: this.id,\r\n                position: this.position,\r\n                width: this.collider.width,\r\n                height: this.collider.height,\r\n            }, {\r\n                id: ore.id,\r\n                position: ore.position.add(new Vector2(0, vineHeight / 2)),\r\n                width: ore.collider.width / 2,\r\n                height: ore.collider.height + vineHeight,\r\n            }).any)\r\n\r\n        })\r\n        \r\n        // this.nearFetusStone = this.game.getChildrenByName<FetusStone>(\"fetus-stone\").find(ore=> safeValue(ore.length, 0) > 0 && ore.position.distance(this.position) < 150);\r\n        // this.actionType = this.checkItemInInventory(\"item-robot\") && this.allowPlaceRobot ? \"place\" : \"\";\r\n        this.actionType = !!this.nearFetusStone ? \"grab\" : \"\";\r\n\r\n        // Sounds\r\n        this.footsStep();\r\n        // this.ambient();\r\n\r\n        this.animatedCameraRotation = lerp(this.animatedCameraRotation, this.velocity.x / 50, .2);\r\n\r\n        // Slow\r\n        if (this.oxygenHungry) {\r\n            this.moveSpeed = this.initialMoveSpeed / 2 + 1;\r\n        } else {\r\n            this.moveSpeed = this.initialMoveSpeed;\r\n\r\n            this.moveSpeedDown =\r\n                (this.checkItemInInventory(\"raw-nerius\") ? 3 : 0) +\r\n                (this.checkItemInInventory(\"ready-cidium\") ? -2 : 0);\r\n        }\r\n        if (!this.oxygenHungry)\r\n            this.oxygenHungryStartElapsed = this.game.clock.elapsed;\r\n        \r\n        // Dig\r\n        const tool = tools[this.toolLevel.toString()];\r\n\r\n        if (this.movement.x != 0)\r\n            this.dig(tool.damage, tool.speed, this.toolLevel, this.movement.x > 0 ? \"right\" : \"left\");\r\n        else if (this.movement.y != 0)\r\n            this.dig(tool.damage, tool.speed, this.toolLevel, this.movement.y > 0 ? \"bottom\" : \"top\");\r\n\r\n        //\r\n        this.damageAnimatedOpacity = lerp(this.damageAnimatedOpacity, 0, .05);\r\n\r\n        this.bounds();\r\n    }\r\n    render() {\r\n        super.render();\r\n        \r\n        this.renderUI();    \r\n    }\r\n    renderUI() {\r\n        const size = Config.SPRITE_SIZE;\r\n        const windowCenter = new Vector2(innerWidth / 2, innerHeight / 2);\r\n\r\n        if (this.oxygenHungry)\r\n            this.renderOxygenHungryUI();\r\n        \r\n        //\r\n        this.allowPlaceRobot = this.position.y > 20;\r\n        \r\n        // Tip text\r\n        if (this.actionType == \"grab\")\r\n            this.tipText = \"[OK] - собрать\";\r\n        else if (this.actionType == \"place\")\r\n            this.tipText = \"[OK] - установить\";\r\n        this.game.renderer.drawText({\r\n            text: this.tipText,\r\n            position: new Vector2(0, 150).add(windowCenter),\r\n            layer: \"ui\"\r\n        });\r\n        \r\n        this.allowUseFood = !this.checkItemInInventory(\"item-robot\") && this.checkItemInInventory(\"food-fetus\")\r\n        \r\n        // Tool level\r\n        this.game.renderer.drawSprite({\r\n            texture: asImage(this.game.getAssetByName(\"tools\")),\r\n            position: new Vector2(size, innerHeight - size),\r\n            layer: \"ui\"\r\n        });\r\n        this.game.renderer.drawText({\r\n            text: this.toolLevel + \"ур.\",\r\n            position: new Vector2(size, innerHeight - size).add(Vector2.all(size * .3)),\r\n            font: \"22px Pixel\",\r\n            layer: \"ui\"\r\n        });\r\n\r\n        // Bottle\r\n        if (this.hasBottle)\r\n            this.game.renderer.drawSprite({\r\n                texture: asImage(this.game.getAssetByName(\"bottle\")),\r\n                position: new Vector2(size * 2 + 20, innerHeight - size),\r\n                layer: \"ui\"\r\n            })\r\n\r\n        // Damage vignette\r\n        this.game.renderer.drawSprite({\r\n            texture: asImage(this.game.getAssetByName(\"damage\")),\r\n            width: innerWidth / Config.SPRITE_SIZE,\r\n            height: innerHeight / Config.SPRITE_SIZE,\r\n            position: new Vector2(innerWidth / 2, innerHeight / 2),\r\n            layer: \"ui\",\r\n            framed: false,\r\n            opacity: this.damageAnimatedOpacity\r\n        });\r\n    }\r\n\r\n    renderOxygenHungryUI() {\r\n        const size = Config.SPRITE_SIZE;\r\n        const windowCenter = new Vector2(innerWidth / 2, innerHeight / 2);\r\n\r\n        const loseConsciousnessIn = Config.OXYGEN_HUNGRY_TIME - (this.game.clock.elapsed - this.oxygenHungryStartElapsed);\r\n        \r\n        // this.game.renderer.drawText({\r\n        //     text: \"Кислородное голодание!\",\r\n        //     position: new Vector2(innerWidth/2, 100),\r\n        //     font: \"24px Pixel\",\r\n        //     scale: Vector2.all(1 - (Math.sin(this.game.clock.elapsed / 10) + 1) / 2 / 10),\r\n        //     layer: \"ui\"\r\n        // });\r\n        this.game.renderer.drawText({\r\n            text: `Кислородное голодание!\\nВы потеряйте сознание через:`,\r\n            position: new Vector2(innerWidth/2, 130),\r\n            layer: \"ui\"\r\n        });\r\n        this.game.renderer.drawText({\r\n            text: `0:${ Math.floor(loseConsciousnessIn / 60) }`,\r\n            position: new Vector2(innerWidth/2, 180),\r\n            font: \"30px Pixel\",\r\n            layer: \"ui\"\r\n        });\r\n        \r\n    }\r\n\r\n    bounds() {\r\n        // World bounds\r\n        const worldWidth = Math.floor((Config.WORLD_WIDTH * Config.SPRITE_SIZE));\r\n        \r\n        // By width\r\n        if (this.position.x < 0)\r\n            this.position.x = 0\r\n        else if (this.position.x > worldWidth)\r\n            this.position.x = worldWidth\r\n        \r\n        // Dome bounds\r\n        const halfDiameter = Config.DOME_DIAMETER / 2;\r\n\r\n        if (this.position.x > Config.WORLD_X_CENTER - halfDiameter + 40 && this.position.x < Config.WORLD_X_CENTER + halfDiameter - 40) {\r\n            if (this.position.y < -Config.SPRITE_SIZE / 2) {\r\n        \r\n                if (this.position.y < -Config.GROUND_HEIGHT) {\r\n                    this.position.y = -Config.GROUND_HEIGHT;\r\n                }\r\n                if (this.position.x < Config.WORLD_X_CENTER - halfDiameter + 48)\r\n                    this.position.x = Config.WORLD_X_CENTER - halfDiameter + 48;\r\n                if (this.position.x > Config.WORLD_X_CENTER + halfDiameter - 48)\r\n                    this.position.x = Config.WORLD_X_CENTER + halfDiameter - 48;\r\n\r\n            }\r\n\r\n        } else {\r\n            // By height\r\n            if (this.position.y < -Config.SPRITE_SIZE / 2)\r\n                this.position.y = -Config.SPRITE_SIZE / 2;\r\n        }\r\n    }\r\n\r\n    // ambient() {\r\n    //     if (!this.game.tick(100)) return;\r\n\r\n    //     this.game.getChildrenByName<Ore>(\"ore\").filter(ore=> ore.oreType == \"fetus-stone\").map(ore=> {\r\n    //         if (this.position.distance(ore.position) < 300 && !this.ambientSound) {\r\n    //             this.ambientSound = new Sound();\r\n    //             this.ambientSound.play(this.game, \"wave\", 1, true);\r\n    //             this.ambientIsPlaying = true;\r\n    //         }\r\n    //         if (this.position.distance(ore.position) > 300 && this.ambientIsPlaying) {\r\n    //             this.ambientSound\r\n    //         }\r\n    //     });\r\n\r\n    // }\r\n    \r\n    pickup(item: ItemParent, type: string, count: number) {\r\n        this.inventory.slots[type] = this.inventory.slots[type] || { count: 0, instances: [] };\r\n        this.inventory.slots[type].count += count;\r\n        const instances = this.inventory.slots[type].instances;\r\n        this.inventory.slots[type].instances.push(item);\r\n            \r\n        this.inventory.slots[type].instances = instances.filter((i, index)=> instances.indexOf(i) == index);\r\n\r\n        this.calculateTotalCount()\r\n    }\r\n    calculateTotalCount() {\r\n        this.inventory.totalCount = 0;\r\n\r\n        this.getInventorySlotNames().map(slotName=> {\r\n\r\n            this.inventory.totalCount += this.inventory.slots[slotName].count;\r\n\r\n        });\r\n    }\r\n    pullWire() {\r\n        \r\n        if (this.position.distance(this.wire) > Config.WIRE_LENGTH) {\r\n            this.wire.copy(this.wire.add(this.position.sub(this.wire).normalize().mul(this.moveSpeed - this.moveSpeedDown)));\r\n        }\r\n\r\n    }\r\n    hit(damage: number) {\r\n        super.hit(damage);\r\n\r\n        this.damageAnimatedOpacity = 1.5;\r\n        this.game.camera.shake();\r\n        this.sound.play(this.game, \"bonk\");\r\n\r\n        if (this.hp <= 0) {\r\n            this.position = new Vector2(Config.WORLD_WIDTH * Config.SPRITE_SIZE / 2, -Config.SPRITE_SIZE);\r\n            this.hp = 10;\r\n            this.wire.copy(this.position);\r\n        }\r\n    }\r\n    die() {\r\n\r\n    }\r\n    heal(heal: number) {\r\n        this.hp += heal;\r\n        this.hp = clamp(this.hp, 0, 10);\r\n        this.spawnText(`+${ heal }`, undefined, Color.GREEN);\r\n    }\r\n    upgradeTool(levelUp: number) {\r\n        if (this.toolLevel < MaxToolLevel)\r\n            this.toolLevel += levelUp;\r\n    }\r\n    placeRobot() {\r\n        if (this.checkItemInInventory(\"item-robot\")) {\r\n        \r\n            // Sub. robots count in inventory\r\n            this.inventory.slots[\"item-robot\"].count --;\r\n\r\n            // Remove robot inventory instance\r\n            this.game.removeChildById(this.inventory.slots[\"item-robot\"].instances[0].id);\r\n            this.inventory.slots[\"item-robot\"].instances.splice(0, 1);\r\n            this.calculateTotalCount()\r\n\r\n        }\r\n        \r\n        // Place robot\r\n        this.game.add(new Robot(this.position.div(Config.SPRITE_SIZE).add(Vector2.all(.5)).apply(Math.floor).mul(Config.SPRITE_SIZE)));\r\n        this.game.initChildren();\r\n    }\r\n    foldSlotItemsTo(slotName: string, count: number, position: Vector2) {\r\n\r\n        const slotInstances = this.inventory.slots[slotName].instances.filter(item=> this.game.children.indexOf(item) >= 0 && item.picked);\r\n            \r\n        for (let i = 0; i < count; i ++) {\r\n            if (slotInstances[i] && slotInstances[i].picked) {\r\n                slotInstances[i].allowPickup = false;\r\n                slotInstances[i].picked = false;\r\n                slotInstances[i].foldToPosition = position;\r\n            }\r\n        }\r\n        this.inventory.slots[slotName].instances.splice(0, count);        \r\n        // for (let i = 0; i < count; i ++) {\r\n        //     if (slotInstances[i] && !slotInstances[i].picked && !slotInstances[i].allowPickup) {\r\n        //         this.inventory.slots[slotName].instances.splice(i, 1);\r\n        //     }\r\n        // }\r\n\r\n        this.inventory.slots[slotName].count -= count;\r\n        this.calculateTotalCount();\r\n\r\n    }\r\n    useFood() {\r\n        if (this.allowUseFood && this.hp < 8) {\r\n\r\n            const foodSlotNames = this.getInventorySlotNames().filter(slotName=> slotName.indexOf(\"food\") >= 0);\r\n            (this.inventory.slots[foodSlotNames[0]].instances[0] as Food).onUse(this);\r\n            this.game.removeChildById(this.inventory.slots[foodSlotNames[0]].instances[0].id);\r\n            this.inventory.slots[foodSlotNames[0]].count --;\r\n            this.inventory.slots[foodSlotNames[0]].instances.splice(0, 1);\r\n\r\n        }\r\n    }\r\n\r\n    footsStep() {\r\n\r\n        const allow = \r\n            (this.velocity.x > 0 && !this.collider.collidesWith?.right) ||\r\n            (this.velocity.x < 0 && !this.collider.collidesWith?.left) ||\r\n            (this.velocity.y < 0 && !this.collider.collidesWith?.top) ||\r\n            (this.velocity.y > 0 && !this.collider.collidesWith?.bottom)\r\n        \r\n        if (this.game.clock.elapsed % 20 == 0 && allow)\r\n            this.sound.play(this.game, `step-${ Math.floor(random(1, 4)) }`, .3)\r\n\r\n    }\r\n\r\n    getInventorySlotNames(): string[] {\r\n        return Object.keys(this.inventory.slots);\r\n    }\r\n    checkItemInInventory(name: string) {\r\n        return this.inventory.slots[name] && this.inventory.slots[name].count > 0;\r\n    }\r\n}","import { Config } from \"../config\";\r\nimport { Game, Sprite } from \"../engine\";\r\nimport { Vector2 } from \"../engine/utils/math\";\r\nimport { Player } from \"../objects/entities/Player\";\r\n\r\nexport function initLevel(game: Game) {\r\n\r\n    const ground = game.add<Sprite>(new Sprite(\"ground\", \"ground\", {\r\n        width: 4,\r\n        height: 4,\r\n        position: new Vector2(-Config.SPRITE_SIZE * 10, -Config.SPRITE_SIZE * .5 * 3),\r\n        repeat: new Vector2(Math.round(Config.WORLD_WIDTH) + 2, 1),\r\n        layer: \"bg\"\r\n    }));\r\n\r\n    function update(player: Player) {\r\n\r\n        const op = (1 - player.position.y / 240) * .3;\r\n        ground.opacity = op > 0 ? op : 0;\r\n\r\n    }\r\n\r\n    return { update };\r\n\r\n}","import { Config } from \"../config\"\r\nimport { ISpriteProps, Sprite } from \"../engine\"\r\nimport { Sound } from \"../engine/components/Sound\"\r\nimport { ColliderType } from \"../engine/Physics\"\r\nimport { lerp, random, safeValue, Vector2 } from \"../engine/utils/math\"\r\n\r\nexport class Block extends Sprite {\r\n    inChunkId: string\r\n\r\n    sound: Sound\r\n    \r\n    animatedScale: number\r\n    animateScaleTo: number\r\n    darkenFactor: number\r\n    randomRotate: boolean\r\n    randomFlipX: boolean\r\n    customColliderType: ColliderType | undefined\r\n    \r\n    constructor(name: string, assetName: string, position: Vector2, props?: ISpriteProps) {\r\n        super(name, assetName, {\r\n            colliderType: \"none\",\r\n            ...props,\r\n            position: position.add(new Vector2(0, 0)).mul(Config.SPRITE_PIXEL_SIZE * Config.SPRITE_SCALE)\r\n        });\r\n\r\n        this.inChunkId = \"\";\r\n        \r\n        this.sound = new Sound();\r\n\r\n        this.animatedScale = 1;\r\n        this.animateScaleTo = 1;\r\n        this.darkenFactor = 1;\r\n        this.randomRotate = true;\r\n        this.randomFlipX = true;\r\n        this.customColliderType = undefined;\r\n        \r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n        \r\n        if (this.randomRotate)\r\n            this.rotation = Math.floor(random(1, 5)) * Math.PI;\r\n        if (this.randomFlipX)\r\n            this.flip.x = Boolean(Math.floor(random(0, 2)));\r\n\r\n        if (Config.ALLOW_DARK)\r\n            this.visible = false;\r\n    }\r\n    render() {\r\n        super.render();\r\n        \r\n        if (Config.ALLOW_DARK)\r\n            this.darken();\r\n        \r\n    }\r\n    update() {\r\n        super.update();\r\n\r\n        // this.sound.update3D(this.game, this.position);\r\n\r\n        this.animatedScale = lerp(this.animatedScale, this.animateScaleTo, .2);\r\n        this.scale.set(this.animatedScale, this.animatedScale);\r\n    }\r\n\r\n    darken() {\r\n        \r\n        const t = 1 - this.game.camera.position.y / 200;\r\n        const d = (this.game.camera.position.distance(this.position) - 200);\r\n        this.darkenFactor = (d > 96 ? 1 : d / 96) + (t > 0 ? t : 0);\r\n        \r\n        if (this.darkenFactor < 1) \r\n            this.opacity = 1 - this.darkenFactor;\r\n        this.visible = this.darkenFactor < 1;\r\n        this.collider.type = this.darkenFactor < .8 ? safeValue(this.customColliderType, \"solid\") : \"none\";\r\n\r\n        // this.game.renderer.drawText({\r\n        //     text: JSON.stringify(+this.inChunkId.split(\"-\")[1] < 3),\r\n        //     position: this.position,\r\n        //     layer: \"particles\"\r\n        // })\r\n\r\n    }\r\n    checkBlockIn(offset: Vector2, checkChunkBorders?: boolean, findName?: string): boolean {\r\n\r\n        const size = Config.SPRITE_SIZE;\r\n        const blocks = this.game.getChildrenByName<Block>(findName || \"ore\");\r\n        const thisPos = this.position.div(size).apply(Math.floor);\r\n        \r\n        return ((+this.inChunkId.split(\"-\")[1]) >= 3 && safeValue(checkChunkBorders, true)) || blocks.filter(block=> block.name.indexOf(\"plant\") < 0).findIndex(block=> {\r\n            const orePos = block.position.div(size).apply(Math.floor);\r\n            \r\n            return Vector2.compare(orePos, thisPos.add(offset));\r\n        }) >= 0;\r\n    }\r\n    // checkBlockInByInChunkId(offset: Vector2, findName?: string): boolean {\r\n\r\n    //     const blocks = this.game.getChildrenByName<Block>(findName || \"ore\");\r\n        \r\n    //     const thisInChunkPos = this.inChunkId.split(\"-\");\r\n    //     return parseInt(thisInChunkPos[1]) < 3 && blocks.filter(block=> block.name.indexOf(\"plant\") < 0).findIndex(block=> {\r\n    //         const oreInChunkPos = block.inChunkId.split(\"-\");\r\n            \r\n    //         return (\r\n    //             +oreInChunkPos[0] == +thisInChunkPos[0] + offset.x &&\r\n    //             +oreInChunkPos[1] == +thisInChunkPos[1] + offset.y\r\n    //         )\r\n            \r\n    //     }) >= 0;\r\n    // }\r\n}","import { asImage, chance, inChunkIdToPosition, inRange, lerp, random, randomInt, randomNoise, Vector2 } from \"../../engine/utils/math\";\r\nimport { Game, ISpriteProps, Sprite } from \"../../engine\";\r\nimport { Config, Color, OreSettings } from \"../../config\";\r\nimport { Player, ToolLevel } from \"../entities/Player\";\r\nimport { SpawnParticles } from \"../../engine/components/Particles\";\r\nimport { Renderer } from \"../../engine/Renderer\";\r\nimport { Raw } from \"../raws/Raw\";\r\nimport { Sound } from \"../../engine/components/Sound\";\r\nimport { Block } from \"../Block\";\r\nimport { FetusVine } from \"../plants/FetusVine\";\r\nimport { simplex2 } from \"../../engine/utils/noise\";\r\n\r\nexport type OreType =\r\n    \"stone\" | \"stony-ground\" | \"deep-stone\" | \"destrony\" | \"manty\" |\r\n    \"cracked-stone\" | \"basalt\" | \"burnt-basalt\" |\r\n    \"cidium\" | \"osmy\" | \"antin\" | \"rady\" | \"nerius\" | \"fetus-stone\" | \"mushroom-stone\";\r\n\r\nexport class Ore extends Block {\r\n    oreType: OreType\r\n\r\n    hp: number\r\n    tilePosition: Vector2\r\n    unbreakable: boolean\r\n    needToolLevel: ToolLevel\r\n    \r\n    particlesColors: string[]\r\n    hitAudioName: string\r\n    breakAudioNames: string[]\r\n    allowDecorations: boolean\r\n    decorationsCount: number\r\n    currentDecorationFrame: number | null\r\n\r\n    constructor(type: OreType, position: Vector2, props?: ISpriteProps) {\r\n        super(`ore-${ type }`, type, position, props);\r\n        \r\n        this.oreType = type;\r\n        this.tilePosition = position\r\n        \r\n        const settings = OreSettings[type];\r\n        this.hp = settings ? settings.hp : OreSettings[\"stone\"].hp;\r\n        this.needToolLevel = OreSettings[type]?.tool || 1;\r\n        this.unbreakable = false;\r\n\r\n        this.particlesColors = [Color.BLACK];\r\n        this.hitAudioName = \"stone-hit\";\r\n        this.breakAudioNames = [\"stone-break-1\", \"stone-break-2\", \"stone-break-3\"];\r\n        this.allowDecorations = false;\r\n        this.decorationsCount = 10;\r\n        this.currentDecorationFrame = null;\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n\r\n        if (!this.allowDecorations) return;\r\n        \r\n        if (chance(50)) {\r\n            this.currentDecorationFrame = randomInt(0, this.decorationsCount);\r\n        } else {\r\n            this.currentDecorationFrame = null;\r\n        }\r\n\r\n        if (this.checkBlockIn(new Vector2(0, 1))) {\r\n            this.allowDecorations = false;\r\n        }\r\n\r\n    }\r\n\r\n    update() {\r\n        super.update();\r\n\r\n        \r\n    }\r\n    render() {\r\n        super.render();\r\n\r\n        if (this.allowDecorations)\r\n            this.renderDecorations();\r\n    }\r\n\r\n    renderDecorations() {\r\n        if (!this.visible || !this.currentDecorationFrame) return;\r\n        \r\n        this.game.renderer.drawSprite({\r\n            texture: asImage(this.game.getAssetByName(\"under-stone\")),\r\n            frame: new Vector2(this.currentDecorationFrame, 0),\r\n            position: this.position.add(new Vector2(0, Config.SPRITE_SIZE - (1-this.scale.y) * Config.SPRITE_SIZE)),\r\n            opacity: this.opacity,\r\n            scale: this.scale\r\n        });\r\n\r\n    }\r\n    \r\n    hit(damage: number, toolLevel: ToolLevel) {\r\n        if (!this.unbreakable && toolLevel >= this.needToolLevel) {\r\n\r\n            this.hp -= damage;\r\n            this.animatedScale = .8;\r\n            \r\n            SpawnParticles(this.game, this.position, {\r\n                colors: this.particlesColors,\r\n                size: [.2, .5],\r\n                count: 6,\r\n                box: ()=> new Vector2(random(-Config.SPRITE_SIZE / 2, Config.SPRITE_SIZE / 2), random(-Config.SPRITE_SIZE / 2, Config.SPRITE_SIZE / 2))\r\n            });\r\n\r\n            if (this.hp <= 0) {\r\n                // Break audio\r\n                this.sound.play(this.game, this.breakAudioNames[randomInt(0, this.breakAudioNames.length-1)]);\r\n                this.onBreak();\r\n            }\r\n        }\r\n\r\n        // Hit audio\r\n        if (this.hp > 0)\r\n            this.sound.play(this.game, this.hitAudioName);\r\n\r\n    }\r\n    onBreak() {\r\n\r\n        SpawnParticles(this.game, this.position, {\r\n            colors: this.particlesColors,\r\n        });\r\n        this.game.removeChildById(this.id);\r\n        this.game.generator.destroyOre(this.inChunkId);\r\n\r\n    }\r\n    dropRawOre(rawOre: typeof Raw | any, chancePercent?: number) {\r\n        let drop = true;\r\n        \r\n        if (chancePercent)\r\n            drop = chance(chancePercent);\r\n            \r\n        if (!drop) return;\r\n        this.game.add<typeof rawOre>(new (rawOre as any)(this.position.add(new Vector2(random(-10, 10), random(-10, 10)))));\r\n        this.game.initChildren();\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class Stone extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"stone\", position);\r\n        \r\n        this.allowDecorations = true;\r\n    }\r\n}","import { Config } from \"../../config\";\r\nimport { Game } from \"../../engine\";\r\nimport { SpawnParticles } from \"../../engine/components/Particles\";\r\nimport { clamp, random, randomInt, Vector2 } from \"../../engine/utils/math\";\r\nimport { Player } from \"../entities/Player\";\r\nimport { Ore, OreType } from \"./Ore\";\r\n\r\nexport class FallingOre extends Ore {\r\n    elapsedBeforeFall: number\r\n    allowFall: boolean\r\n    willFall: boolean\r\n    allowGravity: boolean\r\n    \r\n    constructor(type: OreType, position: Vector2) {\r\n        super(type, position);\r\n\r\n        this.elapsedBeforeFall = 0;\r\n        this.allowFall = false;\r\n        this.willFall = false;\r\n        this.allowGravity = false;\r\n        this.customColliderType = \"solid\";\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n        \r\n        this.acceleration.y = .98;\r\n\r\n        this.game.generator.onWorldChange(this.id, this.position, ()=> {\r\n\r\n            if (!this.checkBlockIn(new Vector2(0, 1), false)) {\r\n                this.allowGravity = true;\r\n                this.animateScaleTo = .7;\r\n                this.crumble();\r\n            }\r\n\r\n        });\r\n    }\r\n    update() {\r\n        super.update();\r\n\r\n        this.gravity();\r\n    }\r\n\r\n    gravity() {\r\n\r\n        if (this.game.generator.checkIsInLoadedChunk(this.position)) {\r\n            if (this.allowGravity) {\r\n\r\n                if ((this.game.clock.elapsed - this.elapsedBeforeFall) % Config.ORE_FALL_DELAY == 0 && !this.allowFall)\r\n                    this.allowFall = true;\r\n\r\n                if (this.allowFall) {\r\n                    if (this.collider.collidesWith?.bottom) {\r\n                        this.fallDestroy();\r\n                    }\r\n                    \r\n                    this.customColliderType = \"dynamic\";\r\n                    // this.collider.type = \"dynamic\";\r\n                    this.collider.width =\r\n                    this.collider.height = Config.SPRITE_SCALE * 6;\r\n                    this.velocity.y ++;\r\n\r\n                    const player = this.game.getChildById<Player>(\"player\")\r\n\r\n                    if (player && this.game.physics.collide(player, this).any) {\r\n                        player.hit(clamp(randomInt(0, 5), 2, 5));\r\n                    }\r\n                    \r\n                }\r\n            }\r\n        } else {\r\n            // this.velocity.y = 0;\r\n            if (!this.allowFall)\r\n                this.elapsedBeforeFall = this.game.clock.elapsed;\r\n            else\r\n                this.fallDestroy();\r\n        }\r\n\r\n        this.collider.collidesWith = null;\r\n\r\n    }\r\n    fallDestroy() {\r\n\r\n        SpawnParticles(this.game, this.position);\r\n        \r\n        this.sound.play(this.game, \"fall-stone-break\"); \r\n        this.game.removeChildById(this.id);\r\n        this.game.generator.destroyOre(this.inChunkId);\r\n\r\n    }\r\n\r\n    crumble() {\r\n        SpawnParticles(this.game, this.position.add(new Vector2(0, 40)), {\r\n            velocity: ()=> new Vector2(random(-2, 2), 0),\r\n            box: ()=> new Vector2(random(-40, 40), 0),\r\n            count: 5,\r\n        });\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { FallingOre } from \"./FallingORe\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class CrackedStone extends FallingOre {\r\n    constructor(position: Vector2) {\r\n        super(\"cracked-stone\", position);\r\n\r\n        // this.hp = 6;\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class DeepStone extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"deep-stone\", position);\r\n        this.randomRotate = false;\r\n        this.allowDecorations = true;\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { ItemParent } from \"../item/ItemParent\";\r\n\r\nexport type RawType = \r\n    \"raw-cidium\" | \"raw-osmy\" | \"raw-grade-cidium\" | \"raw-antin\" |\r\n    \"raw-rady\" | \"raw-nerius\" | \"raw-manty\";\r\n\r\nexport class Raw extends ItemParent {\r\n    rawType: RawType\r\n    \r\n    constructor(type: RawType, position: Vector2) {\r\n        super(type, type, position);\r\n\r\n        this.rawType = type;\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Raw } from \"./Raw\";\r\n\r\nexport class RawCidium extends Raw {\r\n    constructor(position: Vector2) {\r\n        super(\"raw-cidium\", position);\r\n    }\r\n}","import { Color } from \"../../config\";\r\nimport { Game } from \"../../engine\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { RawCidium } from \"../raws/RawCidium\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class Cidium extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"cidium\", position);\r\n\r\n        // this.hp = 20;\r\n        this.particlesColors = [Color.BLACK, Color.YELLOW];\r\n        this.allowDecorations = true;\r\n    }\r\n\r\n    onBreak() {\r\n        super.onBreak();\r\n\r\n        this.dropRawOre(RawCidium);\r\n    }\r\n}","import { buildName } from \"./engine/utils/math\";\r\n\r\ntype NamesType = {\r\n    [name: string]: {\r\n        name: string\r\n        desc: string\r\n        special?: string \r\n    }\r\n}\r\n\r\nconst prefixes = {\r\n    raw: \"Необработанный\",\r\n    ready: \"Обработанный\",\r\n}\r\n\r\nexport const ObjectNames: NamesType = {\r\n    // Raw\r\n    \"raw-cidium\": {\r\n        name: buildName(prefixes.raw, \"цидиум\"),\r\n        desc: \"Жёлтая руда, которая непонятным образом выделяет энергию, если её правильно обработать. При этом её очень легко найти\",\r\n    },\r\n    \"raw-osmy\": {\r\n        name: buildName(prefixes.raw, \"осмий\"),\r\n        desc: \"Осмий, кристалы, которые также есть и на земле. Казалось бы, ничего интересного, но вместе с цидиумом, осмий будет очень полезен\",\r\n    },\r\n    \"raw-grade-cidium\": {\r\n        name: buildName(prefixes.raw, \"второсортный цидиум\"),\r\n        desc: \"Цидиум 2-го сорта, руда, иногда встречающаяся вместе с осмием\",\r\n    },\r\n    \"raw-antin\": {\r\n        name: buildName(prefixes.raw, \"антин\"),\r\n        desc: \"Антин, крайне странная руда, имеющая красный оттенок. Предположительно кристалы, которые миллионы лет назад из-за вулканической активности. Не зря они расположены ближе к мантии\",\r\n    },\r\n    \"raw-rady\": {\r\n        name: buildName(prefixes.raw, \"радий\"),\r\n        desc: \"Радий... Нам не удалось его подробно изучить. Известно только, то что он очень глубоко под землёй и излучает радиационный фон до 67.2 мк/ч, что выше нормы в 4 раза\",\r\n        special: \"> Требуется специальная колба для сбора!\"\r\n    },\r\n    \"raw-nerius\": {\r\n        name: buildName(prefixes.raw, \"нериус\"),\r\n        desc: \"Нериус, невероятно плотная руда, что значит она ещё и очень тяжёлая. 1см² весит около 300 грамм\",\r\n        special: \"> Довольно сильно замедляет вас!\"\r\n    },\r\n    \"raw-manty\": {\r\n        name: \"Мантий\",\r\n        desc: \"Мантий... Это то, для чего ты здесь. Но будь осторожен, он очень горячий, до 1200 С°\",\r\n        special: \"> Требуется специальная колба для сбора!\"\r\n    },\r\n\r\n    // Ready\r\n    \"ready-cidium\": {\r\n        name: buildName(prefixes.ready, \"цидиум\"),\r\n        desc: \"Обработанный цидиум, способен генерировать энегрию. Используется в создании батареи и других крафтов\"\r\n    },\r\n\r\n    // Recipes\r\n    \"storage-level-up\": {\r\n        name: \"Улучшить хранилище\",\r\n        desc: \"Улучшите своё хранилище для того, чтобы можно было хранить больше ресурсов и их типов.\"\r\n    },\r\n    \"tool-level-up\": {\r\n        name: \"Улучшить инструмент\",\r\n        desc: \"Для того чтобы быстрее ломать руду прокачайте свой инструмент. Более новые уровни инструмента позволяют добывать больше типов руд\"\r\n    },\r\n\r\n    // Items\r\n    \"bottle\": {\r\n        name: \"\\\"Специальная колба\\\"\",\r\n        desc: \"Колба для сбора особо опасных руд. На пример таких, как радий\"\r\n    },\r\n    \"battery\": {\r\n        name: \"Батарея\",\r\n        desc: \"Да будет свет!\"\r\n    },\r\n    \"drill\": {\r\n        name: \"Бур\",\r\n        desc: \"Изпользуется в квафте чего-либо\"\r\n    },\r\n    \"item-robot\": {\r\n        name: \"Робот\",\r\n        desc: \"Ваш лисный робот-компаньон. Копает небольшой тунель вниз. Безсилен против базальта\"\r\n    },\r\n\r\n    // Gear\r\n    \"gear-storage\": {\r\n        name: \"Хранилище\",\r\n        desc: \"\"\r\n    },\r\n    \"gear-recycler\": {\r\n        name: \"Переработчик\",\r\n        desc: \"\"\r\n    },\r\n    \"gear-upgrader\": {\r\n        name: \"Улучшатель\",\r\n        desc: \"\"\r\n    },\r\n    \"gear-oxygen-generator\": {\r\n        name: \"Генератор кислорода\",\r\n        desc: \"\"\r\n    },\r\n}","import { Config } from \"../../config\";\r\nimport { ISpriteProps, Sprite } from \"../../engine\";\r\nimport { Sound } from \"../../engine/components/Sound\";\r\nimport { SpawnParticles } from \"../../engine/components/Particles\";\r\nimport { UI, Button } from \"../../engine/components/UI\";\r\nimport { asImage, Vector2 } from \"../../engine/utils/math\";\r\nimport { ObjectNames } from \"../../names\";\r\nimport { Player } from \"../entities/Player\";\r\n\r\nexport type GearType = \r\n    \"gear-storage\" | \"gear-recycler\" | \"gear-upgrader\" | \"gear-oxygen-generator\";\r\nexport type GearLevel = 1 | 2 | 3;\r\nexport const MaxGearLevel = 3;\r\n\r\nexport class Gear extends Sprite {\r\n    sound: Sound\r\n    ui: UI\r\n    interactButton: Button\r\n    player: Player | undefined\r\n\r\n    gearType: GearType;\r\n    level: GearLevel\r\n    playerIsNear: boolean\r\n    allowInteract: boolean\r\n\r\n    headerOffset: Vector2\r\n    interactText: string\r\n    tipText: string\r\n    \r\n    constructor(type: GearType, level: GearLevel, props?: ISpriteProps) {\r\n        super(type, [type, 1].join(\"-\"), props);\r\n\r\n        this.width = \r\n        this.height = 2;\r\n\r\n        this.sound = new Sound();\r\n        this.ui = new UI();\r\n        this.interactButton = new Button();\r\n        this.player = undefined;\r\n        \r\n        this.gearType = type;\r\n        this.level = level;\r\n        this.playerIsNear = false;\r\n        this.allowInteract = true;\r\n        this.layer = \"bg\";\r\n\r\n        this.headerOffset = new Vector2();\r\n        this.interactText = \"\";\r\n        this.tipText = \"закрыть\";\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n\r\n        this.ui.init(this.game);\r\n        this.ui.enabled = false;\r\n        this.player = this.game.getChildById(\"player\");\r\n\r\n        this.game.gamepad.onKeyDown(this.id, \"enter\", ()=> {\r\n            if (!this.playerIsNear) return;\r\n\r\n            if (this.player)\r\n                this.onInteract();\r\n        });\r\n    }\r\n\r\n    update() {\r\n        super.update();\r\n        \r\n        this.ui.allowSelectSlots = true;\r\n        \r\n        this.checkInteract();\r\n    }\r\n\r\n    render() {\r\n        super.render();\r\n\r\n        this.renderUI();\r\n\r\n        if (this.playerIsNear && this.allowInteract) {\r\n            const outlineAsset = this.game.getAssetByName([this.gearType, 1, \"outline\"].join(\"-\"));\r\n\r\n            // Draw gear outline\r\n            this.game.renderer.drawSprite({\r\n                texture: asImage(outlineAsset),\r\n                width: 2, height: 2,\r\n                position: this.position,\r\n                layer: this.layer,\r\n                flip: this.flip\r\n            });\r\n\r\n            this.game.renderer.drawText({\r\n                text: this.interactText,\r\n                font: \"22px Pixel\",\r\n                position: this.position.add(new Vector2(0, -70))\r\n            });\r\n                \r\n        }\r\n    }\r\n    renderUI() {\r\n        this.ui.render();\r\n\r\n        if (this.ui.enabled) {\r\n            const size = Config.SPRITE_SIZE;\r\n            const windowCenter = new Vector2(innerWidth / 2, innerHeight / 2).apply(Math.floor);\r\n\r\n            this.game.renderer.drawRect({\r\n                color: \"rgba(0, 0, 0, .6)\",\r\n                width: innerWidth / Config.SPRITE_SIZE,\r\n                height: innerHeight / Config.SPRITE_SIZE,\r\n                position: new Vector2(innerWidth / 2, innerHeight / 2),\r\n                layer: \"ui\"\r\n            });\r\n\r\n            // Container\r\n            this.game.renderer.drawSprite({\r\n                texture: asImage(this.game.getAssetByName([this.gearType.replace(\"gear-\", \"\"), \"ui\"].join(\"-\"))),\r\n                position: new Vector2(0, -size).add(windowCenter),\r\n                width: 7,\r\n                height: 5,\r\n                layer: \"ui\"\r\n            });\r\n            // Preview\r\n            // this.game.renderer.drawSprite({\r\n            //     texture: asImage(this.game.getAssetByName([this.gearType, 1].join(\"-\"))),\r\n            //     position: new Vector2(-size * 2, -size - 15).add(windowCenter).add(this.headerOffset),\r\n            //     width: 2,\r\n            //     height: 2,\r\n            //     layer: \"ui\"\r\n            // });\r\n            // Title\r\n            this.game.renderer.drawText({\r\n                text: `${ ObjectNames[this.name].name } ${ this.level }ур.`,\r\n                position: new Vector2(-size*2.25, -size - 15).add(windowCenter).add(this.headerOffset),\r\n                // position: new Vector2(-size*2 - size/4, -size*2 + 10).add(windowCenter).add(this.headerOffset),\r\n                align: \"left\",\r\n                layer: \"ui\"\r\n            });\r\n            // Close\r\n            this.game.renderer.drawText({\r\n                text: `[OK] - ${ this.tipText }`,\r\n                position: new Vector2(-size * 3 + 20, -size * 2 - 40).add(windowCenter).add(this.headerOffset),\r\n                layer: \"ui\",\r\n                align: \"left\"\r\n            })\r\n\r\n        }\r\n        \r\n        // Draw interact button\r\n        if (this.playerIsNear && !this.ui.enabled) {\r\n            this.interactButton.position = this.position.add(new Vector2(0, -110));\r\n            this.interactButton.render(this.game);\r\n        }\r\n    }\r\n\r\n    upgrade(levelUp: number) {\r\n        if (this.level < MaxGearLevel) {\r\n            this.level += levelUp;\r\n\r\n            SpawnParticles(this.game, this.position, {\r\n                render: (renderer, part)=> {\r\n                    renderer.drawSprite({\r\n                        texture: asImage(this.game.getAssetByName(\"level-up\")),\r\n                        position: part.position,\r\n                        opacity: part.size,\r\n                        scale: Vector2.all(.8),\r\n                        layer: \"particles\"\r\n                    })\r\n                },\r\n                velocity: ()=> new Vector2(0, -1.5),\r\n                size: [5, 5],\r\n                downSize: .08,\r\n                count: 1,\r\n                gravity: 0\r\n            });\r\n        }\r\n    }\r\n    checkInteract() {\r\n        if (!this.player) return;\r\n\r\n        this.playerIsNear = this.player.position.distance(this.position) < Config.GEAR_INTERACT_DISTANCE;\r\n        if (this.playerIsNear)\r\n            this.player.allowMove = !this.ui.enabled;\r\n    }\r\n\r\n    onInteract() {\r\n        this.interactButton.click();\r\n    }\r\n    \r\n}","import { Color, Config } from \"../../config\";\r\nimport { ISpriteProps } from \"../../engine\";\r\nimport { clamp, lerp, random, randomInt, Vector2 } from \"../../engine/utils/math\";\r\nimport { Gear } from \"./Gear\";\r\n\r\nexport class OxygenGenerator extends Gear {\r\n    startPosition: Vector2\r\n    \r\n    oxygenLevel: number\r\n    batteryLevel: number\r\n    animatedOxygenLevel: number\r\n    animatedBatteryLevel: number\r\n    playerWithBattery: boolean\r\n    \r\n    constructor(props?: ISpriteProps) {\r\n        super(\"gear-oxygen-generator\", 1, props);\r\n\r\n        this.startPosition = this.position.expand();\r\n        \r\n        this.oxygenLevel = 100;\r\n        this.batteryLevel = 15;\r\n        this.animatedOxygenLevel = 100;\r\n        this.animatedBatteryLevel = 100;\r\n        this.playerWithBattery = false;\r\n\r\n        this.headerOffset.set(0, -Config.SPRITE_SIZE / 2 - 15);\r\n\r\n    }\r\n\r\n    update() {\r\n        super.update();\r\n\r\n        this.work();        \r\n        this.checkBattery();\r\n\r\n        if (this.player) {\r\n            this.player.oxygenHungry = this.oxygenLevel <= 0;\r\n        }\r\n\r\n        if (this.oxygenLevel <= 40 || (this.batteryLevel <= 0 && this.oxygenLevel < 50)) {\r\n            this.position.copy(this.startPosition.add(new Vector2(random(-1, 1), random(-1, 1))))\r\n        } else {\r\n            this.position.lerp(this.startPosition, .3);\r\n        }\r\n\r\n        this.animatedOxygenLevel = lerp(this.animatedOxygenLevel, this.oxygenLevel, .2);\r\n        this.animatedBatteryLevel = lerp(this.animatedBatteryLevel, this.batteryLevel, .2);\r\n    }\r\n\r\n    render() {\r\n        super.render();\r\n        \r\n        this.frame = new Vector2(4 - clamp(Math.floor((this.batteryLevel + 20) / 25), 0, 4));\r\n        \r\n        if (this.playerIsNear)\r\n            this.renderBars();\r\n    }\r\n\r\n    onInteract() {\r\n        super.onInteract();\r\n\r\n        if (!this.playerWithBattery)\r\n            this.ui.enabled = !this.ui.enabled;\r\n        else {\r\n            if (!this.player) return;\r\n\r\n            this.player.foldSlotItemsTo(\"battery\", 1, this.position);\r\n            this.updateBatteryLevel(randomInt(50, 65));\r\n        }\r\n    }\r\n\r\n    work() {\r\n        // Remove oxygen\r\n        if (this.batteryLevel < 90) {\r\n            if (this.game.tick(this.batteryLevel > 20 ? 220 : (this.batteryLevel <= 0 ? 20 : 60)) && this.oxygenLevel > 0)\r\n                this.updateOxygenLevel(-randomInt(1, 3));\r\n        } else {\r\n            if (this.game.tick(30))\r\n                this.updateOxygenLevel(randomInt(1, 3));\r\n        }\r\n        \r\n        // Remove battery\r\n        if (this.game.tick(300) && this.batteryLevel > 0) {\r\n            this.updateBatteryLevel(-clamp(randomInt(-2, 4), 1, 4));\r\n\r\n            // Add oxygen\r\n            if (this.batteryLevel > 20)\r\n                this.updateOxygenLevel(randomInt(0, 8));\r\n        }\r\n    }\r\n    updateBatteryLevel(value: number) {\r\n        this.batteryLevel += value;\r\n        this.batteryLevel = clamp(this.batteryLevel, 0, 100);\r\n    }\r\n    updateOxygenLevel(value: number) {\r\n        this.oxygenLevel += value;\r\n        this.oxygenLevel = clamp(this.oxygenLevel, 0, 100);\r\n    }\r\n    \r\n    renderUI() {\r\n        super.renderUI();\r\n        if (!this.ui.enabled) return;\r\n\r\n        const size = Config.SPRITE_SIZE;\r\n        const windowCenter = new Vector2(innerWidth / 2, innerHeight / 2).apply(Math.floor);\r\n\r\n        // > Names\r\n        this.game.renderer.drawText({\r\n            text: \"Кислород\",\r\n            position: new Vector2(size*1.3, -size).add(windowCenter),\r\n            layer: \"ui\",\r\n            align: \"left\"\r\n        });\r\n        this.game.renderer.drawText({\r\n            text: \"Батарея\",\r\n            position: new Vector2(size*1.3, 0).add(windowCenter),\r\n            layer: \"ui\",\r\n            align: \"left\"\r\n        });\r\n\r\n        // > Progresses\r\n        const oxygenProgress = (this.animatedOxygenLevel / 100);\r\n        const batteryProgress = (this.animatedBatteryLevel / 100);\r\n        \r\n        // Oxygen\r\n        this.game.renderer.drawRect({\r\n            width: 2.5 * oxygenProgress,\r\n            height: .3,\r\n            color: Color.BLUE,\r\n            position: new Vector2(-size + (size * 2.5 * oxygenProgress - size*2.5)/2, -size).add(windowCenter),\r\n            layer: \"ui\"\r\n        });\r\n        // Battery\r\n        this.game.renderer.drawRect({\r\n            width: 2.5 * batteryProgress,\r\n            height: .3,\r\n            color: Color.YELLOW,\r\n            position: new Vector2(-size + (size * 2.5 * batteryProgress - size*2.5)/2).add(windowCenter),\r\n            layer: \"ui\"\r\n        });\r\n\r\n        // > Percents\r\n        // Oxygen\r\n        this.game.renderer.drawText({\r\n            text: `${ this.oxygenLevel }%`,\r\n            position: new Vector2(-size*2.1, -size).add(windowCenter),\r\n            layer: \"ui\",\r\n            align: \"left\"\r\n        });\r\n        // Battery\r\n        this.game.renderer.drawText({\r\n            text: `${ this.batteryLevel }%`,\r\n            position: new Vector2(-size*2.1, 0).add(windowCenter),\r\n            layer: \"ui\",\r\n            align: \"left\"\r\n        });\r\n    }\r\n\r\n    renderBars() {\r\n        \r\n        // Oxygen text\r\n        this.game.renderer.drawText({\r\n            text: `${ this.oxygenLevel }%`,\r\n            position: this.position.add(new Vector2(-80, -65)),\r\n            layer: \"particles\"\r\n        })\r\n        // Battery text\r\n        this.game.renderer.drawText({\r\n            text: `${ this.batteryLevel }%`,\r\n            position: this.position.add(new Vector2(80, -65)),\r\n            layer: \"particles\"\r\n        })\r\n        \r\n        // Oxygen level\r\n        this.ui.renderProgressBar({\r\n            progress: this.animatedOxygenLevel / 100,\r\n            position: this.position.add(new Vector2(-80, 0)),\r\n            width: 10,\r\n            height: 80,\r\n            layer: \"particles\",\r\n            color: Color.BLUE,\r\n            strokeColor: Color.BLUE\r\n        });\r\n        // Battery level\r\n        this.ui.renderProgressBar({\r\n            progress: this.animatedBatteryLevel / 100,\r\n            position: this.position.add(new Vector2(80, 0)),\r\n            width: 10,\r\n            height: 80,\r\n            layer: \"particles\"\r\n        });\r\n        \r\n    }\r\n\r\n    checkBattery() {\r\n        if (!this.playerIsNear || !this.player || !this.player.checkItemInInventory(\"battery\")) {\r\n            this.interactText = \"\";\r\n            this.playerWithBattery = false;\r\n            return;\r\n        }\r\n        \r\n        this.playerWithBattery = true;\r\n        this.interactText = \"Зарядить\";\r\n\r\n    }\r\n}","import { randomInt, Vector2 } from \"../../engine/utils/math\";\r\nimport { Player } from \"../entities/Player\";\r\nimport { ItemParent } from \"../item/ItemParent\";\r\n\r\nexport type FoodType =\r\n    \"food-fetus\";\r\n\r\nexport class Food extends ItemParent {\r\n    foodType: FoodType\r\n    \r\n    constructor(type: FoodType, position: Vector2) {\r\n        super(type, type, position);\r\n\r\n        this.radius = 2;\r\n        this.foodType = type;\r\n    }\r\n\r\n    onUse(player: Player) {\r\n        player.heal(randomInt(1, 2));\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Food } from \"./Food\";\r\n\r\nexport class Fetus extends Food {\r\n    constructor(position: Vector2) {\r\n        super(\"food-fetus\", position);\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Item } from \"./Item\";\r\n\r\nexport class Battery extends Item {\r\n    constructor(position: Vector2) {\r\n        super(\"battery\", position);\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Item } from \"./Item\";\r\n\r\nexport class Drill extends Item {\r\n    constructor(position: Vector2) {\r\n        super(\"drill\", position)\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Raw } from \"./Raw\";\r\n\r\nexport class RawAntin extends Raw {\r\n    constructor(position: Vector2) {\r\n        super(\"raw-antin\", position);\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Raw } from \"./Raw\";\r\n\r\nexport class RawGradeCidium extends Raw {\r\n    constructor(position: Vector2) {\r\n        super(\"raw-grade-cidium\", position);\r\n    }\r\n}","import { Game } from \"../../engine\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { Player } from \"../entities/Player\";\r\nimport { Raw } from \"./Raw\";\r\n\r\nexport class RawNerius extends Raw {\r\n    constructor(position: Vector2) {\r\n        super(\"raw-nerius\", position);\r\n    }\r\n\r\n    update(game: Game) {\r\n        super.update(game);\r\n\r\n        // const player = game.getChildById<Player>(\"player\");\r\n        // if (!player) return;\r\n\r\n        // player.moveSpeed = this.picked ? 2 : 5;\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Raw } from \"./Raw\";\r\n\r\nexport class RawOsmy extends Raw {\r\n    constructor(position: Vector2) {\r\n        super(\"raw-osmy\", position);\r\n    }\r\n}","import { Game } from \"../../engine\";\r\nimport { random, Vector2 } from \"../../engine/utils/math\";\r\nimport { Player } from \"../entities/Player\";\r\nimport { Raw, RawType } from \"./Raw\";\r\n\r\nexport class DangerRaw extends Raw {\r\n    constructor(type: RawType, position: Vector2) {\r\n        super(type, position);\r\n    }\r\n\r\n    update() {\r\n        super.update();\r\n        \r\n        const player = this.game.getChildById<Player>(\"player\");\r\n        if (!player) return;\r\n        if (player.hasBottle) return;\r\n\r\n        // If is picked, player get damage (1-2)\r\n        if (this.game.clock.elapsed % 80 == 0 && this.picked)\r\n            player.hit(Math.floor(random(1, 3)));\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { DangerRaw } from \"./DangerRaw\";\r\n\r\nexport class RawRady extends DangerRaw {\r\n    constructor(position: Vector2) {\r\n        super(\"raw-rady\", position);\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { ItemParent } from \"../item/ItemParent\";\r\n\r\nexport type ReadyType = \"ready-cidium\";\r\n\r\nexport class Ready extends ItemParent {\r\n    readyType: ReadyType\r\n    \r\n    constructor(type: ReadyType, position: Vector2) {\r\n        super(type, type, position);\r\n\r\n        this.readyType = type;\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Ready } from \"./Ready\";\r\n\r\nexport class ReadyCidium extends Ready {\r\n    constructor(position: Vector2) {\r\n        super(\"ready-cidium\", position);\r\n    }\r\n}","import { Fetus } from \"./objects/food/Fetus\";\r\nimport { Battery } from \"./objects/item/Battery\";\r\nimport { Drill } from \"./objects/item/Drill\";\r\nimport { RobotItem } from \"./objects/item/RobotItem\";\r\nimport { RawAntin } from \"./objects/raws/RawAntin\";\r\nimport { RawCidium } from \"./objects/raws/RawCidium\";\r\nimport { RawGradeCidium } from \"./objects/raws/RawGradeCidium\";\r\nimport { RawNerius } from \"./objects/raws/RawNerius\";\r\nimport { RawOsmy } from \"./objects/raws/RawOsmy\";\r\nimport { RawRady } from \"./objects/raws/RawRady\";\r\nimport { ReadyCidium } from \"./objects/ready/ReadyCidium\";\r\n\r\nexport const Items: { [key: string]: any }  = {\r\n    // Raws\r\n    \"raw-cidium\": RawCidium,\r\n    \"raw-osmy\": RawOsmy,\r\n    \"raw-grade-cidium\": RawGradeCidium,\r\n    \"raw-antin\": RawAntin,\r\n    \"raw-rady\": RawRady,\r\n    \"raw-nerius\": RawNerius,\r\n    // Ready\r\n    \"ready-cidium\": ReadyCidium,\r\n    // Items\r\n    \"item-robot\": RobotItem,\r\n    \"battery\": Battery,\r\n    \"drill\": Drill,\r\n    // Food\r\n    \"food-fetus\": Fetus\r\n};","import { Config } from \"../../config\";\r\nimport { Game } from \"../../engine\";\r\nimport { asImage, Vector2 } from \"../../engine/utils/math\";\r\nimport { MaxToolLevel } from \"../entities/Player\";\r\nimport { RobotItem } from \"../item/RobotItem\";\r\nimport { MaxGearLevel } from \"./Gear\";\r\nimport { Recipe, Recycler } from \"./Recycler\";\r\n\r\nconst recipes = (recycler: Recycler)=> ({\r\n\r\n    // Craft ready cidium\r\n    \"ready-cidium\": new Recipe({\r\n        recipe: ()=> ({\r\n            \"raw-cidium\": { count: 2 },\r\n        }),\r\n    }),\r\n\r\n    // Craft battery\r\n    \"battery\": new Recipe({\r\n        recipe: ()=> ({\r\n            \"ready-cidium\": { count: 1 },\r\n            \"raw-cidium\": { count: 2 },\r\n        }),\r\n    }),\r\n\r\n    // Craft battery\r\n    \"drill\": new Recipe({\r\n        recipe: ()=> ({\r\n            \"ready-cidium\": { count: 1 },\r\n            // \"ready-cidium\": { count: 3 },\r\n            // \"raw-osmy\": { count: 2 },\r\n            // \"raw-nerius\": { count: 2 },\r\n        }),\r\n    }),\r\n    \r\n    // Storage up\r\n    \"storage-level-up\": new Recipe({\r\n        recipe: ()=> [\r\n            // { \"raw-cidium\": { count: 1 }, \"raw-osmy\": { count: 1 } }, // Level 2\r\n            { \"ready-cidium\": { count: 2 }, \"raw-osmy\": { count: 3 } }, // Level 2\r\n            { \"ready-cidium\": { count: 4 }, \"raw-osmy\": { count: 6 }, \"raw-grade-cidium\": { count: 2 } }, // Level 3\r\n        ][recycler.storage.level - 1] as any,\r\n        // On craft\r\n        onCraft: ()=> {\r\n            recycler.storage.upgrade(1);\r\n        },\r\n        // Render icon\r\n        icon: (game, pos, opacity)=> {\r\n            game.renderer.drawSprite({\r\n                texture: asImage(game.getAssetByName(\"gear-storage-1\")),\r\n                position: pos,\r\n                width: 2,\r\n                height: 2,\r\n                scale: Vector2.all(.7),\r\n                layer: \"ui\",\r\n                opacity\r\n            });\r\n            game.renderer.drawText({\r\n                text: `${ recycler.storage.level + 1 }ур.`,\r\n                position: pos.add(Vector2.all(Config.SPRITE_SIZE * .3)),\r\n                layer: \"ui\",\r\n            });\r\n        },\r\n        isRemoved: ()=> recycler.storage.level >= MaxGearLevel\r\n    }),\r\n\r\n    // Tool up\r\n    \"tool-level-up\": new Recipe({\r\n        recipe: ()=> [\r\n            { \"ready-cidium\": { count: 3 }  }, // Level 2\r\n            { \"ready-cidium\": { count: 2 }, \"raw-osmy\": { count: 2 }, \"raw-grade-cidium\": { count: 1 } }, // Level 3\r\n            { \"ready-cidium\": { count: 3 }, \"raw-osmy\": { count: 4 }, \"raw-antin\": { count: 3 } }, // Level 4\r\n        ][recycler.player ? recycler.player?.toolLevel - 1 : 0] as any,\r\n        onCraft: ()=> {\r\n            if (!recycler.player) return;\r\n\r\n            recycler.player.upgradeTool(1);\r\n        },\r\n        icon: (game, pos, opacity)=> {\r\n            if (!recycler.player) return;\r\n\r\n            game.renderer.drawSprite({\r\n                texture: asImage(game.getAssetByName(\"tools\")),\r\n                position: pos,\r\n                layer: \"ui\",\r\n                opacity\r\n            });\r\n            game.renderer.drawText({\r\n                text: `${ recycler.player.toolLevel + 1 }ур.`,\r\n                position: pos.add(Vector2.all(Config.SPRITE_SIZE * .3)),\r\n                layer: \"ui\",\r\n            });\r\n        },\r\n        isRemoved: ()=> recycler.player ? recycler.player.toolLevel >= MaxToolLevel : false\r\n    }),\r\n\r\n    // Craft bottle\r\n    \"bottle\": new Recipe({\r\n        recipe: ()=> ({\r\n            \"ready-cidium\": { count: 1 },\r\n            \"raw-osmy\": { count: 8 },\r\n            \"raw-antin\": { count: 4 },\r\n            \"raw-nerius\": { count: 3 }\r\n        } as any),\r\n        onCraft: ()=> {\r\n            if (!recycler.player) return\r\n            recycler.player.hasBottle = true;\r\n        },\r\n        isRemoved: ()=> recycler.player ? recycler.player.hasBottle : false\r\n    }),\r\n\r\n    // Craft robot\r\n    \"item-robot\": new Recipe({\r\n        // recipe: ()=> ({ \"raw-cidium\": { count: 1 } } as any),\r\n        recipe: ()=> ({ \"battery\": { count: 1 }, \"drill\": { count: 1 }, \"raw-nerius\": { count: 5 } } as any),\r\n        isRemoved: ()=> recycler.player ? recycler.player.hasBottle : false\r\n    }),\r\n    \r\n});\r\n\r\nexport default recipes;","import { Color, Config } from \"../../config\";\r\nimport { Game, ISpriteProps } from \"../../engine\";\r\nimport { asImage, clamp, safeSlot, safeValue, Vector2 } from \"../../engine/utils/math\";\r\nimport { ObjectNames } from \"../../names\";\r\nimport { Items } from \"../../objects\";\r\nimport { Gear, GearLevel } from \"./Gear\";\r\nimport recipes from \"./recipes\";\r\nimport { Storage } from \"./Storage\";\r\n\r\nexport class Recycler extends Gear {\r\n    storage: Storage\r\n    recipes: { [key: string]: Recipe }\r\n    maxRowItemsCount: number\r\n    actionType: \"craft\" | \"close\"\r\n    \r\n    constructor(storage: Storage, props?: ISpriteProps) {\r\n        super(\"gear-recycler\", 1, props);\r\n\r\n        this.ui.focused.slot = 1;\r\n        this.ui.focused.row = 10;\r\n\r\n        this.maxRowItemsCount = 5;\r\n        this.storage = storage;\r\n        this.recipes = recipes(this);\r\n        this.headerOffset.set(0, -Config.SPRITE_SIZE);\r\n        this.actionType = \"close\";\r\n    }\r\n    \r\n    onInteract() {\r\n        super.onInteract();\r\n\r\n        // Open\r\n        this.ui.enabled = true;\r\n        \r\n        // Close\r\n        if (this.ui.focused.slot == 0 && this.ui.focused.row == 0 && this.ui.enabled) {\r\n            this.ui.enabled = false;\r\n        \r\n            this.ui.focused.slot = 1;\r\n            this.ui.focused.row = 10;\r\n\r\n        }\r\n\r\n        if (this.ui.enabled && this.ui.focused.slot == 1 && this.ui.focused.row == 10) {\r\n            this.ui.focused.slot = 0;\r\n            this.ui.focused.row = 0;\r\n        }\r\n\r\n        if (this.ui.focused.row == 1) {\r\n            \r\n            const recipesKeys = this.getRecipesKeys();\r\n            const recipe = this.recipes[recipesKeys[this.ui.focused.slot]];\r\n            \r\n            // Craft\r\n            if (recipe.canCraft(this.storage)) {\r\n                recipe.onCraft(this.game, this.storage, this.position, recipesKeys[this.ui.focused.slot]);\r\n                this.ui.enabled = false;\r\n                this.sound.play(this.game, \"crafting\");\r\n                this.ui.focused.slot = 1;\r\n                this.ui.focused.row = 10;\r\n            } else {\r\n                // Can't craft\r\n                this.sound.play(this.game, \"error\");\r\n                this.ui.spawnMessageText(\"Недостатачно ресурсов\");\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    renderUI() {\r\n        super.renderUI();\r\n\r\n        const recipesKeys = this.getRecipesKeys();\r\n\r\n        this.actionType = (this.ui.focused.row == 0 && this.ui.focused.slot == 0) ? \"close\" : \"craft\";\r\n        this.tipText = this.actionType == \"close\" ? \"закрыть\" : \"изготовить\";\r\n\r\n        this.ui.updateTemplate([\r\n            1,\r\n            clamp(recipesKeys.length, 0, this.maxRowItemsCount),\r\n            clamp(recipesKeys.length > this.maxRowItemsCount ? recipesKeys.length - this.maxRowItemsCount : 0, 0, this.maxRowItemsCount),\r\n        ]);\r\n        if (!this.ui.enabled) return;\r\n\r\n        this.renderRecipesUI(recipesKeys);\r\n        this.renderDescriptionUI(recipesKeys);\r\n    }\r\n\r\n    renderRecipesUI(recipes: string[]) {\r\n        const size = Config.SPRITE_SIZE;\r\n        const windowCenter = new Vector2(innerWidth / 2, innerHeight / 2).apply(Math.floor);\r\n        \r\n        // Close button\r\n        const pos = new Vector2(size*2, -size - 20).add(windowCenter).add(this.headerOffset);\r\n        this.ui.renderSlot(pos.add(new Vector2(-2, 2)), 0, 0, ()=> {\r\n\r\n            this.game.renderer.drawSprite({\r\n                texture: asImage(this.game.getAssetByName(this.actionType)),\r\n                position: pos,\r\n                layer: \"ui\"\r\n            });\r\n\r\n        }, 14 / Config.SPRITE_PIXEL_SIZE);\r\n        \r\n        recipes.map((recipeName, index)=> {\r\n\r\n            // Render recipe\r\n            const pos = new Vector2(\r\n                (index % this.maxRowItemsCount) * size - size * 2,\r\n                -size + Math.floor(index / this.maxRowItemsCount) * size\r\n            ).add(windowCenter);\r\n\r\n            this.ui.renderSlot(\r\n                pos,\r\n                // Row\r\n                Math.floor(index / this.maxRowItemsCount) + 1,\r\n                // Slot\r\n                index % this.maxRowItemsCount,\r\n                ()=> {\r\n                \r\n                // Background\r\n                this.game.renderer.drawRect({\r\n                    position: pos,\r\n                    color: Color.STONE_LAYER_COLOR,\r\n                    layer: \"ui\",\r\n                    width: .5,\r\n                    height: .5,\r\n                });\r\n                \r\n                // Render recipe icon\r\n                const renderIcon = this.recipes[recipeName].icon;\r\n                if (renderIcon)\r\n                    renderIcon(\r\n                        this.game,\r\n                        pos,\r\n                        this.recipes[recipeName].canCraft(this.storage) ? 1 : .5\r\n                    );\r\n                else\r\n                    this.game.renderer.drawSprite({\r\n                        texture: asImage(this.game.getAssetByName(recipeName.replace(\"item-\", \"\"))),\r\n                        position: pos,\r\n                        opacity: this.recipes[recipeName].canCraft(this.storage) ? 1 : .5,\r\n                        layer: \"ui\"\r\n                    })\r\n\r\n            }, 1, 1, true);\r\n\r\n        });\r\n\r\n    }\r\n    renderDescriptionUI(recipesKeys: string[]) {\r\n        const size = Config.SPRITE_SIZE;\r\n        const windowCenter = new Vector2(innerWidth / 2, innerHeight / 2).apply(Math.floor);\r\n\r\n        // Get recipe by focused slot\r\n        const selectedSlot = this.ui.ghostFocused.slot + (this.ui.ghostFocused.row - 1) * this.maxRowItemsCount;\r\n        const currentRecipe = this.recipes[recipesKeys[selectedSlot]];\r\n        const recipeDescription = ObjectNames[recipesKeys[selectedSlot]];\r\n\r\n        if (!recipeDescription) return;\r\n\r\n        const isInStockCount = (slotName: string): number => safeSlot(this.storage.contains.slots[slotName]).count;\r\n        \r\n        this.ui.renderDescriptionUI({\r\n            title: recipeDescription.name,\r\n            titleColor: currentRecipe.canCraft(this.storage) ? \"#fff\" : Color.RED,\r\n            specials: [\"\", \"\"],\r\n            description: recipeDescription.desc,\r\n            renderIcon: (pos)=> {\r\n                const renderIcon = currentRecipe.icon\r\n                if (renderIcon)\r\n                    renderIcon(this.game, pos, 1);   \r\n                else\r\n                    this.game.renderer.drawSprite({\r\n                        texture: asImage(this.game.getAssetByName(recipesKeys[selectedSlot].replace(\"item-\", \"\"))),\r\n                        position: pos,\r\n                        layer: \"ui\"\r\n                    })\r\n            }\r\n        });\r\n\r\n        //\r\n        const selectedRecipeKeys = Object.keys(currentRecipe.recipe());\r\n        selectedRecipeKeys.map((slotName, index)=> {\r\n            const pos = new Vector2(index * Config.SPRITE_SIZE - size, size*2 + 5).add(windowCenter);\r\n            const count = isInStockCount(slotName);\r\n            const needCount = currentRecipe.recipe()[slotName].count;\r\n            \r\n            // Sprite\r\n            this.game.renderer.drawSprite({\r\n                texture: asImage(this.game.getAssetByName(slotName)),\r\n                position: pos,\r\n                layer: \"ui\"\r\n            });\r\n            // Count\r\n            this.game.renderer.drawText({\r\n                text: `${ count }/${ needCount }`,\r\n                color: count >= needCount ? \"#fff\" : Color.RED, \r\n                position: pos.add(Vector2.all(Config.SPRITE_SIZE * .2)),\r\n                layer: \"ui\"\r\n            })\r\n\r\n            // Plus\r\n            if (index < selectedRecipeKeys.length - 1)\r\n                this.game.renderer.drawText({\r\n                    text: \"+\",\r\n                    font: \"22px Pixel\",\r\n                    position: pos.add(new Vector2(size / 2)),\r\n                    layer: \"ui\"\r\n                })\r\n            \r\n        });\r\n\r\n    }\r\n\r\n    getRecipesKeys(): string[] {\r\n        return Object.keys(this.recipes).filter(name=> !this.recipes[name].isRemoved())\r\n    }\r\n}\r\n\r\nexport class Recipe {\r\n    recipe: ()=> Storage[\"contains\"][\"slots\"]\r\n    _onCraft: ((game: Game)=> void) | undefined\r\n    isRemoved: ()=> boolean\r\n    icon: ((game: Game, pos: Vector2, opacity: number)=> void) | undefined\r\n    \r\n    constructor(props: {\r\n        recipe: Recipe[\"recipe\"]\r\n        onCraft?: Recipe[\"_onCraft\"]\r\n        icon?: Recipe[\"icon\"]\r\n        isRemoved?: Recipe[\"isRemoved\"]\r\n    }) {\r\n        this.recipe = props.recipe;\r\n        this._onCraft = props.onCraft;\r\n        this.icon = props.icon;\r\n        this.isRemoved = props.isRemoved || (()=> false);\r\n    }\r\n\r\n    canCraft(storage: Storage): boolean {\r\n        const recipes = Object.keys(this.recipe());\r\n        // let can = false;\r\n        let hasCount = 0;\r\n\r\n        for (let i = 0; i < recipes.length; i ++) {\r\n            if (safeSlot(storage.contains.slots[recipes[i]]).count >= safeSlot(this.recipe()[recipes[i]]).count)\r\n                hasCount ++;\r\n        }\r\n        \r\n        return hasCount >= recipes.length;\r\n        // return can;\r\n    }\r\n    onCraft(game: Game, storage: Storage, position: Vector2, name: string) {\r\n        const recipes = Object.keys(this.recipe());\r\n\r\n        for (let i = 0; i < recipes.length; i ++) {\r\n            storage.contains.slots[recipes[i]].count -= this.recipe()[recipes[i]].count;\r\n        }\r\n\r\n        storage.calculateTotalCount()\r\n        if (this._onCraft)\r\n            this._onCraft(game);\r\n        else {\r\n            game.add(new Items[name](position));\r\n            game.initChildren();\r\n        }\r\n    }\r\n}","import { Color, Config, ItemSettings, OreSettings } from \"../../config\";\r\nimport { ISpriteProps } from \"../../engine\";\r\nimport { asImage, safeValue, Vector2 } from \"../../engine/utils/math\";\r\nimport { ObjectNames } from \"../../names\";\r\nimport { Items } from \"../../objects\";\r\nimport { Gear, GearLevel } from \"./Gear\";\r\n\r\ntype InteractType = \"store\" | \"view\";\r\nenum MaxStorageTotalCount {\r\n    \"1-level\" = 18,\r\n    \"2-level\" = 28,\r\n    \"3-level\" = 42,\r\n}\r\n\r\nexport class Storage extends Gear {\r\n    contains: {\r\n        totalCount: number\r\n        slots: {\r\n            [key: string]: { count: number }\r\n        }\r\n    }\r\n    interactType: InteractType\r\n    maxTotalCount: number\r\n    maxRowItemsCount: number\r\n    actionType: \"drop\" | \"close\"\r\n    \r\n    constructor(props?: ISpriteProps) {\r\n        super(\"gear-storage\", 1, props);\r\n        \r\n        this.contains = { totalCount: 8, slots: {\r\n            \"raw-cidium\": { count: 6 },\r\n            \"raw-osmy\": { count: 2 },\r\n            \"food-fetus\": { count: 4 },\r\n        } };\r\n        this.interactType = \"view\";\r\n        this.maxTotalCount = MaxStorageTotalCount[`${ this.level }-level`];\r\n        this.headerOffset.set(0, -Config.SPRITE_SIZE);\r\n        this.maxRowItemsCount = 5;\r\n        this.actionType = \"close\";\r\n    }\r\n\r\n    update() {\r\n        super.update();\r\n        \r\n        if (!this.player) return;\r\n        if (!this.playerIsNear) return;\r\n        \r\n        // Change interact type\r\n        this.interactType = (\r\n            this.player.inventory.totalCount == 0 ||\r\n            this.contains.totalCount >= this.maxTotalCount ||\r\n            this.filterItems(this.player.inventory.slots).length == this.filterItems(this.player.inventory.slots).filter(name=> safeValue(ItemSettings[name], { lineColor: \"#fff\", storage: 1 }).storage > this.level).length\r\n        ) ? \"view\" : \"store\";\r\n        this.actionType = (this.ui.focused.row == 0 && this.ui.focused.slot == 0) ? \"close\" : \"drop\";\r\n\r\n        this.interactText = this.interactType == \"view\" ? \"Содержимое\" : \"Сложить\";\r\n        this.tipText = this.actionType == \"close\" ? \"закрыть\" : \"выбросить x1\";\r\n    }\r\n\r\n    onInteract() {\r\n        super.onInteract();\r\n\r\n        if (this.ui.enabled && this.ui.focused.row == 0 && this.ui.focused.slot == 0) {\r\n            this.ui.enabled = false;\r\n            return;\r\n        }\r\n        if (this.ui.enabled && this.ui.focused.row == 1) {\r\n            const slotName = this.filterItems(this.contains.slots)[this.ui.ghostFocused.slot];\r\n            this.drop(slotName, 1);\r\n            return;\r\n        }\r\n        \r\n        if (this.interactType == \"store\") {\r\n            this.ui.enabled = false;\r\n            this.store();\r\n        } else if (this.interactType == \"view\") {\r\n            if (!this.ui.enabled) {\r\n                this.ui.focused.row = 0;\r\n                this.ui.focused.slot = 0;\r\n            }\r\n            this.ui.enabled = true;\r\n            if (this.ui.enabled)\r\n                this.sound.play(this.game, \"storage\");\r\n        }        \r\n\r\n    }\r\n    upgrade(levelUp: number) {\r\n        super.upgrade(levelUp);\r\n\r\n        this.maxTotalCount = MaxStorageTotalCount[`${ this.level }-level`];\r\n    }\r\n\r\n    store() {\r\n        if (this.contains.totalCount >= this.maxTotalCount || !this.player) return;\r\n        \r\n        let storedCount = 0;\r\n        let totalStoredCount = 0;\r\n        const slotNames = this.filterItems(this.player.inventory.slots).filter(name=> safeValue(ItemSettings[name], { lineColor: \"#fff\", storage: 1 }).storage <= this.level);\r\n        // Storage level less then need\r\n        if (this.filterItems(this.player.inventory.slots).filter(name=> safeValue(ItemSettings[name], { lineColor: \"#fff\", storage: 1 }).storage > this.level).length > 0)\r\n            this.player.spawnText(\"Низкий уровень\\nхранилища\", new Vector2(0, -90));\r\n        \r\n        slotNames.map(slotName=> {\r\n            if (!this.player) return;\r\n            \r\n            this.contains.slots[slotName] = this.contains.slots[slotName] || { count: 0 };\r\n            \r\n            // Add items\r\n            if (this.contains.totalCount >= this.maxTotalCount) {\r\n                this.player.spawnText(\"Хранилище перепольнено\", new Vector2(0, -50));\r\n                return;\r\n            }\r\n\r\n            storedCount = this.player.inventory.slots[slotName].count + this.contains.totalCount <= this.maxTotalCount ? this.player.inventory.slots[slotName].count : (this.maxTotalCount - this.contains.totalCount);\r\n            this.contains.slots[slotName].count += storedCount;\r\n            totalStoredCount += storedCount;\r\n            \r\n            this.player.foldSlotItemsTo(slotName, storedCount, this.position);\r\n\r\n            this.calculateTotalCount();\r\n            this.player.calculateTotalCount();\r\n        });\r\n        \r\n        if (slotNames.length <= 0) return;\r\n        \r\n        // Play store audio\r\n        this.sound.play(this.game, \"store\");\r\n        this.player.spawnText(totalStoredCount.toString());\r\n    }\r\n    drop(slotName: string, count: number) {\r\n        if (!this.contains.slots[slotName]) return\r\n        \r\n        this.contains.slots[slotName].count -= count;\r\n\r\n        this.game.add(new Items[slotName](this.position));\r\n        this.game.initChildren();\r\n        this.sound.play(this.game, \"store\");\r\n\r\n        this.calculateTotalCount();\r\n    }\r\n    calculateTotalCount() {\r\n        this.contains.totalCount = 0;\r\n\r\n        Object.keys(this.contains.slots).map(slotName=> {\r\n            this.contains.totalCount += this.contains.slots[slotName].count;\r\n        });\r\n    }\r\n\r\n    renderUI() {\r\n        super.renderUI();\r\n\r\n        if (!this.ui.enabled) return;\r\n\r\n        const slots = this.filterItems(this.contains.slots);\r\n        this.ui.updateTemplate([\r\n            slots.length > 0 ? 1 : 0,\r\n            slots.length\r\n        ]);\r\n        if (!this.ui.template[0]) {\r\n            this.ui.focused.row = 1;\r\n            this.ui.focused.slot = 0;\r\n        }\r\n            \r\n        this.renderInventoryUI(slots);\r\n\r\n        const name = slots[this.ui.ghostFocused.slot]\r\n        const item = ObjectNames[name];\r\n        if (!item) return;\r\n        \r\n        const oreSettings = OreSettings[name.replace(\"raw-\", \"\")];\r\n        const special = [\r\n            oreSettings ? `> Нужен инструмент ${ oreSettings.tool || 1 }ур. и выше` : \"> Можно найти\",\r\n            item.special || \"\"\r\n        ].filter(t=> t != \"\");\r\n\r\n        // Render description\r\n        this.ui.renderDescriptionUI({\r\n            title: item.name,\r\n            specials: special,\r\n            description: item.desc, \r\n            renderIcon: (pos)=> {\r\n                this.game.renderer.drawSprite({\r\n                    texture: asImage(this.game.getAssetByName(name.replace(\"item-\", \"\"))),\r\n                    position: pos,\r\n                    layer: \"ui\"\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    renderInventoryUI(slots: string[]) {\r\n        const size = Config.SPRITE_SIZE;\r\n        const windowCenter = new Vector2(innerWidth / 2, innerHeight / 2).apply(Math.floor);\r\n\r\n        // Close button\r\n        if (slots.length == 0) {\r\n            this.ui.focused.row = 0;\r\n            this.ui.focused.slot = 0;\r\n        }\r\n        \r\n        const pos = new Vector2(size*2, -size * 2 - 20).add(windowCenter);\r\n        this.ui.renderSlot(pos.add(new Vector2(-2, 2)), 0, 0, ()=> {\r\n\r\n            this.game.renderer.drawSprite({\r\n                texture: asImage(this.game.getAssetByName(this.actionType)),\r\n                position: pos,\r\n                layer: \"ui\"\r\n            });\r\n\r\n        }, 14 / Config.SPRITE_PIXEL_SIZE);\r\n\r\n        // Draw count text\r\n        this.game.renderer.drawText({\r\n            text: `${ this.contains.totalCount }/${ this.maxTotalCount }`,\r\n            position: new Vector2(-size*2.25, -size * 2 + 10).add(windowCenter),\r\n            color: this.contains.totalCount >= this.maxTotalCount ? Color.RED : \"#fff\",\r\n            align: \"left\",\r\n            layer: \"ui\"\r\n        });\r\n\r\n        slots.map((slot, index)=> {\r\n            \r\n            const pos = new Vector2(\r\n                ((index % this.maxRowItemsCount) * size) - size * Math.floor(this.maxRowItemsCount / 2),\r\n                Math.floor(index / this.maxRowItemsCount) * size\r\n            ).add(windowCenter).add(new Vector2(0, -size));\r\n\r\n            this.ui.renderSlot(pos, 1, index, ()=> {\r\n                const count = this.contains.slots[slot].count;\r\n\r\n                // Draw item sprite\r\n                this.game.renderer.drawSprite({\r\n                    texture: asImage(this.game.getAssetByName(slot.replace(\"item-\", \"\"))),\r\n                    position: pos,\r\n                    layer: \"ui\"\r\n                });\r\n\r\n                // Draw item count text\r\n                if (count > 1)\r\n                    this.game.renderer.drawText({\r\n                        text: count.toString(),\r\n                        position: pos.add(Vector2.all(Config.SPRITE_SIZE * .3)),\r\n                        layer: \"ui\"\r\n                    });\r\n                \r\n            }, 1, 1, true);\r\n\r\n        });\r\n        \r\n    }\r\n\r\n    filterItems(slots: Storage[\"contains\"][\"slots\"]) {\r\n        return Object.keys(slots).filter(name=> slots[name].count > 0);\r\n        // return Object.keys(slots).filter(name=> name.indexOf(\"raw\") >= 0 && ((slots[name] as any).count ? (slots[name] as any).count > 0 : slots[name] > 0));\r\n    }\r\n}","import { Config } from \"../config\";\r\nimport { Game, Sprite } from \"../engine\";\r\nimport { Vector2 } from \"../engine/utils/math\";\r\nimport { OxygenGenerator } from \"../objects/gear/OxygenGenerator\";\r\nimport { Recycler } from \"../objects/gear/Recycler\";\r\nimport { Storage } from \"../objects/gear/Storage\";\r\n\r\nexport function initDome(game: Game) {\r\n    const domePosition = new Vector2(Math.round(Config.WORLD_X_CENTER), -Config.SPRITE_SIZE * 1.5);\r\n\r\n    const storage = game.add<Storage>(new Storage({\r\n        position: domePosition.add(new Vector2(-150, 0))\r\n    }));\r\n\r\n    \r\n    game.add<Sprite>(new OxygenGenerator({\r\n        position: domePosition.add(new Vector2(0, -100))\r\n    }));\r\n    game.add<Sprite>(new Recycler(storage, {\r\n        flip: { x: true, y: false },\r\n        position: domePosition.add(new Vector2(140, 0))\r\n    }));\r\n    \r\n    // Dome\r\n    game.add<Sprite>(new Sprite(\"dome\", \"dome\", {\r\n        width: 8,\r\n        height: 8,\r\n        position: domePosition,\r\n        layer: \"particles\"\r\n    }));\r\n\r\n}","import { Color } from \"../../config\";\r\nimport { Game } from \"../../engine\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { RawGradeCidium } from \"../raws/RawGradeCidium\";\r\nimport { RawOsmy } from \"../raws/RawOsmy\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class Osmy extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"osmy\", position);\r\n\r\n        this.randomRotate = false;\r\n        this.particlesColors = [Color.BLACK, Color.BLUE];\r\n        this.allowDecorations = true;\r\n    }\r\n\r\n    onBreak() {\r\n        super.onBreak();\r\n\r\n        this.dropRawOre(RawOsmy);\r\n        this.dropRawOre(RawGradeCidium, 100);\r\n    }\r\n}","import { Color } from \"../../config\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class Basalt extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"basalt\", position);\r\n\r\n        // this.needToolLevel = 3;\r\n        // this.hp = 40;\r\n        this.particlesColors = [Color.GREY];\r\n    }\r\n}","import { Color, Config } from \"../../config\";\r\nimport { Game } from \"../../engine\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { Player } from \"../entities/Player\";\r\nimport { RawAntin } from \"../raws/RawAntin\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class Antin extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"antin\", position);\r\n\r\n        // this.needToolLevel = 3;\r\n        // this.hp = 52;\r\n        this.particlesColors = [Color.GREY, Color.RED];\r\n    }\r\n\r\n    onBreak() {\r\n        super.onBreak();\r\n\r\n        this.dropRawOre(RawAntin);\r\n    }\r\n}","import { Game } from \"../../engine\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { Player, ToolLevel } from \"../entities/Player\";\r\nimport { Ore, OreType } from \"./Ore\";\r\n\r\nexport class DangerOre extends Ore {\r\n    constructor(type: OreType, position: Vector2) {\r\n        super(type, position);\r\n    }\r\n\r\n    hit(damage: number, level: ToolLevel) {\r\n        super.hit(damage, level);\r\n\r\n        const player = this.game.getChildById<Player>(\"player\");\r\n        if (!player) return;\r\n\r\n        if (!player.hasBottle)\r\n            player.hit(1);\r\n    }\r\n}","import { Color } from \"../../config\";\r\nimport { Game } from \"../../engine\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { RawRady } from \"../raws/RawRady\";\r\nimport { DangerOre } from \"./DangerOre\";\r\n\r\nexport class Rady extends DangerOre {\r\n    constructor(position: Vector2) {\r\n        super(\"rady\", position);\r\n\r\n        this.particlesColors = [Color.GREY, Color.GREEN];\r\n    }\r\n\r\n    onBreak() {\r\n        super.onBreak();\r\n\r\n        this.dropRawOre(RawRady);\r\n    }\r\n}","import { Color } from \"../../config\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class BurntBasalt extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"burnt-basalt\", position);\r\n\r\n        // this.needToolLevel = 4;\r\n        // this.hp = 80;\r\n        this.particlesColors = [Color.DARK_GREY];\r\n    }\r\n}","import { Color } from \"../../config\";\r\nimport { Game } from \"../../engine\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { RawGradeCidium } from \"../raws/RawGradeCidium\";\r\nimport { RawNerius } from \"../raws/RawNerius\";\r\nimport { RawOsmy } from \"../raws/RawOsmy\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class Nerius extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"nerius\", position);\r\n\r\n        this.randomRotate = false;\r\n        this.particlesColors = [Color.BLACK, \"#fff\"];\r\n    }\r\n\r\n    onBreak() {\r\n        super.onBreak();\r\n\r\n        this.dropRawOre(RawNerius);\r\n        // this.dropRawOre(game, RawGradeCidium, 100);\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class StonyGround extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"stony-ground\", position);\r\n        \r\n        this.allowDecorations = true;\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { Ore } from \"./Ore\"\r\n\r\nexport class Destrony extends Ore {\r\n    constructor(position: Vector2) {\r\n        super(\"destrony\", position);\r\n        this.unbreakable = true;\r\n        this.randomRotate = false;\r\n    }\r\n}","import { Vector2 } from \"../../engine/utils/math\";\r\nimport { DangerRaw } from \"./DangerRaw\";\r\n\r\nexport class RawManty extends DangerRaw {\r\n    constructor(position: Vector2) {\r\n        super(\"raw-manty\", position);\r\n    }\r\n}","import { Game } from \"../../engine\";\r\nimport { Vector2 } from \"../../engine/utils/math\";\r\nimport { RawManty } from \"../raws/RawManty\";\r\nimport { DangerOre } from \"./DangerOre\";\r\n\r\nexport class Manty extends DangerOre {\r\n    constructor(position: Vector2) {\r\n        super(\"manty\", position);\r\n\r\n        this.randomRotate = false;\r\n    }\r\n\r\n    onBreak() {\r\n        super.onBreak();\r\n\r\n        this.dropRawOre(RawManty);\r\n    }\r\n}","import { Color, Config } from \"../../config\";\r\nimport { SpawnParticles } from \"../../engine/components/Particles\";\r\nimport { asImage, chance, clamp, random, randomInt, Vector2 } from \"../../engine/utils/math\";\r\nimport { Player } from \"../entities/Player\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class FetusStone extends Ore {\r\n    length: number | null\r\n    maxLength: number\r\n    allowGrow: boolean\r\n    playerIsNear: boolean\r\n    grabbedCount: number | null\r\n    \r\n    constructor(position: Vector2, data?: { length?: number, maxLength?: number, grabbedCount?: number }) {\r\n        super(\"fetus-stone\", position);\r\n    \r\n        this.randomRotate = false;\r\n\r\n        this.playerIsNear = false;\r\n        this.length = data ? (data?.length || null) : null;\r\n        this.maxLength = data ? (data?.maxLength || 1) : 1;\r\n        this.allowGrow = true;\r\n        this.grabbedCount = data ? (data?.grabbedCount || 0) : 0;\r\n\r\n        this.breakAudioNames = [\"plant-break\"];\r\n        this.hitAudioName = \"plant-hit\";\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n\r\n        if (this.length === null) {\r\n            this.maxLength = clamp(randomInt(-1, Config.VINE_MAX_LENGTH), Config.VINE_MIN_LENGTH, Config.VINE_MAX_LENGTH);\r\n            this.length = clamp(randomInt(0, 4), 0, this.maxLength);\r\n            this.saveData();\r\n        }\r\n        if (this.grabbedCount == null) {\r\n            this.grabbedCount = 0;\r\n            this.saveData()\r\n        }\r\n            \r\n        this.checkEmptySpace();\r\n    }\r\n    update() {\r\n        super.update();\r\n\r\n        // this.grabbing();\r\n        \r\n        if (this.game.tick(Config.VINE_GROW_TICK))\r\n            if (chance(Config.VINE_GROW_CHANCE))\r\n                this.grow();\r\n        if (this.game.tick(Config.VINE_GROW_TICK * 2))\r\n            if (chance(Config.VINE_GROW_CHANCE * .2) && this.grabbedCount != null) {\r\n                this.grabbedCount --;\r\n                this.grabbedCount = clamp(this.grabbedCount, 0, this.length || 0)\r\n            }\r\n    }\r\n\r\n    render() {\r\n        super.render();\r\n        \r\n        if (this.allowGrow)\r\n            this.renderVine();\r\n    }\r\n\r\n    grab() {\r\n        if (this.grabbedCount == null) return;\r\n        \r\n        this.grabbedCount ++;\r\n        this.grabbedCount = clamp(this.grabbedCount, 0, this.length || 0)\r\n        console.log(true);\r\n    }\r\n    grabbing() {\r\n        const player = this.game.getChildById<Player>(\"player\");\r\n        if (!player) return;\r\n\r\n        const vineHeight = (this.length || 0) * Config.SPRITE_SIZE;\r\n\r\n        if (this.game.physics.collideWithRect({\r\n            id: player.id,\r\n            position: player.position,\r\n            width: player.collider.width,\r\n            height: player.collider.height,\r\n        }, {\r\n            id: this.id,\r\n            position: this.position.add(new Vector2(0, vineHeight / 2)),\r\n            width: this.collider.width / 2,\r\n            height: this.collider.height + vineHeight,\r\n        }).any) {\r\n\r\n            console.log(true);\r\n            player.nearFetusStone = this;\r\n            player.actionType = \"grab\";\r\n            \r\n        } else {\r\n            player.actionType = \"\";\r\n            player.nearFetusStone = undefined;\r\n        }\r\n        \r\n    }\r\n\r\n    onBreak() {\r\n        super.onBreak();\r\n        if (!this.length) return;\r\n        const size = Config.SPRITE_SIZE;\r\n\r\n        SpawnParticles(this.game, this.position, {\r\n            count: 4,\r\n            colors: [Color.ORANGE],\r\n            velocity: ()=> new Vector2(random(1, 1.5)),\r\n            gravity: .01,\r\n            opacity: 0,\r\n            downOpacity: -.01,\r\n            downSize: .008,\r\n            rotationVelocity: ()=> random(-.01, .01),\r\n            box: ()=> new Vector2(random(-size*.4, size*.4), random(0, size * (this.length || 1)))\r\n        });\r\n    }\r\n\r\n    renderVine() {\r\n        if (!this.length) return;\r\n        const size = Config.SPRITE_SIZE;\r\n        \r\n        for (let i = 0; i < this.length; i ++) {\r\n            let spriteIndex = 0\r\n\r\n            if (i == 0)\r\n                spriteIndex = 0;\r\n            if (i > 0)\r\n                spriteIndex = 1;\r\n            if (i == this.length - 1)\r\n                spriteIndex = 2;\r\n            \r\n            const pos = this.position.add(new Vector2(0, size + i * size));\r\n                \r\n            const t = 1 - this.game.camera.position.y / 200;\r\n            const d = (this.game.camera.position.distance(pos) - 200);\r\n            const darkenFactor = (d > 96 ? 1 : d / 96) + (t > 0 ? t : 0);\r\n            \r\n            if (darkenFactor < 1 || !Config.ALLOW_DARK)\r\n                this.game.renderer.drawSprite({\r\n                    texture: asImage(this.game.getAssetByName(`fetus-vine`)),\r\n                    position: pos.add(new Vector2(Math.sin(this.game.clock.elapsed / 40 + this.position.x / Config.SPRITE_SIZE) * i * 1.5)),\r\n                    frame: new Vector2(0, spriteIndex),\r\n                    flip: { x: i % 2 == 0 || i % 3 == 0, y: false },\r\n                    opacity: Config.ALLOW_DARK ? 1 - darkenFactor : 1\r\n                });\r\n\r\n            this.game.renderer.drawText({\r\n                text: i > this.length-1 - (this.grabbedCount || 0) ? \"grabbed\" : \"\",\r\n                position: pos,\r\n                layer: \"particles\"\r\n            })\r\n        }\r\n        this.game.renderer.drawText({\r\n            text: (this.grabbedCount || 0).toString(),\r\n            position: this.position,\r\n            layer: \"particles\"\r\n        })\r\n        \r\n        // Spawn particles\r\n        if (this.game.tick(40) || this.game.tick(120))\r\n            SpawnParticles(this.game, this.position, {\r\n                count: 1,\r\n                colors: [Color.ORANGE],\r\n                velocity: ()=> new Vector2(random(.2, .5)),\r\n                gravity: .01,\r\n                opacity: 0,\r\n                downOpacity: -.01,\r\n                downSize: .008,\r\n                rotationVelocity: ()=> random(-.01, .01),\r\n                box: ()=> new Vector2(random(-size*.4, size*.4), random(0, size * (this.length || 1)))\r\n            });\r\n        \r\n    }\r\n    grow() {\r\n        if (this.length === null) return;\r\n\r\n        let needLength = this.length;\r\n        let height = 0;\r\n        \r\n        if (needLength + 1 < this.maxLength)\r\n            needLength ++;\r\n\r\n        for (let i = 1; i < 8; i ++) {\r\n            height ++;\r\n            if (this.checkBlockIn(new Vector2(0, i)))\r\n                break;\r\n        }\r\n\r\n        if (this.checkBlockIn(new Vector2(0, needLength)))\r\n            needLength --;\r\n\r\n        this.length = clamp(needLength, 0, height);\r\n\r\n        this.saveData();\r\n    }\r\n\r\n    saveData() {\r\n        this.game.generator.modifyOre(this.inChunkId, {\r\n            length: this.length,\r\n            grabbedCount: this.grabbedCount,\r\n            maxLength: this.maxLength\r\n        });\r\n    }\r\n    checkEmptySpace() {\r\n        if (this.checkBlockIn(new Vector2(0, 1)) && this.allowGrow)\r\n            this.allowGrow = false;\r\n    }\r\n}","import { Color, Config } from \"../../config\";\r\nimport { SpawnDisputesParticles, SpawnParticles } from \"../../engine/components/Particles\";\r\nimport { asImage, clamp, random, randomInt, Vector2 } from \"../../engine/utils/math\";\r\nimport { Player, ToolLevel } from \"../entities/Player\";\r\nimport { Ore } from \"./Ore\";\r\n\r\nexport class MushroomStone extends Ore {\r\n    allowGrow: boolean\r\n    growed: boolean\r\n    currentFrame: number\r\n    \r\n    constructor(position: Vector2) {\r\n        super(\"mushroom-stone\", position);\r\n\r\n        this.allowGrow = true;\r\n        this.growed = true;\r\n        this.randomRotate = false;\r\n        this.particlesColors = [Color.GREY, Color.RED];\r\n        this.currentFrame = randomInt(0, 4);\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n\r\n        if (this.checkBlockIn(new Vector2(0, -1)))\r\n            this.allowGrow = false;\r\n    }\r\n\r\n    render() {\r\n        super.render();\r\n\r\n        if (this.allowGrow)\r\n            this.renderMushroom();\r\n    }\r\n    hit(damage: number, toolLevel: ToolLevel) {\r\n        super.hit(damage, toolLevel);\r\n\r\n        SpawnDisputesParticles(this.game, this.position.add(new Vector2(0, -Config.SPRITE_SIZE / 2-10)), .4);\r\n    }\r\n    onBreak() {\r\n        super.onBreak();\r\n        \r\n        SpawnDisputesParticles(this.game, this.position, 1);\r\n\r\n        const player = this.game.getChildById<Player>(\"player\");\r\n        if (player && this.position.distance(player.position) < 200 && player.position.y < this.position.y + Config.SPRITE_SIZE/2)\r\n            player.hit(randomInt(4, 6));\r\n    }\r\n\r\n    renderMushroom() {\r\n        if (!this.growed || !this.visible) return;\r\n\r\n        const offset = ((Math.sin(this.game.clock.elapsed / 60 + this.position.x) + 1) / 2) * .1;\r\n\r\n        this.game.renderer.drawSprite({\r\n            texture: asImage(this.game.getAssetByName(\"mushroom\")),\r\n            frame: new Vector2(this.currentFrame),\r\n            scale: new Vector2(1, 1 - offset),\r\n            position: this.position.add(new Vector2(0, -Config.SPRITE_SIZE + (offset * Config.SPRITE_SIZE) / 2)),\r\n            opacity: this.opacity\r\n        })\r\n    }\r\n}","import { initAssets } from \"./managers/assets\";\r\nimport { Game } from \"./engine\";\r\nimport { Player } from \"./objects/entities/Player\";\r\nimport { SpawnParticles } from \"./engine/components/Particles\";\r\nimport { initLevel } from \"./managers/level\";\r\nimport { Stone } from \"./objects/ores/Stone\";\r\nimport { CrackedStone } from \"./objects/ores/CrackedStone\";\r\nimport { Color, Config, GeneratorConfig } from \"./config\";\r\nimport { DeepStone } from \"./objects/ores/DeepStone\";\r\nimport { Cidium } from \"./objects/ores/Cidium\";\r\nimport { initDome } from \"./managers/dome\";\r\nimport { Osmy } from \"./objects/ores/Osmy\";\r\nimport { Basalt } from \"./objects/ores/Basalt\";\r\nimport { inRange, Vector2 } from \"./engine/utils/math\";\r\nimport { Antin } from \"./objects/ores/Antin\";\r\nimport { Rady } from \"./objects/ores/Rady\";\r\nimport { BurntBasalt } from \"./objects/ores/BurntBasalt\";\r\nimport { Nerius } from \"./objects/ores/Nerius\";\r\nimport { StonyGround } from \"./objects/ores/StonyGround\";\r\nimport { Robot } from \"./objects/entities/Robot\";\r\nimport { Destrony } from \"./objects/ores/Destrony\";\r\nimport { Manty } from \"./objects/ores/Manty\";\r\nimport { FetusVine } from \"./objects/plants/FetusVine\";\r\nimport { FetusStone } from \"./objects/ores/FetusStone\";\r\nimport { MushroomStone } from \"./objects/ores/MushroomStone\";\r\n\r\nconst game = new Game();\r\n\r\nconst player = game.add<Player>(new Player());\r\n// const robot = game.add<Robot>(new Robot(new Vector2(Config.WORLD_WIDTH * Config.SPRITE_SIZE / 2 - Config.SPRITE_SIZE / 2, Config.SPRITE_SIZE)));\r\nconst level = initLevel(game);\r\n\r\nlet lastLoop = Date.now();\r\nlet fps = 0;\r\n\r\ngame.addInit(()=> {\r\n    \r\n    initAssets(game);\r\n    initDome(game);\r\n    \r\n    game.generator.settings = [\r\n        // > Stones\r\n        {\r\n            value: [0, 1],\r\n            height: [0, 43],\r\n            block: Stone,\r\n        },\r\n        {\r\n            value: [.5, .6],\r\n            height: [5, 90],\r\n            divider: 5,\r\n            block: CrackedStone\r\n        },\r\n        {\r\n            value: [.5, .6],\r\n            height: [0, 14],\r\n            divider: 5,\r\n            block: StonyGround\r\n        },\r\n\r\n        // > Deepest stones\r\n        // Deep stone blend layer\r\n        {\r\n            value: [.8, 1],\r\n            height: [30, 43],\r\n            divider: 2,\r\n            block: DeepStone\r\n        },\r\n        // Deep stone layer\r\n        {\r\n            value: [0, 1],\r\n            height: [42, GeneratorConfig.BASALT_LAYER_HEIGHT],\r\n            block: DeepStone\r\n        },\r\n\r\n        // Basalt blend layer\r\n        {\r\n            value: [.7, 1],\r\n            height: [GeneratorConfig.BASALT_LAYER_HEIGHT - GeneratorConfig.LAYERS_BLEND_HEIGHT, GeneratorConfig.BASALT_LAYER_HEIGHT],\r\n            divider: 3,\r\n            block: Basalt\r\n        },\r\n        // Basalt layer\r\n        {\r\n            value: [0, 1],\r\n            height: [GeneratorConfig.BASALT_LAYER_HEIGHT, GeneratorConfig.BURNT_BASALT_LAYER_HEIGHT],\r\n            block: Basalt\r\n        },\r\n\r\n        // Burnt basalt blend layer\r\n        {\r\n            value: [.8, 1],\r\n            height: [GeneratorConfig.BURNT_BASALT_LAYER_HEIGHT - GeneratorConfig.LAYERS_BLEND_HEIGHT, GeneratorConfig.BURNT_BASALT_LAYER_HEIGHT],\r\n            divider: 3,\r\n            block: BurntBasalt\r\n        },\r\n        // Burnt basalt layer\r\n        {\r\n            value: [0, 1],\r\n            height: [GeneratorConfig.BURNT_BASALT_LAYER_HEIGHT, Config.WORLD_HEIGHT],\r\n            block: BurntBasalt\r\n        },\r\n        // > Destrony layer\r\n        {\r\n            value: [0, 1],\r\n            height: [Config.WORLD_HEIGHT, Config.WORLD_HEIGHT],\r\n            block: Destrony\r\n        },\r\n\r\n        // > Other\r\n        // Fetus stone\r\n        {\r\n            value: [0, 1],\r\n            height: [30, GeneratorConfig.BASALT_LAYER_HEIGHT-20],\r\n            divider: 2,\r\n            block: FetusStone,\r\n            rules(noiseX, noiseY, getValue) {\r\n                return (\r\n                    inRange(getValue(noiseX, noiseY+1, 10), 0, .5) &&\r\n                    inRange(getValue(noiseX, noiseY, 8), 0, .8) \r\n                    // inRange(getValue(noiseX, noiseY, 2), 0, .3)\r\n                );\r\n            }\r\n        },\r\n        // Mushroom stone\r\n        {\r\n            value: [0, 1],\r\n            height: [0, GeneratorConfig.BURNT_BASALT_LAYER_HEIGHT-15],\r\n            // height: [GeneratorConfig.BASALT_LAYER_HEIGHT, GeneratorConfig.BURNT_BASALT_LAYER_HEIGHT-15],\r\n            divider: 2,\r\n            block: MushroomStone,\r\n            rules(noiseX, noiseY, getValue) {\r\n                return (\r\n                    inRange(getValue(noiseX, noiseY-1, 10), 0, .5) &&\r\n                    inRange(getValue(noiseX, noiseY, 8), 0, .6) \r\n                    // inRange(getValue(noiseX, noiseY, 2), 0, .3)\r\n                );\r\n            }\r\n        },\r\n        \r\n        // > Ores\r\n        // Cidium\r\n        {\r\n            value: [.95, 1],\r\n            height: [0, GeneratorConfig.BASALT_LAYER_HEIGHT - GeneratorConfig.LAYERS_BLEND_HEIGHT * 3],\r\n            // height: [12, GeneratorConfig.BASALT_LAYER_HEIGHT/2],\r\n            divider: 5,\r\n            block: Cidium\r\n        },\r\n\r\n        // Osmy - deep stone layer\r\n        {\r\n            value: [0, .7],\r\n            height: [0, GeneratorConfig.BASALT_LAYER_HEIGHT - GeneratorConfig.LAYERS_BLEND_HEIGHT],\r\n            // height: [50, GeneratorConfig.BASALT_LAYER_HEIGHT - GeneratorConfig.LAYERS_BLEND_HEIGHT],\r\n            divider: 4,\r\n            block: Osmy,\r\n            rules(noiseX, noiseY, getValue) {\r\n                // return true;\r\n                return getValue(noiseX+1, noiseY+2, 4) > .85;\r\n            }\r\n        },\r\n        {\r\n            value: [.9, 1],\r\n            height: [0, GeneratorConfig.BASALT_LAYER_HEIGHT - GeneratorConfig.LAYERS_BLEND_HEIGHT],\r\n            // height: [100, GeneratorConfig.BASALT_LAYER_HEIGHT - GeneratorConfig.LAYERS_BLEND_HEIGHT],\r\n            divider: 3,\r\n            block: Nerius\r\n        },\r\n        \r\n        // Antin - basalt layer\r\n        {\r\n            value: [0, .6],\r\n            height: [0, Config.WORLD_HEIGHT - 40],\r\n            // height: [GeneratorConfig.BASALT_LAYER_HEIGHT + 10, Config.WORLD_HEIGHT - 22],\r\n            divider: 3,\r\n            block: Antin,\r\n            rules(noiseX, noiseY, getValue) {\r\n                return inRange(getValue(noiseX+1, noiseY, 5), 0, .4);\r\n            }\r\n        },\r\n        // Rady - basalt layer\r\n        {\r\n            value: [0, .3],\r\n            height: [0, Config.WORLD_HEIGHT - 5],\r\n            // height: [200, Config.WORLD_HEIGHT - 5],\r\n            divider: 2,\r\n            block: Rady\r\n        },\r\n        // > Manty layer\r\n        {\r\n            value: [0, .3],\r\n            height: [0, Config.WORLD_HEIGHT - 1],\r\n            // height: [Config.WORLD_HEIGHT - 5, Config.WORLD_HEIGHT - 1],\r\n            divider: 2,\r\n            block: Manty\r\n        },\r\n        {\r\n            value: [0, .5],\r\n            height: [Config.WORLD_HEIGHT - 1, Config.WORLD_HEIGHT - 1],\r\n            divider: 2,\r\n            block: Manty\r\n        },\r\n\r\n        // > Holes\r\n        {\r\n            value: [0, .5],\r\n            height: [5, GeneratorConfig.BURNT_BASALT_LAYER_HEIGHT - 20],\r\n            block: null,\r\n        },\r\n        {\r\n            value: [0, .4],\r\n            height: [GeneratorConfig.BURNT_BASALT_LAYER_HEIGHT, Config.WORLD_HEIGHT - 40],\r\n            divider: 5,\r\n            block: null,\r\n        },\r\n    ];\r\n    game.camera.follow(player.position);\r\n    \r\n});\r\ngame.addUpdate(()=> {\r\n    const thisLoop = Date.now();\r\n    if (game.clock.elapsed % 30 == 0)\r\n        fps = +(1000 / (thisLoop - lastLoop)).toFixed(1);\r\n    lastLoop = thisLoop;\r\n\r\n    level.update(player);\r\n    \r\n    game.camera.follow(player.position, .1);\r\n    game.generator.generateChunksAt(game.camera.position);\r\n});\r\ngame.addRender(renderer=> {\r\n\r\n    renderer.drawText({\r\n        text: fps.toString(),\r\n        font: \"20px Pixel\",\r\n        position: new Vector2(40, 40),\r\n        layer: \"ui\"\r\n    });\r\n    renderer.drawText({\r\n        text: `Height: ${ Math.floor(player.position.y / Config.SPRITE_SIZE + 1) }`,\r\n        font: \"20px Pixel\",\r\n        position: new Vector2(70, 80),\r\n        layer: \"ui\"\r\n    });\r\n    \r\n    // for (let y = 0; y < Config.WORLD_HEIGHT / Config.CHUNK_SIZE; y ++)\r\n    // for (let x = 0; x < Config.WORLD_WIDTH / Config.CHUNK_SIZE; x ++)\r\n    //     renderer.drawRect({\r\n    //         position: new Vector2(x*Config.CHUNK_SIZE*Config.SPRITE_SIZE, y*Config.CHUNK_SIZE*Config.SPRITE_SIZE).add(Vector2.all(Config.SPRITE_SIZE*1.5)),\r\n    //         width: Config.CHUNK_SIZE,\r\n    //         height: Config.CHUNK_SIZE,\r\n    //         color: \"rgba(0, 0, 0, 0)\",\r\n    //         stroke: { width: 2, color: Color.RED }\r\n    //     });\r\n\r\n});\r\n\r\ngame.init();\r\n\r\n// ! Debug\r\nwindow.addEventListener(\"keydown\", e=> {\r\n    \r\n    if (e.code == \"KeyG\")\r\n        console.log(game);\r\n    if (e.code == \"KeyP\")\r\n        console.log(player);\r\n    if (e.code == \"KeyI\")\r\n        console.log(player.inventory);\r\n    if (e.code == \"KeyM\")\r\n        console.log(player);\r\n\r\n});\r\n"]}